(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["app"],{0:function(e,t,a){e.exports=a("cd49")},"0097":function(e,t,a){},"04e4":function(e,t,a){"use strict";a("fb30")},"0c75":function(e,t,a){"use strict";a("180d")},"0fb3":function(e,t,a){},"120a":function(e,t,a){},"14c37":function(e,t,a){},1664:function(e,t,a){"use strict";a("aecc")},"180d":function(e,t,a){},1945:function(e,t,a){},"1e05":function(e,t,a){"use strict";a("80d7")},2017:function(e,t,a){"use strict";a("cafe")},2246:function(e,t,a){"use strict";a("1945")},"26ff":function(e,t,a){"use strict";a("b680")},"28d5":function(e,t,a){},"2aee":function(e,t,a){"use strict";a("7b8c")},"2bde":function(e,t,a){"use strict";a("7997")},"2d4a":function(e,t,a){},"2d8a":function(e,t,a){"use strict";a("738c")},"30f5":function(e,t,a){},3178:function(e,t,a){"use strict";a("30f5")},"31ca":function(e,t,a){"use strict";a("0fb3")},3206:function(e,t,a){},"34c4":function(e,t,a){},"3676d":function(e,t,a){"use strict";a("0097")},"3a13":function(e,t,a){},"3ac5":function(e,t,a){},"3f66":function(e,t,a){},"40f5":function(e,t,a){},4368:function(e,t,a){},"438a":function(e,t,a){"use strict";a("6bb1")},"44cc":function(e,t,a){},"473d":function(e,t,a){"use strict";a("3a13")},"4b8e":function(e,t,a){"use strict";a("61de")},5211:function(e,t,a){},"529c":function(e,t,a){"use strict";a("28d5")},"530f":function(e,t,a){"use strict";a("3f66")},"53b2":function(e,t,a){"use strict";a("ed84")},5440:function(e,t,a){"use strict";a("cb7c")},"54e4":function(e,t,a){},5611:function(e,t,a){"use strict";a("5a48")},"56d6":function(e,t,a){"use strict";a("3206")},"5a48":function(e,t,a){},"5c0b":function(e,t,a){"use strict";a("9c0c")},"60ba":function(e,t,a){"use strict";a("3ac5")},"61de":function(e,t,a){},"64e4":function(e,t,a){"use strict";a("8072")},"6bb1":function(e,t,a){},"6c6a":function(e,t,a){"use strict";a("da3a")},"738c":function(e,t,a){},7908:function(e,t,a){},7997:function(e,t,a){},"7a5b":function(e,t,a){"use strict";a("c596")},"7b8c":function(e,t,a){},8072:function(e,t,a){},"80a2":function(e,t,a){},"80d7":function(e,t,a){},"861e":function(e,t,a){"use strict";a("7908")},8833:function(e,t,a){"use strict";a("5211")},8931:function(e,t,a){},"91f6":function(e,t,a){"use strict";a("120a")},9485:function(e,t,a){e.exports=a.p+"static/img/nodata.b848fd91.png"},"995e":function(e,t,a){"use strict";a("44cc")},"9b59":function(e,t,a){},"9c0c":function(e,t,a){},"9c3e":function(e,t,a){},"9d64":function(e,t,a){e.exports=a.p+"static/img/logo.4223b82c.png"},a028:function(e,t,a){},a07a:function(e,t,a){"use strict";a("2d4a")},a312:function(e,t,a){},a47e:function(e,t,a){"use strict";a("14c37")},a800:function(e,t,a){"use strict";a("a028")},aecc:function(e,t,a){},af95:function(e,t,a){},b2f4:function(e,t,a){"use strict";a("af95")},b523:function(e,t,a){"use strict";a("9b59")},b680:function(e,t,a){},b8cf:function(e,t,a){},bbd6:function(e,t,a){e.exports=a.p+"static/img/layoutlogo.d645938e.png"},c081:function(e,t,a){},c3db:function(e,t,a){"use strict";a("ebb1")},c49e:function(e,t,a){},c596:function(e,t,a){},cae3:function(e,t,a){"use strict";a("c081")},cafe:function(e,t,a){},cb7c:function(e,t,a){},cc77:function(e,t,a){"use strict";a("b8cf")},ccd5:function(e,t,a){},cd49:function(e,t,a){"use strict";a.r(t);var i={};a.r(i),a.d(i,"default",(function(){return Po}));a("e260"),a("e6cf"),a("cca6"),a("a79df");var s=a("2b0e"),n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{attrs:{id:"app"}},[a("router-view")],1)},r=[],o=(a("c49e"),s["default"].extend({})),l=o,c=(a("5c0b"),a("2877")),u=Object(c["a"])(l,n,r,!1,null,null,null),d=u.exports,p=(a("99af"),a("a9e3"),a("2909")),h=a("8c4f"),m=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"login"},[e._m(0),a("div",{staticClass:"loginMainWarp left"},[a("div",{staticClass:"loginMain"},[e._m(1),a("div",{staticClass:"loginContent"},[a("div",{staticClass:"header"},[e._v(" 登陆 ")]),a("el-form",{ref:"loginForm",staticClass:"demo-ruleForm",attrs:{model:e.loginRuleForm,rules:e.loginRules,"label-width":"0px"}},[a("el-form-item",{attrs:{label:"",prop:"userCode"}},[a("el-input",{attrs:{placeholder:"用户名"},model:{value:e.loginRuleForm.userCode,callback:function(t){e.$set(e.loginRuleForm,"userCode",t)},expression:"loginRuleForm.userCode"}})],1),a("el-form-item",{attrs:{label:"",prop:"password"}},[a("el-input",{attrs:{placeholder:"密码","show-password":""},model:{value:e.loginRuleForm.password,callback:function(t){e.$set(e.loginRuleForm,"password",t)},expression:"loginRuleForm.password"}})],1),a("el-form-item",{staticClass:"buttonClick"},[a("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.loginClick("loginForm")}}},[e._v("登陆")])],1)],1)],1)])])])},g=[function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"left loginBgWarp"},[a("div",{staticClass:"loginBg"})])},function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"logo clearfix"},[i("img",{staticClass:"logoImg left",attrs:{src:a("9d64"),alt:""}}),i("h1",{staticClass:"left"},[e._v(" 浙江英特集团股份有限公司 ")])])}],f=a("d4ec"),v=a("bee2"),b=a("262e"),y=a("2caf"),C=a("9ab4"),k=a("1b40"),D=a("4bb5"),w=Object(D["b"])("user"),_=function(e){Object(b["a"])(a,e);var t=Object(y["a"])(a);function a(){var e;return Object(f["a"])(this,a),e=t.apply(this,arguments),e.loginRuleForm={userCode:"",password:"",Yzm:""},e.loginRules={userCode:[{required:!0,message:"请输入用户名",trigger:"blur"}],password:[{required:!0,message:"请输入密码",trigger:"blur"}],Yzm:[{required:!0,message:"请输入验证码",trigger:"blur"}]},e}return Object(v["a"])(a,[{key:"loginClick",value:function(e){var t=this;this.$refs[e].validate((function(e){if(!e)return!1;var a={userCode:t.loginRuleForm.userCode,password:t.loginRuleForm.password,verifyKey:t.loginRuleForm.Yzm,secretKey:localStorage.getItem("secretKeyParam"),ifGetVerify:!1};t.actionLogin(a)}))}},{key:"mounted",value:function(){var e=localStorage.getItem("loginCode");2e3===Number(e)&&this.$router.push({path:"/"}).catch((function(e){}))}}]),a}(k["d"]);Object(C["a"])([w.Action],_.prototype,"actionLogin",void 0),_=Object(C["a"])([Object(k["a"])({})],_);var I=_,L=I,T=(a("2017"),Object(c["a"])(L,m,g,!1,null,null,null)),O=T.exports,x=a("5530"),S=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"layoutCrm"},[a("el-container",{staticClass:"mainContainer"},[a("el-header",[a("layout-header",{attrs:{menuList:e.mainMenuList,moduleName:e.moduleName}})],1),a("el-container",[a("el-aside",{attrs:{width:e.asideWidth}},[a("el-menu",{staticClass:"el-menu-vertical-demo",attrs:{"default-active":e.asideActive,router:"","background-color":"rgb(0, 21, 41)","text-color":"#999","active-text-color":"#fff",collapse:e.isCollapse,"unique-opened":!0}},[a("aside-menu",{attrs:{menuList:e.asideMenuList}},[a("div",{staticClass:"isCollapseWarp",style:{width:e.asideWidth}},[a("i",{staticClass:"right",class:e.isCollapse?"el-icon-s-unfold":"el-icon-s-fold",on:{click:e.isCollapseClick}})])])],1)],1),a("el-main",[a("layout-main")],1)],1)],1)],1)},j=[],E=(a("4de4"),a("b0c0"),function(){var e=this,t=this,a=t.$createElement,i=t._self._c||a;return i("div",{staticClass:"layoutHeader clearfix"},[t._m(0),"admin"===t.moduleName?i("div",{staticClass:"adminHeader left"},[i("i",{staticClass:"iconfont ytcrm-houtaiguanlixitong"}),t._v(" 后台管理系统 ")]):t._e(),"admin"===t.moduleName?i("div",{staticClass:"adminBack right",on:{click:function(e){return t.clickCommand("backCrm")}}},[t._m(1)]):t._e(),"crm"===t.moduleName?i("div",{staticClass:"menuTab left"},[i("el-menu",{staticClass:"el-menu-demo",attrs:{router:"","default-active":t.userHeaderActiveIndex,"text-color":"#5c6075","active-text-color":"#2362fb",mode:"horizontal"},on:{select:t.headerMenuSelect}},t._l(t.menuList,(function(e,a){return i("el-menu-item",{key:a,attrs:{index:e.path}},[i("template",{slot:"title"},[i("i",{class:e.icon}),i("span",[t._v(t._s(e.pmsName))])])],2)})),1)],1):t._e(),"crm"===t.moduleName?i("div",{staticClass:"information right"},[i("ul",{staticClass:"clearfix"},[i("li",{staticClass:"message left"},[i("el-badge",{staticClass:"item",attrs:{value:10}},[i("i",{staticClass:"el-icon-message"})])],1),i("li",{staticClass:"infor left"},[i("el-dropdown",{attrs:{trigger:"click"},on:{command:t.clickCommand}},[i("span",{staticClass:"el-dropdown-link"},[i("span",{staticClass:"name"},[i("img",{staticClass:"name__img",attrs:{src:t.headerImg}})]),i("i",{staticClass:"el-icon-caret-bottom"})]),i("el-dropdown-menu",{staticClass:"layoutHeader-dropDown",attrs:{slot:"dropdown"},slot:"dropdown"},[i("el-dropdown-item",{attrs:{command:"modifyHeaderImg"}},[i("i",{staticClass:"el-icon-user"}),t._v(" 修改头像 ")]),i("el-dropdown-item",{attrs:{command:"modifyPassword"}},[i("i",{staticClass:"el-icon-setting"}),t._v(" 修改密码 ")]),i("el-dropdown-item",{attrs:{command:"backLogin"}},[i("i",{staticClass:"iconfont ytcrm-tuichu"}),t._v(" 退出登录 ")]),i("el-dropdown-item",{staticClass:"enterAdminWarp",attrs:{command:"admin",divided:""}},[i("li",{staticClass:"enterAdmin"},[t._v("企业管理后台")])])],1)],1)],1)])]):t._e(),i("a-modal",{attrs:{title:"修改密码",width:800,visible:t.visible,confirmLoading:t.confirmLoading,cancelText:"关闭"},on:{ok:t.handleOk,cancel:t.handleCancel}},[i("a-spin",{attrs:{spinning:t.confirmLoading}},[i("a-form",{attrs:{form:t.form}},[i("a-form-item",{attrs:{labelCol:t.labelCol,wrapperCol:t.wrapperCol,label:"旧密码"}},[i("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["oldpassword",t.validatorRules.oldpassword],expression:"['oldpassword', validatorRules.oldpassword]"}],attrs:{type:"password",placeholder:"请输入旧密码"}})],1),i("a-form-item",{attrs:{labelCol:t.labelCol,wrapperCol:t.wrapperCol,label:"新密码"}},[i("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["password",t.validatorRules.password],expression:"['password', validatorRules.password]"}],attrs:{type:"password",placeholder:"请输入新密码"}})],1),i("a-form-item",{attrs:{labelCol:t.labelCol,wrapperCol:t.wrapperCol,label:"确认新密码"}},[i("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["confirmpassword",t.validatorRules.confirmpassword],expression:"['confirmpassword', validatorRules.confirmpassword]"}],attrs:{type:"password",placeholder:"请确认新密码"},on:{blur:t.handleConfirmBlur}})],1)],1)],1)],1),i("a-modal",{attrs:{title:"修改头像",width:600,visible:t.headerVisible,confirmLoading:t.confirmLoading,cancelText:"关闭"},on:{ok:t.handleImgOk,cancel:t.handleCancel}},[i("a-spin",{attrs:{spinning:t.confirmLoading}},[i("a-row",[i("a-col",{style:{height:"300px"},attrs:{xs:24,md:12}},[i("a-upload-dragger",{attrs:{name:"file",multiple:!1,"file-list":t.fileList,showUploadList:!1,action:"https://www.mocky.io/v2/5cc8019d300000980a055e76","before-upload":t.beforeUpload},on:{change:t.handleChange}},[i("p",{staticClass:"ant-upload-drag-icon"},[i("a-icon",{style:{color:"#666"},attrs:{type:"inbox"}})],1),i("p",{staticClass:"ant-upload-text"},[t._v(" 点击或拖拽文件到这里上传 ")]),i("p",{staticClass:"ant-upload-hint"},[t._v(" 只支持上传图片文件，大小不超过4M ")])])],1),i("a-col",{style:{height:"300px"},attrs:{xs:24,md:12}},[i("div",{staticClass:"avatar-div"},[t._v(" 预览 "),i("img",{staticClass:"avatar-div__img",attrs:{src:t.headerImg,title:"点击预览"},on:{click:function(){e.previewVisible=!0}}})])])],1)],1)],1),i("a-modal",{attrs:{visible:t.previewVisible,footer:null},on:{cancel:function(){e.previewVisible=!1}}},[i("img",{staticStyle:{width:"100%"},attrs:{alt:"example",src:t.headerImg}})])],1)}),N=[function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"headerWarp left"},[i("h1",{staticClass:"logo"},[i("img",{attrs:{src:a("bbd6"),alt:""}})])])},function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("ul",{staticClass:"clearfix"},[a("li",{staticClass:"backCrm left"},[e._v("返回首页")]),a("li",{staticClass:"loginOut left"},[e._v("退出系统")])])}],R=(a("ac1f"),a("5319"),a("96cf"),a("1da1")),U=function(e){"crm"===e?(document.getElementsByTagName("body")[0].style.setProperty("--activeBgColor","rgb(35, 98, 251)"),document.getElementsByTagName("body")[0].style.setProperty("--activeHoverBgColor","rgba(26, 45, 63, 0.8)"),document.getElementsByTagName("body")[0].style.setProperty("--borderLeft","none"),document.getElementsByTagName("body")[0].style.setProperty("--iconfontColor","")):"admin"===e&&(document.getElementsByTagName("body")[0].style.setProperty("--activeBgColor","rgb(233,239,255)"),document.getElementsByTagName("body")[0].style.setProperty("--activeHoverBgColor","rgb(233,239,255)"),document.getElementsByTagName("body")[0].style.setProperty("--borderLeft","3px solid rgba(252, 146, 63, 1)"),document.getElementsByTagName("body")[0].style.setProperty("--iconfontColor","rgba(252, 146, 63, 1)"))},P=(a("a623"),a("4160"),a("caad"),a("a434"),a("d3b7"),a("2532"),a("1276"),a("159b"),a("bc3a")),A=a.n(P),$=a("5c96"),V=a.n($);window.canCancelAxios=[];var M=A.a.create({timeout:3e5});function F(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=window;if(e.length>0)e.forEach((function(e){for(var a=0;a<t.canCancelAxios.length;a++)t.canCancelAxios[a].key===e&&(t.canCancelAxios[a].cancel("中断请求"),t.canCancelAxios.splice(a,1),a--)}));else for(var a=0;a<t.canCancelAxios.length;a++)t.canCancelAxios[a].cancel("中断请求"),t.canCancelAxios.splice(a,1),a--}M.interceptors.request.use((function(e){var t=[];return e.url&&t.every((function(t){return!e.url.includes(t)}))&&(e.cancelToken=new A.a.CancelToken((function(t){var a=e.url.split("/");window.canCancelAxios.push({key:a[a.length-1]||"",cancel:t})}))),e.headers["X-TOKEN"]=localStorage.getItem("tokenValue"),e}),(function(e){return Promise.reject(e)})),M.interceptors.response.use((function(e){var t=e.status,a=e.statusText,i=e.data;if(200===t){if("LG00004"===i.code){var s="token已失效，请重新登陆";return localStorage.clear(),Co.push({path:"/"}),Object($["Message"])({showClose:!0,message:s,type:"error"}),Promise.reject(new Error(i.msg||"Error"))}return Promise.resolve(e)}var n={info:""};switch(t){case 400:n.info="请求无效";break;case 401:n.info="由于长时间未操作，登录已超时，请重新登录",Co.replace({path:"/"});break;case 403:n.info="拒绝访问";break;case 404:n.info="请求地址出错";break;case 405:n.info="未授权";break;case 408:n.info="请求超时";break;case 500:n.info="服务器内部错误";break;case 501:n.info="服务未实现";break;case 502:n.info="网关错误";break;case 503:n.info="服务不可用";break;case 504:n.info="网关超时";break;case 505:n.info="HTTP版本不受支持";break;default:n.info="网络波动，请重试"}var r=a?n.info+" "+a:n.info;return Promise.reject(new Error(r||"Error"))}),(function(e){return Promise.reject(e)}));var z=M,H=0,K="",B="";switch(H){case 1:K="/client",B="/client";break;case 0:K="http://10.18.15.186:8084/",B="http://10.18.15.186:8085/";break;default:break}var q=K,W=function(){var e=Object(R["a"])(regeneratorRuntime.mark((function e(t){var a;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,z({url:B+"/api/login/doLogin",method:"post",data:t});case 2:return a=e.sent,e.abrupt("return",a.data);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),J=function(){var e=Object(R["a"])(regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,z({url:B+"/api/login/getKey",method:"post"});case 2:return t=e.sent,e.abrupt("return",t.data);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),Y=function(){var e=Object(R["a"])(regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,z({url:B+"/api/login/doLogout",method:"post"});case 2:return t=e.sent,e.abrupt("return",t.data);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),G=function(){var e=Object(R["a"])(regeneratorRuntime.mark((function e(t){var a;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,z({url:B+"/api/user/updatePwd",method:"post",data:t});case 2:return a=e.sent,e.abrupt("return",a.data);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),X=function(){var e=Object(R["a"])(regeneratorRuntime.mark((function e(t){var a;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,z({url:B+"/api/user/updateHeadImgUrl",method:"post",data:t});case 2:return a=e.sent,e.abrupt("return",a.data);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),Q=Object(D["b"])("user"),Z=function(e){Object(b["a"])(a,e);var t=Object(y["a"])(a);function a(){var e;return Object(f["a"])(this,a),e=t.apply(this,arguments),e.headerVisible=!1,e.previewVisible=!1,e.fileList=[],e.headerImg="",e.visible=!1,e.confirmLoading=!1,e.validatorRules={oldpassword:{rules:[{required:!0,message:"请输入旧密码!"}]},password:{rules:[{required:!0,message:"请输入新密码!"}]},confirmpassword:{rules:[{required:!0,message:"请确认新密码!"}]}},e.confirmDirty=!1,e.labelCol={xs:{span:24},sm:{span:5}},e.wrapperCol={xs:{span:24},sm:{span:16}},e}return Object(v["a"])(a,[{key:"created",value:function(){var e=this.$root;this.headerImg=localStorage.getItem("headImgUrl")?e.domainUrl+localStorage.getItem("headImgUrl"):"",this.form=this.$form.createForm(this),this.validatorRules={oldpassword:{rules:[{required:!0,message:"请输入旧密码!"}]},password:{rules:[{required:!0,message:"请输入新密码!"},{validator:this.validateToNextPassword}]},confirmpassword:{rules:[{required:!0,message:"请确认新密码!"},{validator:this.compareToFirstPassword}]}}}},{key:"headerMenuSelect",value:function(e){this.SET_HEADERACTIVEINDEX(e)}},{key:"clickCommand",value:function(e){var t=this;switch(e){case"backLogin":this.$confirm("即将退出系统登陆，是否继续？").then(Object(R["a"])(regeneratorRuntime.mark((function e(){var a;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,Y();case 2:a=e.sent,a.success?(localStorage.clear(),t.$router.replace({name:"login"}),location.reload()):t.$message.error(a.msg||"退出失败");case 4:case"end":return e.stop()}}),e)}))));break;case"admin":this.$router.push({name:"admin"}),U("admin");break;case"backCrm":this.$router.push({name:"crm"}),U("crm");break;case"modifyPassword":this.visible=!0;break;case"modifyHeaderImg":this.headerVisible=!0;break;default:break}}},{key:"handleCancel",value:function(){this.visible=!1,this.headerVisible=!1}},{key:"validateToNextPassword",value:function(e,t,a){t&&this.confirmDirty&&this.form.validateFields(["confirm"],{force:!0}),a()}},{key:"compareToFirstPassword",value:function(e,t,a){t&&t!==this.form.getFieldValue("password")?a(new Error("两次输入的密码不一样！")):a()}},{key:"handleConfirmBlur",value:function(e){var t=e.target.value;this.confirmDirty=this.confirmDirty||!!t}},{key:"handleOk",value:function(){var e=this;this.form.validateFields(function(){var t=Object(R["a"])(regeneratorRuntime.mark((function t(a,i){var s,n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(a){t.next=10;break}return e.confirmLoading=!0,s=new FormData,s.append("oldPwd",i.oldpassword),s.append("newPwd",i.password),t.next=7,G(s);case 7:n=t.sent,e.confirmLoading=!1,n.success?(e.$message.success(n.msg||"修改成功"),e.visible=!1):e.$message.warning(n.msg||"修改失败");case 10:case"end":return t.stop()}}),t)})));return function(e,a){return t.apply(this,arguments)}}())}},{key:"beforeUpload",value:function(e){var t=e.size/1024/1024<=4;return t?(this.fileList=[e],!1):(this.$message.warning("".concat(e.name,"文件大小超出限制，请修改后重新上传")),!1)}},{key:"getBase64",value:function(e,t){var a=new FileReader;a.addEventListener("load",(function(){return t(a.result)})),a.readAsDataURL(e)}},{key:"handleChange",value:function(e){var t=this;this.getBase64(e.file,(function(e){t.headerImg=e}))}},{key:"handleImgOk",value:function(){var e=Object(R["a"])(regeneratorRuntime.mark((function e(){var t,a;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(this.fileList){e.next=3;break}return this.$message.warning("请选择文件!"),e.abrupt("return");case 3:return this.confirmLoading=!0,t=new FormData,t.append("headImg",this.fileList[0]),e.next=8,X(t);case 8:a=e.sent,this.confirmLoading=!1,a.success?(this.$message.success(a.msg||"修改成功"),localStorage.setItem("headImgUrl",this.headerImg),this.visible=!1):this.$message.warning(a.msg||"修改失败");case 11:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()}]),a}(k["d"]);Object(C["a"])([Q.Mutation],Z.prototype,"SET_HEADERACTIVEINDEX",void 0),Object(C["a"])([D["a"]],Z.prototype,"userHeaderActiveIndex",void 0),Object(C["a"])([Object(k["c"])()],Z.prototype,"menuList",void 0),Object(C["a"])([Object(k["c"])()],Z.prototype,"moduleName",void 0),Z=Object(C["a"])([Object(k["a"])({})],Z);var ee=Z,te=ee,ae=(a("c3db"),Object(c["a"])(te,E,N,!1,null,"550dca3f",null)),ie=ae.exports,se=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"layoutMain"},[a("router-view")],1)},ne=[],re=function(e){Object(b["a"])(a,e);var t=Object(y["a"])(a);function a(){return Object(f["a"])(this,a),t.apply(this,arguments)}return a}(k["d"]);re=Object(C["a"])([Object(k["a"])({})],re);var oe=re,le=oe,ce=(a("2246"),Object(c["a"])(le,se,ne,!1,null,"6493d64b",null)),ue=ce.exports,de=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"menuSun"},[e._l(e.menuList,(function(t){return[2===+t.pmsType&&t.children&&t.children.length>0?a("el-submenu",{key:t.path+t.pmsId,staticClass:"menu-item-content",attrs:{index:t.path}},[a("template",{slot:"title"},[a("i",{class:t.icon}),a("span",{attrs:{slot:"title"},slot:"title"},[e._v(e._s(t.pmsName.replace("*","")))])]),a("menuSun",{attrs:{menuList:t.children}})],2):a("el-menu-item",{key:t.path+t.pmsId,staticClass:"menu-item-content",attrs:{index:t.path}},[[a("i",{class:t.icon}),a("span",{attrs:{slot:"title"},slot:"title"},[e._v(e._s(t.pmsName.replace("*","")))])]],2)]})),e._t("default")],2)},pe=[],he=function(e){Object(b["a"])(a,e);var t=Object(y["a"])(a);function a(){return Object(f["a"])(this,a),t.apply(this,arguments)}return a}(k["d"]);Object(C["a"])([Object(k["c"])()],he.prototype,"menuList",void 0),he=Object(C["a"])([Object(k["a"])({name:"menuSun"})],he);var me=he,ge=me,fe=(a("8833"),Object(c["a"])(ge,de,pe,!1,null,null,null)),ve=fe.exports,be=Object(D["b"])("user"),ye=function(e){Object(b["a"])(a,e);var t=Object(y["a"])(a);function a(){var e;return Object(f["a"])(this,a),e=t.apply(this,arguments),e.moduleName="crm",e.mainMenuList=[],e.asideActive="/taskApproval/crmReminder",e.asideMenuList=[],e.asideWidth="220px",e.isCollapse=!1,e}return Object(v["a"])(a,[{key:"isCollapseClick",value:function(){this.isCollapse=!this.isCollapse,this.isCollapse?this.asideWidth="65px":this.asideWidth="220px"}},{key:"_getMenuList",value:function(){var e=localStorage.getItem("menu");e&&(this.mainMenuList=JSON.parse(e)),this.setHeaderActive()}},{key:"_getAsideMenu",value:function(e){this.asideMenuList=this.mainMenuList.length?this.mainMenuList.filter((function(t){return t.path===e}))[0].children:[]}},{key:"setHeaderActive",value:function(){var e,t=this.$route.name,a=this.$route.path;if(t&&a.length-1!==t.length){var i=a.substring(0,a.length-t.length-1);e=i}else e=a;this.SET_HEADERACTIVEINDEX(e)}},{key:"mounted",value:function(){this.asideActive=this.$route.path,this._getMenuList(),this.userHeaderActiveIndex&&this._getAsideMenu(this.userHeaderActiveIndex),U("crm")}},{key:"onRouteChanged",value:function(e){this.asideActive=e.path,this.setHeaderActive()}},{key:"onUserHeaderActiveIndexChanged",value:function(e){e&&this._getAsideMenu(e)}}]),a}(k["d"]);Object(C["a"])([be.Mutation],ye.prototype,"SET_HEADERACTIVEINDEX",void 0),Object(C["a"])([D["a"]],ye.prototype,"userHeaderActiveIndex",void 0),Object(C["a"])([Object(k["e"])("$route")],ye.prototype,"onRouteChanged",null),Object(C["a"])([Object(k["e"])("userHeaderActiveIndex")],ye.prototype,"onUserHeaderActiveIndexChanged",null),ye=Object(C["a"])([Object(k["a"])({components:{asideMenu:ve,layoutHeader:ie,layoutMain:ue}})],ye);var Ce=ye,ke=Ce,De=(a("56d6"),Object(c["a"])(ke,S,j,!1,null,null,null)),we=De.exports,_e=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"CRMReminder"},[e._v(" crm提醒 ")])},Ie=[],Le=function(e){Object(b["a"])(a,e);var t=Object(y["a"])(a);function a(){return Object(f["a"])(this,a),t.apply(this,arguments)}return a}(k["d"]);Le=Object(C["a"])([Object(k["a"])({})],Le);var Te=Le,Oe=Te,xe=(a("60ba"),Object(c["a"])(Oe,_e,Ie,!1,null,"11810b0a",null)),Se=xe.exports,je=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"CRMAgent"},[e._v(" crm待办 ")])},Ee=[],Ne=function(e){Object(b["a"])(a,e);var t=Object(y["a"])(a);function a(){return Object(f["a"])(this,a),t.apply(this,arguments)}return a}(k["d"]);Ne=Object(C["a"])([Object(k["a"])({})],Ne);var Re=Ne,Ue=Re,Pe=(a("f0f7"),Object(c["a"])(Ue,je,Ee,!1,null,"0f82ac9a",null)),Ae=Pe.exports,$e=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return{path:"/taskApproval",name:"taskApproval",component:we,redirect:{name:"crmReminder"},meta:Object(x["a"])({requireAuth:!0},e)}},Ve=[Object(x["a"])(Object(x["a"])({},$e({keepAlive:!0})),{},{children:[{path:"crmReminder",name:"crmReminder",component:Se,meta:{requireAuth:!0}},{path:"crmAgent",name:"crmAgent",component:Ae,meta:{requireAuth:!0}}]})],Me=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"crmHome"},[e._v(" CRM首页 ")])},Fe=[],ze=function(e){Object(b["a"])(a,e);var t=Object(y["a"])(a);function a(){return Object(f["a"])(this,a),t.apply(this,arguments)}return a}(k["d"]);ze=Object(C["a"])([Object(k["a"])({})],ze);var He=ze,Ke=He,Be=(a("91f6"),Object(c["a"])(Ke,Me,Fe,!1,null,"3eff9ba1",null)),qe=Be.exports,We=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"crmReportingPlan"},[e._v(" CRM汇报与计划 ")])},Je=[],Ye=function(e){Object(b["a"])(a,e);var t=Object(y["a"])(a);function a(){return Object(f["a"])(this,a),t.apply(this,arguments)}return a}(k["d"]);Ye=Object(C["a"])([Object(k["a"])({})],Ye);var Ge=Ye,Xe=Ge,Qe=(a("f944"),Object(c["a"])(Xe,We,Je,!1,null,"3efc6ce6",null)),Ze=Qe.exports,et=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"crmCustomerBasic"},[e._v(" crm客户基础信息维护 ")])},tt=[],at=function(e){Object(b["a"])(a,e);var t=Object(y["a"])(a);function a(){return Object(f["a"])(this,a),t.apply(this,arguments)}return a}(k["d"]);at=Object(C["a"])([Object(k["a"])({})],at);var it=at,st=it,nt=(a("d839"),Object(c["a"])(st,et,tt,!1,null,"7093b879",null)),rt=nt.exports,ot=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"crmCustomerFollow"},[e._v(" CRM客情随访日志 ")])},lt=[],ct=function(e){Object(b["a"])(a,e);var t=Object(y["a"])(a);function a(){return Object(f["a"])(this,a),t.apply(this,arguments)}return a}(k["d"]);ct=Object(C["a"])([Object(k["a"])({})],ct);var ut=ct,dt=ut,pt=(a("5611"),Object(c["a"])(dt,ot,lt,!1,null,"d230713e",null)),ht=pt.exports,mt=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"crmSchedule"},[e._v(" CRM日程 ")])},gt=[],ft=function(e){Object(b["a"])(a,e);var t=Object(y["a"])(a);function a(){return Object(f["a"])(this,a),t.apply(this,arguments)}return a}(k["d"]);ft=Object(C["a"])([Object(k["a"])({})],ft);var vt=ft,bt=vt,yt=(a("a800"),Object(c["a"])(bt,mt,gt,!1,null,"2723d341",null)),Ct=yt.exports,kt=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"crmWeekly"},[e._v(" CRM周报 ")])},Dt=[],wt=function(e){Object(b["a"])(a,e);var t=Object(y["a"])(a);function a(){return Object(f["a"])(this,a),t.apply(this,arguments)}return a}(k["d"]);wt=Object(C["a"])([Object(k["a"])({})],wt);var _t=wt,It=_t,Lt=(a("0c75"),Object(c["a"])(It,kt,Dt,!1,null,"d56ede3e",null)),Tt=Lt.exports,Ot=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"crmCustomerUnit"},[e._v(" CRM客户单位查询维护 ")])},xt=[],St=function(e){Object(b["a"])(a,e);var t=Object(y["a"])(a);function a(){return Object(f["a"])(this,a),t.apply(this,arguments)}return a}(k["d"]);St=Object(C["a"])([Object(k["a"])({})],St);var jt=St,Et=jt,Nt=(a("fa21"),Object(c["a"])(Et,Ot,xt,!1,null,"bb6f6bfe",null)),Rt=Nt.exports,Ut=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"crmCustomerPersonnel"},[e._v(" CRM客户单位人员查询维护 ")])},Pt=[],At=function(e){Object(b["a"])(a,e);var t=Object(y["a"])(a);function a(){return Object(f["a"])(this,a),t.apply(this,arguments)}return a}(k["d"]);At=Object(C["a"])([Object(k["a"])({})],At);var $t=At,Vt=$t,Mt=(a("64e4"),Object(c["a"])(Vt,Ut,Pt,!1,null,"19b60cb4",null)),Ft=Mt.exports,zt=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"crmCustomerNonSystem"},[e._v(" CRM非系统客户关系维护 ")])},Ht=[],Kt=function(e){Object(b["a"])(a,e);var t=Object(y["a"])(a);function a(){return Object(f["a"])(this,a),t.apply(this,arguments)}return a}(k["d"]);Kt=Object(C["a"])([Object(k["a"])({})],Kt);var Bt=Kt,qt=Bt,Wt=(a("a07a"),Object(c["a"])(qt,zt,Ht,!1,null,"6d54edfb",null)),Jt=Wt.exports,Yt=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"crmGovernmentAssociation"},[e._v(" CRM政府/协会类事务维护 ")])},Gt=[],Xt=function(e){Object(b["a"])(a,e);var t=Object(y["a"])(a);function a(){return Object(f["a"])(this,a),t.apply(this,arguments)}return a}(k["d"]);Xt=Object(C["a"])([Object(k["a"])({})],Xt);var Qt=Xt,Zt=Qt,ea=(a("995e"),Object(c["a"])(Zt,Yt,Gt,!1,null,"e7c77e3a",null)),ta=ea.exports,aa=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"crmRedShield"},[e._v(" CRM红盾行动 ")])},ia=[],sa=function(e){Object(b["a"])(a,e);var t=Object(y["a"])(a);function a(){return Object(f["a"])(this,a),t.apply(this,arguments)}return a}(k["d"]);sa=Object(C["a"])([Object(k["a"])({})],sa);var na=sa,ra=na,oa=(a("b2f4"),Object(c["a"])(ra,aa,ia,!1,null,"28a414fb",null)),la=oa.exports,ca=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return{path:"/crm",name:"crm",component:we,redirect:{name:"crmHome"},meta:Object(x["a"])({requireAuth:!0},e)}},ua=[Object(x["a"])(Object(x["a"])({},ca({})),{},{children:[{path:"crmHome",name:"crmHome",component:qe,meta:{requireAuth:!0}},{path:"reportingPlan",name:"reportingPlan",component:Ze,meta:{requireAuth:!0}},{path:"customerBasic",name:"customerBasic",component:rt,meta:{requireAuth:!0}},{path:"customerFollow",name:"customerFollow",component:ht,meta:{requireAuth:!0}},{path:"schedule",name:"schedule",component:Ct,meta:{requireAuth:!0}},{path:"weekly",name:"weekly",component:Tt,meta:{requireAuth:!0}},{path:"customerUnit",name:"customerUnit",component:Rt,meta:{requireAuth:!0}},{path:"customerPersonnel",name:"customerPersonnel",component:Ft,meta:{requireAuth:!0}},{path:"customerNonSystem",name:"customerNonSystem",component:Jt,meta:{requireAuth:!0}},{path:"governmentAssociation",name:"governmentAssociation",component:ta,meta:{requireAuth:!0}},{path:"redShield",name:"redShield",component:la,meta:{requireAuth:!0}}]})],da=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"layoutAdmin"},[a("el-container",{staticClass:"mainContainer"},[a("el-header",[a("layout-header",{attrs:{moduleName:e.moduleName}})],1),a("el-container",[a("el-aside",{attrs:{width:e.asideWidth}},[a("el-menu",{staticClass:"el-menu-vertical-demo",attrs:{"default-active":e.adminActive,router:"","text-color":"#333","active-text-color":"#333",collapse:e.isCollapse,"unique-opened":!0}},[a("aside-menu",{attrs:{menuList:e.adminMenuList}},[a("div",{staticClass:"isCollapseWarp",style:{width:e.asideWidth}},[a("i",{staticClass:"right",class:e.isCollapse?"el-icon-s-unfold":"el-icon-s-fold",on:{click:e.isCollapseClick}})])])],1)],1),a("el-main",[a("layout-main")],1)],1)],1)],1)},pa=[],ha=function(e){Object(b["a"])(a,e);var t=Object(y["a"])(a);function a(){var e;return Object(f["a"])(this,a),e=t.apply(this,arguments),e.moduleName="admin",e.adminActive="/admin/adminHome",e.adminMenuList=[],e.asideWidth="220px",e.isCollapse=!1,e}return Object(v["a"])(a,[{key:"isCollapseClick",value:function(){this.isCollapse=!this.isCollapse,this.isCollapse?this.asideWidth="65px":this.asideWidth="220px"}},{key:"_getMenuList",value:function(){var e=localStorage.getItem("adminMenu");e&&(this.adminMenuList=JSON.parse(e).children),this.setHeaderActive()}},{key:"setHeaderActive",value:function(){var e=this.$route.name,t=this.$route.path;if(e&&t.length-1!==e.length){var a=t.substring(0,t.length-e.length-1);a}else t}},{key:"mounted",value:function(){this.adminActive=this.$route.path,this._getMenuList(),U("admin")}},{key:"onRouteChanged",value:function(e){this.adminActive=e.path,this.setHeaderActive()}}]),a}(k["d"]);Object(C["a"])([Object(k["e"])("$route")],ha.prototype,"onRouteChanged",null),ha=Object(C["a"])([Object(k["a"])({components:{asideMenu:ve,layoutHeader:ie,layoutMain:ue}})],ha);var ma=ha,ga=ma,fa=(a("b523"),Object(c["a"])(ga,da,pa,!1,null,null,null)),va=fa.exports,ba=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"home"},[e._v("admin首页")])},ya=[],Ca=function(e){Object(b["a"])(a,e);var t=Object(y["a"])(a);function a(){return Object(f["a"])(this,a),t.apply(this,arguments)}return a}(k["d"]);Ca=Object(C["a"])([Object(k["a"])({})],Ca);var ka=Ca,Da=ka,wa=(a("1664"),Object(c["a"])(Da,ba,ya,!1,null,"43d12cca",null)),_a=wa.exports,Ia=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"admin accredit-menu"},[a("header",[a("container-header",{attrs:{title:e.title,placeholder:e.placeholder,activeTextColor:e.activeTextColor,seachPlace:e.seachPlace},on:{seachValueBtn:e.seachValueBtn}})],1),a("a-card",{attrs:{bordered:!1}},[a("a-tabs",{on:{change:e.onTabChange},model:{value:e.type,callback:function(t){e.type=t},expression:"type"}},e._l(e.plantformTypeList,(function(e){return a("a-tab-pane",{key:e.DIC_SELECT_ID,attrs:{tab:e.DIC_SELECT_NAME}})})),1),a("div",{staticClass:"table-operator"},[a("a-button",{attrs:{type:"primary",icon:"plus"},on:{click:function(t){return e.handleEdit(0)}}},[e._v("新增根菜单")])],1),a("div",[a("a-table",{attrs:{bordered:"",rowKey:"pmsId",columns:e.columns,size:"middle",pagination:!1,dataSource:e.dataSource,locale:e.locale,loading:e.loading,expandedRowKeys:e.expandedRowKeys},on:{expandedRowsChange:e.handleExpandedRowsChange},scopedSlots:e._u([{key:"action",fn:function(t,i){return a("span",{},[a("a",{on:{click:function(t){return e.handleEdit(2,i)}}},[e._v("编辑")]),a("a-divider",{attrs:{type:"vertical"}}),a("a-dropdown",[a("a",{staticClass:"ant-dropdown-link"},[e._v(" 更多 "),a("a-icon",{attrs:{type:"down"}})],1),a("a-menu",{attrs:{slot:"overlay"},slot:"overlay"},[a("a-menu-item",[a("a",{attrs:{href:"javascript:;"},on:{click:function(t){return e.handleEdit(3,i)}}},[e._v("详情")])]),a("a-menu-item",[a("a",{directives:[{name:"show",rawName:"v-show",value:2===i.pmsType||3===i.pmsType,expression:"record.pmsType === 2 || record.pmsType === 3"}],attrs:{href:"javascript:;"},on:{click:function(t){return e.handleEdit(1,i)}}},[e._v("添加下级")])]),a("a-menu-item",[a("a-popconfirm",{attrs:{title:"确定删除吗?"},on:{confirm:function(){return e.handleDelete(i.pmsId)}}},[a("a",[e._v("删除")])])],1)],1)],1)],1)}}])})],1),a("permission-modal",{ref:"modalForm",on:{ok:e.modalFormOk}})],1)],1)},La=[],Ta=(a("c975"),function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"containerHeader"},[e.title&&e.title.content?a("div",{staticClass:"title left"},[a("i",{class:"adminColor"===e.titleStyle?e.title.iconfont+" adminColor":e.title.iconfont+" crmColor"}),a("span",{staticClass:"content fontWeight"},[e._v(" "+e._s(e.title.content)+" ")])]):e._e(),a("div",{directives:[{name:"show",rawName:"v-show",value:e.menubarList&&e.menubarList.length>0,expression:"menubarList && menubarList.length > 0"}],staticClass:"menubar left"},[a("menu-bar",{attrs:{menubarActiveIndex:e.menubarActiveIndex,activeTextColor:e.activeTextColor,menubarList:e.menubarList},on:{menuSelect:e.cHeaderMenuSelect}})],1),a("div",{directives:[{name:"show",rawName:"v-show",value:e.seachNeed,expression:"seachNeed"}],staticClass:"search",class:"center"===e.seachPlace?"center":"right"},[a("el-input",{attrs:{type:"text",placeholder:e.placeholder,size:"small",clearable:""},on:{clear:e.clearValue},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.seachValueBtn(t)}},model:{value:e.seachValue,callback:function(t){e.seachValue="string"===typeof t?t.trim():t},expression:"seachValue"}},[a("el-button",{attrs:{slot:"append",icon:"el-icon-search"},on:{click:e.seachValueBtn},slot:"append"})],1)],1)])}),Oa=[],xa=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{directives:[{name:"show",rawName:"v-show",value:e.menubarList&&e.menubarList.length>0,expression:"menubarList && menubarList.length > 0"}],staticClass:"menubarWarp"},[a("el-menu",{staticClass:"el-menu-demo",class:"vertical"===e.mode?"vertical":"",attrs:{"default-active":e.menubarActiveIndex,"text-color":"#5c6075","background-color":e.backgroundColor,"active-text-color":e.activeTextColor,mode:e.mode},on:{select:e.menuSelect}},e._l(e.menubarList,(function(t,i){return a("el-menu-item",{key:i,attrs:{index:String(i)}},[a("template",{slot:"title"},[a("span",[e._v(e._s(t.label?t.label:t))])])],2)})),1)],1)},Sa=[],ja=function(e){Object(b["a"])(a,e);var t=Object(y["a"])(a);function a(){return Object(f["a"])(this,a),t.apply(this,arguments)}return Object(v["a"])(a,[{key:"menuSelect",value:function(e){this.$emit("menuSelect",e)}}]),a}(k["d"]);Object(C["a"])([Object(k["c"])()],ja.prototype,"menubarList",void 0),Object(C["a"])([Object(k["c"])({type:String,default:"0"})],ja.prototype,"menubarActiveIndex",void 0),Object(C["a"])([Object(k["c"])({type:String,default:"#2362fb"})],ja.prototype,"activeTextColor",void 0),Object(C["a"])([Object(k["c"])({type:String,default:"horizontal"})],ja.prototype,"mode",void 0),Object(C["a"])([Object(k["c"])({type:String,default:"#e9eef3"})],ja.prototype,"backgroundColor",void 0),ja=Object(C["a"])([Object(k["a"])({})],ja);var Ea=ja,Na=Ea,Ra=(a("1e05"),Object(c["a"])(Na,xa,Sa,!1,null,"c95f1f36",null)),Ua=Ra.exports,Pa=function(e){Object(b["a"])(a,e);var t=Object(y["a"])(a);function a(){var e;return Object(f["a"])(this,a),e=t.apply(this,arguments),e.seachValue="",e}return Object(v["a"])(a,[{key:"seachValueBtn",value:function(){this.$emit("seachValueBtn",this.seachValue)}},{key:"clearValue",value:function(){this.$emit("clearValue")}},{key:"cHeaderMenuSelect",value:function(e){this.$emit("cHeaderMenuSelect",e)}}]),a}(k["d"]);Object(C["a"])([Object(k["c"])()],Pa.prototype,"title",void 0),Object(C["a"])([Object(k["c"])()],Pa.prototype,"menubarList",void 0),Object(C["a"])([Object(k["c"])()],Pa.prototype,"placeholder",void 0),Object(C["a"])([Object(k["c"])({type:String,default:"adminColor"})],Pa.prototype,"titleStyle",void 0),Object(C["a"])([Object(k["c"])({type:String,default:"right"})],Pa.prototype,"seachPlace",void 0),Object(C["a"])([Object(k["c"])({type:String,default:"0"})],Pa.prototype,"menubarActiveIndex",void 0),Object(C["a"])([Object(k["c"])({type:String,default:"#2362fb"})],Pa.prototype,"activeTextColor",void 0),Object(C["a"])([Object(k["c"])({type:Boolean,default:!0})],Pa.prototype,"seachNeed",void 0),Pa=Object(C["a"])([Object(k["a"])({components:{menuBar:Ua}})],Pa);var Aa=Pa,$a=Aa,Va=(a("4b8e"),Object(c["a"])($a,Ta,Oa,!1,null,"10947bb0",null)),Ma=Va.exports,Fa=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("a-drawer",{attrs:{title:e.title,width:e.drawerWidth,visible:e.visible,confirmLoading:e.confirmLoading},on:{close:e.handleCancel}},[a("div",{style:{width:"100%",border:"1px solid #e9e9e9",padding:"10px 16px",background:"#fff"}},[a("a-spin",{attrs:{spinning:e.confirmLoading}},[a("a-form",{attrs:{form:e.form}},[a("a-form-item",{attrs:{label:"菜单类型",labelCol:e.labelCol,wrapperCol:e.wrapperCol}},[a("a-radio-group",{attrs:{disabled:e.disableSubmit},model:{value:e.pmsType,callback:function(t){e.pmsType=t},expression:"pmsType"}},[a("a-radio",{attrs:{value:2}},[e._v("目录")]),a("a-radio",{attrs:{value:3}},[e._v("菜单")]),a("a-radio",{attrs:{value:4}},[e._v("按钮")]),a("a-radio",{attrs:{value:1}},[e._v("数据权限")])],1)],1),a("a-form-item",{attrs:{label:"名称",labelCol:e.labelCol,wrapperCol:e.wrapperCol,hasFeedback:""}},[a("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["pmsName",e.validatorRules.pmsName],expression:"['pmsName', validatorRules.pmsName]"}],attrs:{placeholder:"请输入名称",readOnly:e.disableSubmit}})],1),e.parentName?a("a-form-item",{attrs:{label:"上级菜单",labelCol:e.labelCol,wrapperCol:e.wrapperCol,"validate-status":e.validateStatus,hasFeedback:!0,required:!0}},[a("span",{attrs:{slot:"help"},slot:"help"},[e._v(e._s("error"==e.validateStatus?"请选择上级菜单":" "))]),a("a-tree-select",{staticStyle:{width:"100%"},attrs:{dropdownStyle:{maxHeight:"200px",overflow:"auto"},treeData:e.treeData,placeholder:"请选择父级菜单",disabled:e.disableSubmit},on:{change:e.handleParentIdChange},model:{value:e.parentId,callback:function(t){e.parentId=t},expression:"parentId"}})],1):e._e(),a("a-form-item",{attrs:{label:"英文名称",labelCol:e.labelCol,wrapperCol:e.wrapperCol,hasFeedback:""}},[a("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["keyword",e.validatorRules.keyword],expression:"['keyword', validatorRules.keyword]"}],attrs:{placeholder:"请输入英文名称",readOnly:e.disableSubmit}})],1),a("a-form-item",{attrs:{labelCol:e.labelCol,wrapperCol:e.wrapperCol,label:"菜单路径"}},[a("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["path",e.validatorRules.path],expression:"['path', validatorRules.path]"}],attrs:{placeholder:"请输入菜单路径",readOnly:e.disableSubmit}})],1),a("a-form-item",{attrs:{labelCol:e.labelCol,wrapperCol:e.wrapperCol,label:"图标"}},[a("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["icon",e.validatorRules.icon],expression:"['icon', validatorRules.icon]"}],attrs:{placeholder:"请输入图标",readOnly:e.disableSubmit}})],1),a("a-form-item",{attrs:{label:"描述",labelCol:e.labelCol,wrapperCol:e.wrapperCol}},[a("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["pmsDescription",e.validatorRules.pmsDescription],expression:"['pmsDescription', validatorRules.pmsDescription]"}],attrs:{placeholder:"请输入描述",readOnly:e.disableSubmit}})],1),a("a-form-item",{attrs:{labelCol:e.labelCol,wrapperCol:e.wrapperCol,label:"排序"}},[a("a-input-number",{directives:[{name:"decorator",rawName:"v-decorator",value:["orderNum",e.validatorRules.orderNum],expression:"['orderNum', validatorRules.orderNum]"}],staticStyle:{width:"200px"},attrs:{placeholder:"请输入排序",disabled:e.disableSubmit}})],1)],1)],1),a("a-row",{style:{textAlign:"right"}},[a("a-button",{style:{marginRight:"8px"},on:{click:e.handleCancel}},[e._v("关闭")]),a("a-button",{attrs:{disabled:e.disableSubmit,type:"primary"},on:{click:e.handleOk}},[e._v("确定")])],1)],1)])},za=[];a("b64b");function Ha(e,t){return Ka.apply(this,arguments)}function Ka(){return Ka=Object(R["a"])(regeneratorRuntime.mark((function e(t,a){var i;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,z({url:B+t,method:"post",data:a});case 2:return i=e.sent,e.abrupt("return",i.data);case 4:case"end":return e.stop()}}),e)}))),Ka.apply(this,arguments)}function Ba(e,t){return qa.apply(this,arguments)}function qa(){return qa=Object(R["a"])(regeneratorRuntime.mark((function e(t,a){var i,s;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return i=new FormData,Object.keys(a).forEach((function(e){i.append(e,a[e]||"")})),e.next=4,z({url:B+t,method:"post",data:i});case 4:return s=e.sent,e.abrupt("return",s.data);case 6:case"end":return e.stop()}}),e)}))),qa.apply(this,arguments)}function Wa(e){return Ja.apply(this,arguments)}function Ja(){return Ja=Object(R["a"])(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,Ba("/api/pms/getPmsTree",t);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)}))),Ja.apply(this,arguments)}function Ya(e){return Ga.apply(this,arguments)}function Ga(){return Ga=Object(R["a"])(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,Ba("/api/pms/create",t);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)}))),Ga.apply(this,arguments)}function Xa(e){return Qa.apply(this,arguments)}function Qa(){return Qa=Object(R["a"])(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,Ba("/api/pms/update",t);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)}))),Qa.apply(this,arguments)}function Za(e){return ei.apply(this,arguments)}function ei(){return ei=Object(R["a"])(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,Ba("/api/pms/deleteById",t);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)}))),ei.apply(this,arguments)}function ti(e){return ai.apply(this,arguments)}function ai(){return ai=Object(R["a"])(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,Ba("/api/role/getRoles",t);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)}))),ai.apply(this,arguments)}function ii(e){return si.apply(this,arguments)}function si(){return si=Object(R["a"])(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,Ba("/api/role/getRoleInfo",t);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)}))),si.apply(this,arguments)}function ni(e){return ri.apply(this,arguments)}function ri(){return ri=Object(R["a"])(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,Ha("/api/role/createRole",t);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)}))),ri.apply(this,arguments)}function oi(e){return li.apply(this,arguments)}function li(){return li=Object(R["a"])(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,Ha("/api/role/updateRole",t);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)}))),li.apply(this,arguments)}function ci(e){return ui.apply(this,arguments)}function ui(){return ui=Object(R["a"])(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,Ba("/api/role/delete",t);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)}))),ui.apply(this,arguments)}var di={xs:{span:24},sm:{span:5}},pi={xs:{span:24},sm:{span:16}},hi=function(e){Object(b["a"])(a,e);var t=Object(y["a"])(a);function a(){var e;return Object(f["a"])(this,a),e=t.apply(this,arguments),e.drawerWidth=700,e.title="操作",e.pmsId=-1,e.treeData=[],e.validateStatus="",e.parentId=-1,e.parentName="",e.plantformType=-1,e.isCreate=!1,e.disableSubmit=!1,e.visible=!1,e.pmsType=-1,e.labelCol=di,e.wrapperCol=pi,e.confirmLoading=!1,e}return Object(v["a"])(a,[{key:"created",value:function(){this.form=this.$form.createForm(this)}},{key:"resetScreenSize",value:function(){var e=document.body.clientWidth;this.drawerWidth=e<500?e:700}},{key:"loadTree",value:function(){var e=Object(R["a"])(regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,Wa({plantformType:this.plantformType});case 2:t=e.sent,t.success&&(this.treeData=t.data||[],this.setName(this.treeData));case 4:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},{key:"setName",value:function(e){var t=this;e.forEach((function(e){e.key=e.pmsId,e.title=e.pmsName,e.value=e.pmsId,e.pmsName===t.form.getFieldValue("pmsName")&&(e.disabled=!0),e.children&&t.setName(e.children)}))}},{key:"edit",value:function(e){var t=this;if(this.resetScreenSize(),this.form.resetFields(),this.visible=!0,this.parentId=e.parentId,this.parentName=e.parentName,e&&e.pmsId){var a=e.pmsName,i=e.keyword,s=e.path,n=e.icon,r=e.pmsDescription,o=e.orderNum;this.$nextTick((function(){t.form.setFieldsValue({pmsName:a,keyword:i,path:s,icon:n,pmsDescription:r,orderNum:o}),t.pmsId=e.pmsId}))}this.loadTree()}},{key:"close",value:function(){this.$emit("close"),this.disableSubmit=!1,this.visible=!1}},{key:"handleCancel",value:function(){this.close()}},{key:"handleParentIdChange",value:function(e){this.validateStatus=e?"success":"error"}},{key:"handleOk",value:function(){var e=this;this.form.validateFields(function(){var t=Object(R["a"])(regeneratorRuntime.mark((function t(a,i){var s,n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(a){t.next=28;break}if(s=Object.assign({},i),e.pmsId&&-1!==e.pmsId&&(s.pmsId=e.pmsId),s.parentId=e.parentId,s.parentName=e.parentName,s.pmsType=e.pmsType,s.plantformType=e.plantformType,-1!==s.parentId){t.next=13;break}return e.validateStatus="error",e.$message.error("请检查你填的类型以及信息是否正确！"),t.abrupt("return");case 13:e.validateStatus="success";case 14:if(e.confirmLoading=!0,!e.pmsId||e.isCreate){t.next=21;break}return t.next=18,Xa(s);case 18:t.t0=t.sent,t.next=24;break;case 21:return t.next=23,Ya(s);case 23:t.t0=t.sent;case 24:n=t.t0,e.confirmLoading=!1,n.success?(e.$emit("ok"),e.$message.success("菜单更新成功")):e.$message.warning(n.msg||"更新失败"),e.close();case 28:case"end":return t.stop()}}),t)})));return function(e,a){return t.apply(this,arguments)}}())}},{key:"validatorRules",get:function(){return{pmsName:{rules:[{required:!0,message:"请输入菜单名称!"}]},keyword:{rules:[{required:!0,message:"请输入菜单英文名称!"}]},path:{rules:[{required:!1,message:"请输入菜单路径!"}]},icon:{rules:[{required:!1,message:"请输入菜单图标!"}]},pmsDescription:{rules:[{required:!1,message:"请输入菜单描述!"}]},orderNum:{initialValue:1}}}}]),a}(k["d"]);hi=Object(C["a"])([k["a"]],hi);var mi=hi,gi=mi,fi=Object(c["a"])(gi,Fa,za,!1,null,"b67fda90",null),vi=fi.exports,bi=function(){var e=Object(R["a"])(regeneratorRuntime.mark((function e(t){var a,i;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return a=q+"/api/dictionary/insDictionaries",i=null,e.prev=2,e.next=5,z.post(a,t);case 5:if(i=e.sent,200!==i.status){e.next=8;break}return e.abrupt("return",Promise.resolve(i.data));case 8:e.next=13;break;case 10:e.prev=10,e.t0=e["catch"](2);case 13:return e.abrupt("return",i);case 14:case"end":return e.stop()}}),e,null,[[2,10]])})));return function(t){return e.apply(this,arguments)}}(),yi=function(){var e=Object(R["a"])(regeneratorRuntime.mark((function e(t){var a,i;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return a=q+"/api/dictionary/getDictionaries",i=null,e.prev=2,e.next=5,z.post(a,t);case 5:if(i=e.sent,200!==i.status){e.next=8;break}return e.abrupt("return",Promise.resolve(i.data));case 8:e.next=13;break;case 10:e.prev=10,e.t0=e["catch"](2);case 13:return e.abrupt("return",i);case 14:case"end":return e.stop()}}),e,null,[[2,10]])})));return function(t){return e.apply(this,arguments)}}(),Ci=function(){var e=Object(R["a"])(regeneratorRuntime.mark((function e(t){var a,i;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return a=q+"/api/dictionary/dltDictionaries",i=null,e.prev=2,e.next=5,z.post(a,t);case 5:if(i=e.sent,200!==i.status){e.next=8;break}return e.abrupt("return",Promise.resolve(i.data));case 8:e.next=13;break;case 10:e.prev=10,e.t0=e["catch"](2);case 13:return e.abrupt("return",i);case 14:case"end":return e.stop()}}),e,null,[[2,10]])})));return function(t){return e.apply(this,arguments)}}(),ki=["","数据权限","目录","菜单","按钮"],Di=function(e){Object(b["a"])(a,e);var t=Object(y["a"])(a);function a(){var e;return Object(f["a"])(this,a),e=t.apply(this,arguments),e.title={iconfont:"iconfont ytcrm-caidanguanli",content:"菜单管理"},e.placeholder="关键字",e.activeTextColor="#fc923f",e.seachPlace="center",e.plantformTypeList=[],e.type="",e.searchValue="",e.loading=!1,e.dataSource=[],e.locale={emptyText:"暂无数据"},e.expandedRowKeys=[],e.selectedRowKeys=[],e.selectionRows=[],e.columns=[{title:"菜单名称",align:"left",dataIndex:"pmsName",key:"pmsName"},{title:"菜单英文名",align:"center",dataIndex:"keyword",key:"keyword"},{title:"菜单类型",align:"center",dataIndex:"pmsType",key:"pmsType",customRender:function(e){return ki[+e]}},{title:"icon",align:"center",dataIndex:"icon",key:"icon"},{title:"路径",align:"center",dataIndex:"path",key:"path"},{title:"排序",align:"center",dataIndex:"orderNum",key:"orderNum"},{title:"操作",dataIndex:"action",scopedSlots:{customRender:"action"},align:"center",width:150}],e}return Object(v["a"])(a,[{key:"created",value:function(){this.getPlatformTypes()}},{key:"getPlatformTypes",value:function(){var e=Object(R["a"])(regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,yi({pageNum:1,pageSize:20,typeId:8});case 2:t=e.sent,this.plantformTypeList=t.data.list,this.type=this.plantformTypeList[0].DIC_SELECT_ID,this.getMenuList();case 6:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},{key:"onTabChange",value:function(){this.searchValue="",this.getMenuList()}},{key:"searchQuery",value:function(){var e=this,t=[];this.dataSource.forEach((function(a){-1!==a.pmsName.indexOf(e.searchValue)?t.push(a):a.children&&a.children.forEach((function(a){-1!==a.pmsName.indexOf(e.searchValue)?t.push(a):a.children&&a.children.forEach((function(a){-1!==a.pmsName.indexOf(e.searchValue)&&t.push(a)}))}))})),this.dataSource=t}},{key:"seachValueBtn",value:function(e){this.searchValue=e,this.getMenuList()}},{key:"searchReset",value:function(){this.searchValue="",this.getMenuList()}},{key:"onClearSelected",value:function(){this.selectedRowKeys=[],this.selectionRows=[]}},{key:"onSelectChange",value:function(e,t){this.selectedRowKeys=e,this.selectionRows=t}},{key:"handleExpandedRowsChange",value:function(e){this.expandedRowKeys=e}},{key:"handleEdit",value:function(e,t){var a=this.$refs.modalForm,i=["新增根目录","添加下级菜单","编辑","详情"];a.title=i[e],a.pmsType=0===e?2:1===e?2===+t.pmsType?3:4:t.pmsType,a.plantformType=this.type,a.disableSubmit=3===e,a.isCreate=0===e||1===e,0===e?a.edit({parentId:0}):1===e?a.edit({parentId:t.pmsId,parentName:t.pmsName}):a.edit(t)}},{key:"batchDel",value:function(){var e=this;if(this.selectedRowKeys.length<=0)return this.$message.warning("请选择一条记录！"),null;for(var t=0;t<this.selectedRowKeys.length;t++)this.selectedRowKeys[t]+",";this.$confirm("确认删除","是否删除选中数据?").then((function(){e.loading=!0;var t={};e.loading=!1,t.success?(e.$message.success(t.msg),e.getMenuList(),e.onClearSelected()):e.$message.warning(t.msg||"删除失败")}))}},{key:"handleDelete",value:function(){var e=Object(R["a"])(regeneratorRuntime.mark((function e(t){var a;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,Za({pmsId:t});case 2:a=e.sent,a.success?(this.getMenuList(),this.$message.success("删除成功")):this.$message.warning(a.msg||"删除失败");case 4:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}()},{key:"modalFormOk",value:function(){this.getMenuList()}},{key:"getMenuList",value:function(){var e=Object(R["a"])(regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return this.loading=!0,e.next=3,Wa({plantformType:this.type,pmsName:this.searchValue});case 3:t=e.sent,this.loading=!1,this.dataSource=t.data||[];case 6:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()}]),a}(k["d"]);Di=Object(C["a"])([Object(k["a"])({components:{containerHeader:Ma,PermissionModal:vi}})],Di);var wi=Di,_i=wi,Ii=(a("31ca"),Object(c["a"])(_i,Ia,La,!1,null,"34d5328c",null)),Li=Ii.exports,Ti=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"admin accredit-role"},[a("header",[a("container-header",{attrs:{title:e.title,seachNeed:!1,activeTextColor:e.activeTextColor}})],1),a("div",{staticClass:"accredit-role-main"},[a("div",{directives:[{name:"loading",rawName:"v-loading",value:e.roleLoading,expression:"roleLoading"}],staticClass:"accredit-role-main__left"},[a("div",{staticClass:"accredit-role-main__header"},[a("div",{staticClass:"accredit-role-main__header--content"},[a("a-select",{staticStyle:{width:"200px"},attrs:{placeholder:"选择角色类型"},on:{change:e.handleChange},model:{value:e.roleType,callback:function(t){e.roleType=t},expression:"roleType"}},e._l(e.roleTypeList,(function(t,i){return a("a-select-option",{key:i,attrs:{value:t.DIC_SELECT_ID}},[e._v(" "+e._s(t.DIC_SELECT_NAME)+" ")])})),1)],1),a("div",{staticClass:"accredit-role-main__header--btn"},[a("a-button",{attrs:{type:"link"},on:{click:function(t){return e.handleEdit(1)}}},[e._v("创建角色")])],1)]),e.dataSource.length?a("div",{staticClass:"role-list"},e._l(e.dataSource,(function(t,i){return a("div",{key:i,class:[t.roleId===e.roleModel.roleId?"role-item--active":"","role-item"],on:{click:function(a){return e.handlePerssion(t)}}},[a("div",{staticClass:"role-item__title"},[e._v(e._s(t.roleName))]),a("div",{staticClass:"role-item__btns"},[a("a-icon",{style:{color:"#fa8c16"},attrs:{type:"edit",title:"编辑"},on:{click:function(a){return a.stopPropagation(),e.handleEdit(2,t)}}}),a("a-popconfirm",{staticClass:"admin",attrs:{title:e.popTitle,cancelText:e.popCancelText},on:{confirm:function(){return e.handleDelete(t.roleId)}}},[a("a-icon",{style:{color:"#ff4d4f"},attrs:{type:"delete",title:"删除"},on:{click:function(e){e.stopPropagation()}}})],1)],1)])})),0):a("a-empty",{staticClass:"mt-100",attrs:{description:"该类型下无角色"}})],1),a("div",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],staticClass:"accredit-role-main__right"},[e._m(0),a("div",{staticClass:"accredit-role-main__center"},[a("a-tabs",{on:{change:e.loadData},model:{value:e.type,callback:function(t){e.type=t},expression:"type"}},e._l(e.plantformTypeList,(function(e){return a("a-tab-pane",{key:e.DIC_SELECT_ID,attrs:{tab:e.DIC_SELECT_NAME}})})),1),e.treeData.length?a("a-tree",{ref:"tree",attrs:{checkable:"",checkedKeys:e.checkedKeys,treeData:e.treeData,expandedKeys:e.expandedKeysss,checkStrictly:e.checkStrictly},on:{check:e.onCheck,expand:e.onExpand}}):a("a-empty",{staticClass:"mt-100",attrs:{description:"暂无数据"}})],1),a("div",{staticClass:"accredit-role-main__footer"},[a("a-dropdown",{staticClass:"accredit-role-main__footer--opts",attrs:{trigger:["click"],placement:"topCenter"}},[a("a-menu",{attrs:{slot:"overlay"},slot:"overlay"},[a("a-menu-item",{key:"1",on:{click:function(t){return e.switchCheckStrictly(1)}}},[e._v("父子关联")]),a("a-menu-item",{key:"2",on:{click:function(t){return e.switchCheckStrictly(2)}}},[e._v("取消关联")]),a("a-menu-item",{key:"3",on:{click:e.checkALL}},[e._v("全部勾选")]),a("a-menu-item",{key:"4",on:{click:e.cancelCheckALL}},[e._v("取消全选")]),a("a-menu-item",{key:"5",on:{click:e.expandAll}},[e._v("展开所有")]),a("a-menu-item",{key:"6",on:{click:e.closeAll}},[e._v("合并所有")])],1),a("a-button",[e._v(" 树操作 "),a("a-icon",{attrs:{type:"up"}})],1)],1),a("div",{staticClass:"accredit-role-main__footer--btn"},[a("a-button",{attrs:{type:"primary"},on:{click:e.saveAuth}},[e._v("保存")])],1)],1)])]),a("role-modal",{ref:"modalForm",on:{ok:e.getRoleList}})],1)},Oi=[function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"accredit-role-main__header"},[a("div",{staticClass:"accredit-role-main__header--content"},[e._v(" 模块功能 ")])])}],xi=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("a-modal",{staticClass:"admin",staticStyle:{top:"5%",height:"85%","overflow-y":"hidden"},attrs:{title:e.title,width:800,visible:e.visible,confirmLoading:e.confirmLoading,cancelText:"关闭",wrapClassName:"ant-modal-cust-warp"},on:{ok:e.handleOk,cancel:e.handleCancel}},[a("a-spin",{attrs:{spinning:e.confirmLoading}},[a("a-form",{attrs:{form:e.form}},[a("a-form-item",{attrs:{labelCol:e.labelCol,wrapperCol:e.wrapperCol,label:"角色名称"}},[a("a-input",{directives:[{name:"decorator",rawName:"v-decorator.trim",value:["roleName",e.validatorRules.roleName],expression:"[ 'roleName', validatorRules.roleName]",modifiers:{trim:!0}}],attrs:{placeholder:"请输入角色名称"}})],1),a("a-form-item",{attrs:{labelCol:e.labelCol,wrapperCol:e.wrapperCol,label:"英文名称"}},[a("a-input",{directives:[{name:"decorator",rawName:"v-decorator.trim",value:["roleKeyword",e.validatorRules.roleKeyword],expression:"[ 'roleKeyword', validatorRules.roleKeyword]",modifiers:{trim:!0}}],attrs:{placeholder:"请输入角色英文名称"}})],1),a("a-form-item",{attrs:{labelCol:e.labelCol,wrapperCol:e.wrapperCol,label:"角色描述"}},[a("a-input",{directives:[{name:"decorator",rawName:"v-decorator.trim",value:["roleDescription",e.validatorRules.roleDescription],expression:"[ 'roleDescription', validatorRules.roleDescription]",modifiers:{trim:!0}}],attrs:{placeholder:"请输入角色描述"}})],1)],1)],1)],1)},Si=[],ji=function(e){Object(b["a"])(a,e);var t=Object(y["a"])(a);function a(){var e;return Object(f["a"])(this,a),e=t.apply(this,arguments),e.title="操作",e.visible=!1,e.labelCol={xs:{span:24},sm:{span:5}},e.roleId=-1,e.roleType=-1,e.wrapperCol={xs:{span:24},sm:{span:16}},e.confirmLoading=!1,e}return Object(v["a"])(a,[{key:"created",value:function(){this.form=this.$form.createForm(this)}},{key:"handleCancel",value:function(){this.close()}},{key:"close",value:function(){this.visible=!1}},{key:"edit",value:function(e){var t=this;if(this.form.resetFields(),this.visible=!0,e&&e.roleId){var a=e.roleName,i=e.roleKeyword,s=e.roleDescription;this.$nextTick((function(){t.form.setFieldsValue({roleName:a,roleKeyword:i,roleDescription:s}),t.roleId=e.roleId}))}}},{key:"handleOk",value:function(){var e=this;this.form.validateFields(function(){var t=Object(R["a"])(regeneratorRuntime.mark((function t(a,i){var s,n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(a){t.next=17;break}if(e.confirmLoading=!0,s=Object.assign({},i),s.roleType=e.roleType,e.roleId&&-1!==e.roleId&&(s.roleId=e.roleId),!e.roleId||-1===e.roleId){t.next=11;break}return t.next=8,oi(s);case 8:t.t0=t.sent,t.next=14;break;case 11:return t.next=13,ni(s);case 13:t.t0=t.sent;case 14:n=t.t0,e.confirmLoading=!1,n.success?(e.$emit("ok"),e.close(),e.$message.success("更新成功")):e.$message.warning(n.msg||"更新失败");case 17:case"end":return t.stop()}}),t)})));return function(e,a){return t.apply(this,arguments)}}())}},{key:"validatorRules",get:function(){return{roleName:{rules:[{required:!0,message:"请输入角色名称!"}]},roleKeyword:{rules:[{required:!0,message:"请输入英文名称!"}]},roleDescription:{rules:[{required:!1,message:"请输入角色描述!"}]}}}}]),a}(k["d"]);ji=Object(C["a"])([k["a"]],ji);var Ei=ji,Ni=Ei,Ri=(a("dd6a"),Object(c["a"])(Ni,xi,Si,!1,null,"3f6daf9a",null)),Ui=Ri.exports,Pi=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("a-drawer",{staticStyle:{overflow:"auto","padding-bottom":"53px"},attrs:{title:e.title,maskClosable:!0,width:"650",placement:"right",closable:!0,visible:e.visible},on:{close:e.close}},[a("a-tabs",{on:{change:e.loadData},model:{value:e.type,callback:function(t){e.type=t},expression:"type"}},e._l(e.plantformTypeList,(function(e){return a("a-tab-pane",{key:e.DIC_SELECT_ID,attrs:{tab:e.DIC_SELECT_NAME}})})),1),a("a-form",[a("a-form-item",{attrs:{label:"所拥有的权限"}},[a("a-tree",{attrs:{checkable:"",checkedKeys:e.checkedKeys,treeData:e.treeData,expandedKeys:e.expandedKeysss,checkStrictly:e.checkStrictly},on:{check:e.onCheck,expand:e.onExpand,select:e.onCheck}})],1)],1),a("div",{staticClass:"drawer-bootom-button"},[a("a-dropdown",{staticStyle:{float:"left"},attrs:{trigger:["click"],placement:"topCenter"}},[a("a-menu",{attrs:{slot:"overlay"},slot:"overlay"},[a("a-menu-item",{key:"1",on:{click:function(t){return e.switchCheckStrictly(1)}}},[e._v("父子关联")]),a("a-menu-item",{key:"2",on:{click:function(t){return e.switchCheckStrictly(2)}}},[e._v("取消关联")]),a("a-menu-item",{key:"3",on:{click:e.checkALL}},[e._v("全部勾选")]),a("a-menu-item",{key:"4",on:{click:e.cancelCheckALL}},[e._v("取消全选")]),a("a-menu-item",{key:"5",on:{click:e.expandAll}},[e._v("展开所有")]),a("a-menu-item",{key:"6",on:{click:e.closeAll}},[e._v("合并所有")])],1),a("a-button",[e._v(" 树操作 "),a("a-icon",{attrs:{type:"up"}})],1)],1),a("a-popconfirm",{attrs:{title:"确定放弃编辑？",okText:"确定",cancelText:"取消"},on:{confirm:e.close}},[a("a-button",{staticStyle:{"margin-right":".8rem"}},[e._v("取消")])],1),a("a-button",{attrs:{type:"primary",loading:e.loading},on:{click:function(t){return e.handleSubmit(!0)}}},[e._v("保存并关闭")])],1)],1)},Ai=[],$i=function(e){Object(b["a"])(a,e);var t=Object(y["a"])(a);function a(){var e;return Object(f["a"])(this,a),e=t.apply(this,arguments),e.plantformTypeList=[],e.type="",e.roleId="",e.title="角色权限配置",e.model={},e.treeData=[],e.visible=!1,e.allTreeKeys=[],e.expandedKeysss=[],e.checkedKeys=[],e.defaultCheckedKeys=[],e.loading=!1,e.checkStrictly=!1,e.checkedKeysResult=[],e.roleTree=[],e.roleTreeLeaf=[],e}return Object(v["a"])(a,[{key:"created",value:function(){this.getPlatformTypes()}},{key:"getPlatformTypes",value:function(){var e=Object(R["a"])(regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,yi({pageNum:1,pageSize:20,typeId:8});case 2:t=e.sent,this.plantformTypeList=t.data.list,this.type=this.plantformTypeList[0].DIC_SELECT_ID;case 5:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},{key:"show",value:function(){var e=Object(R["a"])(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return this.roleId=t.roleId,this.model=t,this.visible=!0,e.next=5,this.loadData();case 5:return e.next=7,this.getRoleInfoById();case 7:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}()},{key:"getRoleInfoById",value:function(){var e=Object(R["a"])(regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,ii({roleId:this.roleId});case 2:t=e.sent,this.roleTree=[],this.roleTreeLeaf=[],this.getTreeIds(t.data.pmsTree),this.getTreeLeafIds(t.data.pmsTree),this.checkedKeysResult=Object(p["a"])(this.roleTree),this.checkedKeys=Object(p["a"])(this.roleTreeLeaf),this.defaultCheckedKeys=Object(p["a"])(this.roleTreeLeaf),this.expandedKeysss=this.allTreeKeys;case 11:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},{key:"getTreeIds",value:function(e){var t=this;e.forEach((function(e){t.roleTree.push(e.pmsId),e.children&&t.getTreeIds(e.children)}))}},{key:"getTreeLeafIds",value:function(e){var t=this;e.forEach((function(e){e.children?t.getTreeLeafIds(e.children):t.roleTreeLeaf.push(e.pmsId)}))}},{key:"reset",value:function(){this.expandedKeysss=[],this.checkedKeys=[],this.checkedKeysResult=[],this.defaultCheckedKeys=[],this.loading=!1}},{key:"close",value:function(){this.reset(),this.$emit("close"),this.visible=!1}},{key:"checkALL",value:function(){this.checkedKeys=this.allTreeKeys,this.checkedKeysResult=this.allTreeKeys}},{key:"cancelCheckALL",value:function(){this.checkedKeys=[],this.checkedKeysResult=[]}},{key:"expandAll",value:function(){this.expandedKeysss=this.allTreeKeys}},{key:"closeAll",value:function(){this.expandedKeysss=[]}},{key:"switchCheckStrictly",value:function(e){1===e?this.checkStrictly=!1:2===e&&(this.checkStrictly=!0)}},{key:"onCheck",value:function(e,t){this.checkStrictly?this.checkedKeys=e.checked:this.checkedKeys=e,this.checkedKeysResult=[].concat(Object(p["a"])(e),Object(p["a"])(t.halfCheckedKeys))}},{key:"onExpand",value:function(e){this.expandedKeysss=e}},{key:"handleSubmit",value:function(){var e=Object(R["a"])(regeneratorRuntime.mark((function e(){var t,a;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t={roleId:this.roleId,roleName:this.model.roleName,roleKeyword:this.model.roleKeyword,resList:this.checkedKeysResult},this.loading=!0,e.next=5,oi(t);case 5:a=e.sent,this.loading=!1,a.success?this.$message.success("更新成功"):this.$message.warning(a.msg||"更新失败"),this.close();case 9:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},{key:"loadData",value:function(){var e=Object(R["a"])(regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,Wa({plantformType:this.type});case 2:t=e.sent,this.treeData=t.data||[],this.allTreeKeys=[],this.setName(this.treeData);case 6:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},{key:"setName",value:function(e){var t=this;e.forEach((function(e){t.allTreeKeys.push(e.pmsId),e.key=e.pmsId,e.title=e.pmsName,e.children&&t.setName(e.children)}))}}]),a}(k["d"]);$i=Object(C["a"])([k["a"]],$i);var Vi=$i,Mi=Vi,Fi=(a("ef64"),Object(c["a"])(Mi,Pi,Ai,!1,null,"e2b69c06",null)),zi=Fi.exports,Hi=function(e){Object(b["a"])(a,e);var t=Object(y["a"])(a);function a(){var e;return Object(f["a"])(this,a),e=t.apply(this,arguments),e.title={iconfont:"iconfont ytcrm-jiaose1",content:"角色管理"},e.activeTextColor="#fc923f",e.popTitle="确定删除吗?",e.popCancelText="取消",e.plantformTypeList=[],e.type="",e.roleType="",e.roleTypeList=[],e.roleLoading=!1,e.loading=!1,e.dataSource=[],e.roleModel={},e.treeData=[],e.allTreeKeys=[],e.expandedKeysss=[],e.checkedKeys=[],e.defaultCheckedKeys=[],e.checkStrictly=!1,e.checkedKeysResult=[],e.roleTree=[],e.roleTreeLeaf=[],e}return Object(v["a"])(a,[{key:"created",value:function(){this.getRoleTypes()}},{key:"getRoleTypes",value:function(){var e=Object(R["a"])(regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,yi({pageNum:1,pageSize:20,typeId:6});case 2:t=e.sent,this.roleTypeList=t.data.list,this.roleType=this.roleTypeList[0].DIC_SELECT_ID,this.getRoleList();case 6:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},{key:"getPlatformTypes",value:function(){var e=Object(R["a"])(regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,yi({pageNum:1,pageSize:20,typeId:8});case 2:t=e.sent,this.plantformTypeList=t.data.list,this.type=this.plantformTypeList[0].DIC_SELECT_ID;case 5:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},{key:"handleChange",value:function(){this.getRoleList()}},{key:"handleEdit",value:function(e,t){var a=this.$refs.modalForm;a.title=2===e?"编辑":"新增",a.roleType=+this.roleType,a.edit(t)}},{key:"handleDelete",value:function(){var e=Object(R["a"])(regeneratorRuntime.mark((function e(t){var a;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,ci({roleId:t});case 2:a=e.sent,a.success?(this.getRoleList(),this.$message.success("删除成功")):this.$message.warning(a.msg||"删除失败");case 4:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}()},{key:"getRoleList",value:function(){var e=Object(R["a"])(regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return this.dataSource=[],this.roleLoading=!0,e.next=4,ti({roleType:this.roleType});case 4:return t=e.sent,this.roleLoading=!1,this.dataSource=t.data,e.next=9,this.getPlatformTypes();case 9:return e.next=11,this.handlePerssion(this.dataSource[0]);case 11:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},{key:"handlePerssion",value:function(){var e=Object(R["a"])(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return this.reset(),this.roleModel=t,e.next=4,this.loadData();case 4:if(!t||!t.roleId){e.next=7;break}return e.next=7,this.getRoleInfoById();case 7:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}()},{key:"loadData",value:function(){var e=Object(R["a"])(regeneratorRuntime.mark((function e(){var t,a=this;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return this.treeData=[],this.loading=!0,e.next=4,Wa({plantformType:this.type});case 4:t=e.sent,this.loading=!1,this.treeData=t.data||[],this.allTreeKeys=[],this.setName(this.treeData),setTimeout((function(){var e=a.$refs.tree;a.setTreeStyle(e)}),500);case 10:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},{key:"setTreeStyle",value:function(e){var t=this;e&&e.length&&e.forEach((function(e){e.title&&(e.label&&e.$el.querySelector("ul")&&(e.$el.querySelector("ul").style="display: flex",e.$el.querySelector("ul").querySelectorAll("li").forEach((function(e){e.style="padding: 8px 0 0 0"}))),e.$children.length&&t.setTreeStyle(e.$children))}))}},{key:"setName",value:function(e){var t=this;e.forEach((function(e){t.allTreeKeys.push(e.pmsId),e.key=e.pmsId,e.title=e.pmsName,e.label=3===e.pmsType,e.children&&t.setName(e.children)}))}},{key:"getRoleInfoById",value:function(){var e=Object(R["a"])(regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,ii({roleId:this.roleModel.roleId});case 2:t=e.sent,this.roleTree=[],this.roleTreeLeaf=[],this.getTreeIds(t.data.pmsTree),this.getTreeLeafIds(t.data.pmsTree),this.checkedKeysResult=Object(p["a"])(this.roleTree),this.checkedKeys=Object(p["a"])(this.roleTreeLeaf),this.defaultCheckedKeys=Object(p["a"])(this.roleTreeLeaf),this.expandedKeysss=this.allTreeKeys;case 11:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},{key:"getTreeIds",value:function(e){var t=this;e.forEach((function(e){t.roleTree.push(e.pmsId),e.children&&t.getTreeIds(e.children)}))}},{key:"getTreeLeafIds",value:function(e){var t=this;e.forEach((function(e){e.children?t.getTreeLeafIds(e.children):t.roleTreeLeaf.push(e.pmsId)}))}},{key:"reset",value:function(){this.treeData=[],this.expandedKeysss=[],this.checkedKeys=[],this.checkedKeysResult=[],this.defaultCheckedKeys=[],this.loading=!1}},{key:"checkALL",value:function(){this.checkedKeys=this.allTreeKeys,this.checkedKeysResult=this.allTreeKeys}},{key:"cancelCheckALL",value:function(){this.checkedKeys=[],this.checkedKeysResult=[]}},{key:"expandAll",value:function(){this.expandedKeysss=this.allTreeKeys}},{key:"closeAll",value:function(){this.expandedKeysss=[]}},{key:"switchCheckStrictly",value:function(e){1===e?this.checkStrictly=!1:2===e&&(this.checkStrictly=!0)}},{key:"onCheck",value:function(e,t){this.checkStrictly?this.checkedKeys=e.checked:this.checkedKeys=e,this.checkedKeysResult=[].concat(Object(p["a"])(e),Object(p["a"])(t.halfCheckedKeys))}},{key:"onExpand",value:function(e){this.expandedKeysss=e}},{key:"saveAuth",value:function(){var e=Object(R["a"])(regeneratorRuntime.mark((function e(){var t,a;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(this.roleModel&&this.roleModel.roleId){e.next=3;break}return this.$message.warning("请先选择一个角色"),e.abrupt("return");case 3:return t={roleId:this.roleModel.roleId,roleName:this.roleModel.roleName,roleKeyword:this.roleModel.roleKeyword,resList:this.checkedKeysResult},this.loading=!0,e.next=9,oi(t);case 9:a=e.sent,this.loading=!1,a.success?this.$message.success("更新成功"):this.$message.warning(a.msg||"更新失败");case 12:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()}]),a}(k["d"]);Hi=Object(C["a"])([Object(k["a"])({components:{containerHeader:Ma,RoleModal:Ui,AuthModal:zi}})],Hi);var Ki=Hi,Bi=Ki,qi=(a("d948"),Object(c["a"])(Bi,Ti,Oi,!1,null,"5e2b7b80",null)),Wi=qi.exports,Ji=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"departmentPerson"},[a("header",[a("container-header",{attrs:{title:e.title,placeholder:e.placeholder,activeTextColor:e.activeTextColor,seachPlace:e.seachPlace},on:{seachValueBtn:e.seachValueBtn}})],1),a("main",[a("div",{staticClass:"deptLeft left"},[a("div",{staticClass:"deptHeader clearfix"},[a("div",{staticClass:"deptSeach left"},[a("el-input",{attrs:{size:"small",placeholder:e.seachPlaceHolder,"prefix-icon":"el-icon-search",clearable:""},on:{clear:e.clearPersonDept,input:e.seachPersonDept},model:{value:e.seachDeptContent,callback:function(t){e.seachDeptContent=t},expression:"seachDeptContent"}})],1),a("div",{staticClass:"deptAdd left",on:{click:e.deptAddClick}},[a("i",{staticClass:"el-icon-plus fontWeight"})])]),a("div",{staticClass:"buttonTab"},[a("btn-tab",{attrs:{tabList:e.tabList},on:{btnTabClick:e.btnTabClick}})],1),a("div",{directives:[{name:"show",rawName:"v-show",value:0===e.btnTabStatus||2===e.btnTabStatus,expression:"btnTabStatus === 0 || btnTabStatus === 2"},{name:"loading",rawName:"v-loading",value:e.depTreeLoading,expression:"depTreeLoading"}],staticClass:"depTree"},[a("el-tree",{directives:[{name:"show",rawName:"v-show",value:!e.seachDeptContent,expression:"!seachDeptContent"}],ref:"depTree",attrs:{data:e.depTreeList,props:e.treeProps,"node-key":"depId","default-expand-all":"","check-on-click-node":"","expand-on-click-node":!1,"highlight-current":!0},on:{"node-click":e.departListClick},scopedSlots:e._u([{key:"default",fn:function(t){var i=t.node,s=t.data;return a("span",{staticClass:"custom-tree-node"},[a("span",[e._v(e._s(s.depId)+"/"+e._s(i.label))]),0===e.btnTabStatus?a("el-dropdown",{ref:"dropdown"+s.depId,attrs:{trigger:"click",size:"mini",placement:"bottom-start"},on:{command:function(t){return e.handleCommand(t,s)},"visible-change":function(t){return e.visibleChange(t,"dropdown"+s.depId)}}},[a("span",{staticClass:"el-dropdown-link",on:{click:function(t){return t.stopPropagation(),e.depChangeClick(s,t)}}},[a("i",{staticClass:"iconfont ytcrm-diandiandian"})]),a("el-dropdown-menu",{attrs:{slot:"dropdown"},slot:"dropdown"},[a("el-dropdown-item",{directives:[{name:"show",rawName:"v-show",value:s.operationFlag,expression:"data.operationFlag"}],attrs:{command:"add"}},[e._v("添加子部门")]),a("el-dropdown-item",{directives:[{name:"show",rawName:"v-show",value:s.operationFlag,expression:"data.operationFlag"}],attrs:{command:"update"}},[e._v("修改名称")]),a("el-dropdown-item",{attrs:{command:"getDeptMng"}},[e._v("查看管理人员")]),a("el-dropdown-item",{directives:[{name:"show",rawName:"v-show",value:s.operationFlag,expression:"data.operationFlag"}],attrs:{command:"delete"}},[e._v("删除")])],1)],1):e._e(),2!==e.btnTabStatus||s.parentId?e._e():a("el-dropdown",{ref:"dropdown"+s.depId,attrs:{trigger:"click",size:"mini",placement:"bottom-start"},on:{command:function(t){return e.grouphandleCommand(t,s)},"visible-change":function(t){return e.visibleChange(t,"dropdown"+s.depId)}}},[a("span",{staticClass:"el-dropdown-link",on:{click:function(t){return t.stopPropagation(),e.depChangeClick(s,t)}}},[a("i",{staticClass:"iconfont ytcrm-diandiandian"})]),a("el-dropdown-menu",{attrs:{slot:"dropdown"},slot:"dropdown"},[a("el-dropdown-item",{attrs:{command:"add"}},[e._v("添加子组")]),a("el-dropdown-item",{attrs:{command:"update"}},[e._v("修改名称")]),a("el-dropdown-item",{attrs:{command:"getDeptMng"}},[e._v("查看组管理人员")]),a("el-dropdown-item",{attrs:{command:"delete"}},[e._v("删除")])],1)],1)],1)}}])}),a("div",{directives:[{name:"show",rawName:"v-show",value:e.seachDeptContent,expression:"seachDeptContent"}],staticClass:"personDepartContent"},[e.crmUserList.length>0&&0===e.btnTabStatus?a("ul",{staticClass:"personList"},[a("li",{staticClass:"personDepartHeader"},[e._v("成员")]),e._l(e.crmUserList,(function(t,i){return a("li",{key:i,staticClass:"persondeptList",class:t.active?"active":"",on:{click:function(a){return e.personDeptClick(t,i,"emp")}}},[a("span",{staticClass:"empInfor slh"},[e._v(e._s(t.userId)+"("+e._s(t.userName)+")")]),a("span",{staticClass:"deptInfor slh"},[e._v(e._s(t.userMainDepNum)+"/"+e._s(t.userMainDepName))])])}))],2):e._e(),e.crmDepList.length>0&&0===e.btnTabStatus?a("ul",{staticClass:"departList"},[a("li",{staticClass:"personDepartHeader"},[e._v("部门")]),e._l(e.crmDepList,(function(t,i){return a("li",{key:i,staticClass:"persondeptList",class:t.active?"active":"",on:{click:function(a){return e.personDeptClick(t,i,"dept")}}},[a("i",{staticClass:"el-icon-folder-opened"}),e._v(" "+e._s(t.depId)+"/"+e._s(t.depName)+" ")])}))],2):e._e(),e.crmGroupList.length>0&&2===e.btnTabStatus?a("ul",{staticClass:"departList"},[a("li",{staticClass:"personDepartHeader"},[e._v("组")]),e._l(e.crmGroupList,(function(t,i){return a("li",{key:i,staticClass:"persondeptList",class:t.active?"active":"",on:{click:function(a){return e.personDeptClick(t,i,"group")}}},[a("i",{staticClass:"el-icon-folder-opened"}),e._v(" "+e._s(t.depId)+"/"+e._s(t.depName)+" ")])}))],2):e._e()])],1),1===e.btnTabStatus?a("div",{directives:[{name:"loading",rawName:"v-loading",value:e.tagLoading,expression:"tagLoading"}],staticClass:"depTree"},[a("ul",{directives:[{name:"show",rawName:"v-show",value:!e.seachDeptContent,expression:"!seachDeptContent"}],staticClass:"tagList"},e._l(e.tagDataList,(function(t,i){return a("li",{key:i,staticClass:"tagListItem",class:e.tagActiveIndex===i?"active":"",on:{click:function(a){return e.tagClick(t,i)}}},[e._v(" "+e._s(t.tagName)+" ")])})),0),a("div",{directives:[{name:"show",rawName:"v-show",value:e.seachDeptContent,expression:"seachDeptContent"}],staticClass:"personDepartContent"},[e.crmtagList.length>0?a("ul",{staticClass:"departList"},[a("li",{staticClass:"personDepartHeader"},[e._v("标签")]),e._l(e.crmtagList,(function(t,i){return a("li",{key:i,staticClass:"persondeptList",class:t.active?"active":"",on:{click:function(a){return e.personDeptClick(t,i,"tag")}}},[a("i",{staticClass:"el-icon-folder-opened"}),e._v(" "+e._s(t.tagId)+"/"+e._s(t.tagName)+" ")])}))],2):e._e()])]):e._e()]),0===e.btnTabStatus?a("div",{staticClass:"personRight left"},[a("ul",{staticClass:"clearfix personHeader"},[0===e.btnTabStatus?a("li",{staticClass:"left"},[e._v(" "+e._s(e.nowClickTreeRow[0]?e.nowClickTreeRow[0].depName:"")+" ")]):e._e(),a("li",{staticClass:"right"},[a("span",{directives:[{name:"show",rawName:"v-show",value:e.nowClickTreeRow[0]&&e.nowClickTreeRow[0].operationFlag,expression:"nowClickTreeRow[0] && nowClickTreeRow[0].operationFlag"}],staticClass:"button-text",on:{click:function(t){return e.handleCommand("detailAdd",{})}}},[e._v("添加子部门")]),a("span",{directives:[{name:"show",rawName:"v-show",value:e.nowClickTreeRow[0]&&e.nowClickTreeRow[0].operationFlag,expression:"nowClickTreeRow[0] && nowClickTreeRow[0].operationFlag"}],staticClass:"button-text",on:{click:function(t){return e.handleCommand("detailUpdate",{})}}},[e._v("修改名称")]),a("span",{staticClass:"button-text",on:{click:function(t){return e.handleCommand("detailGetDeptMng",{})}}},[e._v("查看管理人员")])])]),a("ul",{staticClass:"personHandle"},[a("li",{staticClass:"peoButton"},[a("el-button",{directives:[{name:"show",rawName:"v-show",value:0===e.btnTabStatus,expression:"btnTabStatus === 0"}],attrs:{size:"small",type:"warning",plain:""},on:{click:e.addPeoClick}},[e._v("新增成员")]),a("el-button",{directives:[{name:"show",rawName:"v-show",value:0===e.btnTabStatus,expression:"btnTabStatus === 0"}],attrs:{size:"small",type:"warning",plain:""},on:{click:e.setUpDepartmentClick}},[e._v("设置所在部门")]),a("el-button",{directives:[{name:"show",rawName:"v-show",value:0===e.btnTabStatus,expression:"btnTabStatus === 0"}],attrs:{size:"small",type:"warning",plain:""},on:{click:e.setUpEmpClick}},[e._v("设置人员关联")]),a("el-button",{directives:[{name:"show",rawName:"v-show",value:0===e.btnTabStatus,expression:"btnTabStatus === 0"}],attrs:{size:"small",type:"warning",plain:""},on:{click:e.setUpRoleClick}},[e._v("设置人员角色")]),a("el-button",{attrs:{size:"small",type:"warning",plain:""},on:{click:e.deletePeoClick}},[e._v("删除")])],1)]),a("div",{directives:[{name:"loading",rawName:"v-loading",value:e.tableDataLoading,expression:"tableDataLoading"}],staticClass:"mainTable"},[a("base-table",{attrs:{tableHeight:e.tableHeight,tableDataList:e.tableDataList,columns:e.columns,options:e.options,operates:e.operates},on:{handleSelectionChange:e.handleSelectionChange,handleClickChange:e.handleClickChange}})],1),a("paging",{attrs:{page:e.page,pageSize:e.pageSize,total:e.total}})],1):e._e(),1===e.btnTabStatus?a("div",{staticClass:"personRight left"},[a("set-tager",{ref:"setTag",attrs:{tableSelectList:e.tableSelectList,tagIndex:e.tagActiveIndex,nowClickTagList:e.nowClickTagList},on:{getTagList:e.getTagList,getUserDetail:e.getUserDetail}}),a("div",{directives:[{name:"show",rawName:"v-show",value:!e.tagLoading,expression:"!tagLoading"},{name:"loading",rawName:"v-loading",value:e.tableDataLoading,expression:"tableDataLoading"}],staticClass:"mainTable"},[a("base-table",{attrs:{tableHeight:e.tableHeight,tableDataList:e.tableDataList,columns:e.columns,options:e.options},on:{handleSelectionChange:e.handleSelectionChange,handleClickChange:e.handleClickChange}})],1)],1):e._e(),2===e.btnTabStatus?a("div",{staticClass:"personRight left"},[a("ul",{staticClass:"clearfix personHeader"},[a("li",{staticClass:"left"},[e._v(" "+e._s(e.nowClickTreeRow[0]?e.nowClickTreeRow[0].depName:"")+" ")]),a("li",{directives:[{name:"show",rawName:"v-show",value:!(e.nowClickTreeRow[0]&&e.nowClickTreeRow[0].parentId),expression:"!(nowClickTreeRow[0] && nowClickTreeRow[0].parentId)"}],staticClass:"right"},[a("span",{staticClass:"button-text",on:{click:function(t){return e.grouphandleCommand("detailAdd",{})}}},[e._v("添加子组")]),a("span",{staticClass:"button-text",on:{click:function(t){return e.grouphandleCommand("detailUpdate",{})}}},[e._v("修改名称")]),a("span",{staticClass:"button-text",on:{click:function(t){return e.grouphandleCommand("detailGetDeptMng",{})}}},[e._v("查看管理人员")])])]),a("ul",{staticClass:"personHandle"},[a("li",{staticClass:"peoButton"},[a("el-button",{attrs:{type:"warning",plain:"",size:"small"},on:{click:e.addGroupUser}},[e._v("添加成员")]),a("el-button",{attrs:{type:"warning",plain:"",size:"small"},on:{click:e.shiftOutClick}},[e._v("移出")])],1)]),a("div",{directives:[{name:"loading",rawName:"v-loading",value:e.tableDataLoading||e.depTreeLoading,expression:"tableDataLoading || depTreeLoading"}],staticClass:"mainTable"},[a("base-table",{attrs:{tableHeight:e.tableHeight,tableDataList:e.tableDataList,columns:e.columns,options:e.options},on:{handleSelectionChange:e.handleSelectionChange,handleClickChange:e.handleClickChange}})],1)]):e._e()]),a("common-dialog",{attrs:{dialogVal:e.dialogVal},on:{handleClose:e.handleDepClose,handleSure:function(t){return e.handleDepSure("depruleForm")}}},[e.dialogVal.dialogVisible?a("div",{attrs:{slot:"dialogbody"},slot:"dialogbody"},[a("el-form",{ref:"depruleForm",staticClass:"demo-ruleForm",attrs:{model:e.depruleForm,rules:e.deprules,"label-width":"80px"}},[a("el-form-item",{attrs:{label:0===e.btnTabStatus?"部门名称":"组名称",prop:"depName"}},[a("el-input",{attrs:{size:"small"},model:{value:e.depruleForm.depName,callback:function(t){e.$set(e.depruleForm,"depName",t)},expression:"depruleForm.depName"}})],1),a("el-form-item",{attrs:{label:0===e.btnTabStatus?"部门描述":"组描述",prop:"depDesc"}},[a("el-input",{attrs:{size:"small",type:"textarea"},model:{value:e.depruleForm.depDesc,callback:function(t){e.$set(e.depruleForm,"depDesc",t)},expression:"depruleForm.depDesc"}})],1),1===e.pointChangeType?a("el-form-item",{attrs:{label:0===e.btnTabStatus?"所属部门":"所属组",prop:0===e.btnTabStatus?"belongDep":""}},[a("el-cascader",{attrs:{size:"small",options:e.depTreeList,props:{checkStrictly:!0,emitPath:!1,value:"depId",label:"depName",children:"childList"},clearable:""},on:{change:e.belongDepChange},model:{value:e.depruleForm.belongDep,callback:function(t){e.$set(e.depruleForm,"belongDep",t)},expression:"depruleForm.belongDep"}})],1):e._e(),2===e.pointChangeType?a("el-form-item",{attrs:{label:"所属部门",prop:"belongDep"}},[e.nowClickTreeRow.length>0?a("span",{staticClass:"fontWeight"},[e._v(e._s(e.nowClickTreeRow[0].depId)+"/"+e._s(e.nowClickTreeRow[0].depName))]):a("span",{staticClass:"fontWeight"},[e._v(e._s(e.nowClickTreeRow.depId)+"/"+e._s(e.nowClickTreeRow.depName))])]):e._e()],1)],1):e._e()]),a("common-dialog",{attrs:{dialogVal:e.getDepMngDialogVal,width:"70%",footerShow:!1},on:{handleClose:e.getDepMngClose}},[e.getDepMngDialogVal.dialogVisible?a("div",{attrs:{slot:"dialogbody"},slot:"dialogbody"},[a("getdep-msg",{attrs:{getDepMsgNeed:e.getDepMsgNeed}})],1):e._e()]),e.addTagUserdialogVal.dialogVisible?a("taggroup-user",{attrs:{addTagUserdialogVal:e.addTagUserdialogVal,nowClickTagList:e.nowClickTreeRow[0]&&e.nowClickTreeRow[0].depId?e.nowClickTreeRow[0]:e.depTreeList[0]},on:{handleTagUserClose:e.handleTagUserClose,handletagUserSure:e.handletagUserSure}}):e._e(),e.addPersondialogVal.dialogVisible?a("add-person",{attrs:{departChooseList:e.departChooseList,addPersondialogVal:e.addPersondialogVal},on:{addPersonClose:e.addPersonClose,addPersonSure:e.addPersonSure}}):e._e(),e.departChangedialogVal.dialogVisible?a("depart-change",{attrs:{departChooseList:e.departChooseList,departChangedialogVal:e.departChangedialogVal},on:{departChangeHandleClose:e.departChangeHandleClose,departChangeHandleSure:e.departChangeHandleSure}}):e._e(),e.setPersonRolesdialogVal.dialogVisible?a("set-role",{attrs:{tableSelectList:e.tableSelectList,setPersonRolesdialogVal:e.setPersonRolesdialogVal,getCheckList:e.checkList},on:{setPersonRolesClose:e.setPersonRolesClose,setPersonRolesSure:e.setPersonRolesSure}}):e._e(),e.empChangeVisible?a("emp-change",{ref:"empChange",attrs:{personDetailInfor:e.selectRowObj,empChooseList:e.empChooseList,empChangeVisible:e.empChangeVisible},on:{empChangeHandleClose:e.empChangeHandleClose,empChooseClick:e.empChooseClick}}):e._e(),e.personDetailDialog.dialogVisible?a("person-detail",{attrs:{personDetailDialog:e.personDetailDialog,personDetailObj:e.personDetailObj,btnTabStatus:e.btnTabStatus},on:{personDetailHandleClose:e.personDetailHandleClose,personDetailHandleSure:e.personDetailHandleSure}}):e._e()],1)},Yi=[],Gi=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"paging"},[a("el-pagination",{attrs:{"current-page":e.page,"page-sizes":[e.firstPageSize,e.firstPageSize+10,e.firstPageSize+20,e.firstPageSize+30],"page-size":e.pageSize,layout:"total, sizes, prev, pager, next, jumper",total:e.total},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange}})],1)},Xi=[],Qi=function(e){Object(b["a"])(a,e);var t=Object(y["a"])(a);function a(){var e;return Object(f["a"])(this,a),e=t.apply(this,arguments),e.firstPageSize=0,e}return Object(v["a"])(a,[{key:"handleCurrentChange",value:function(e){this.$emit("changeCurrentPage",e)}},{key:"handleSizeChange",value:function(e){this.$emit("handleSizeChange",e)}},{key:"mounted",value:function(){this.firstPageSize=this.pageSize}}]),a}(k["d"]);Object(C["a"])([Object(k["c"])()],Qi.prototype,"page",void 0),Object(C["a"])([Object(k["c"])()],Qi.prototype,"total",void 0),Object(C["a"])([Object(k["c"])()],Qi.prototype,"pageSize",void 0),Qi=Object(C["a"])([k["a"]],Qi);var Zi=Qi,es=Zi,ts=(a("cae3"),Object(c["a"])(es,Gi,Xi,!1,null,null,null)),as=ts.exports,is=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"baseTable"},[a("el-table",{directives:[{name:"loading",rawName:"v-loading.iTable",value:e.options.loading,expression:"options.loading",modifiers:{iTable:!0}}],ref:"mutipleTable",attrs:{id:"iTable","tooltip-effect":"light","highlight-current-row":"","max-height":e.tableHeight,data:e.tableDataList,stripe:e.options.stripe,border:e.options.border,size:e.options.size},on:{"row-click":e.handleClickChange,select:e.handleSelectionChange}},[e.options.mutiSelect?a("el-table-column",{staticStyle:{width:"55px"},attrs:{type:"selection"}}):e._e(),e._l(e.columns,(function(t,i){return[a("el-table-column",{key:t.label,attrs:{prop:t.prop,label:t.label,align:t.align,"min-width":t.minWidth,width:t.width,"show-overflow-tooltip":t.showoverflow,formatter:t.formatter},scopedSlots:e._u([{key:"default",fn:function(s){return[t.render?[a("expand-dom",{attrs:{column:t,row:s.row,render:t.render,index:i}})]:[s.row.editing&&t.editingType?["input"===t.editingType?a("el-input",{attrs:{size:"mini",borderColor:!s.row.isSaveClick||t.nomustEnter||s.row[t.prop]?"":"danger",placeholder:"请输入"+t.label},on:{input:function(a){return e.inputChange(s.$index,t.prop)}},nativeOn:{click:function(a){return a.stopPropagation(),e.inputClick(s.$index,t.prop)}},model:{value:s.row[t.prop],callback:function(a){e.$set(s.row,t.prop,a)},expression:"scope.row[column.prop]"}}):e._e(),"select"===t.editingType?a("el-select",{attrs:{size:"mini",filterable:"",placeholder:"请选择"+t.label},nativeOn:{change:function(a){return a.stopPropagation(),function(a){return e.selectChange(a,s.$index,t.prop)}(a)}},model:{value:s.row[t.prop],callback:function(a){e.$set(s.row,t.prop,a)},expression:"scope.row[column.prop]"}},e._l(t.selectOptions,(function(t){return a("el-option",{key:t[e.selectvalue],attrs:{label:t[e.selectlabel],value:t[e.selectvalue]}},[a("div",[a("span",[e._v(e._s(t[e.selectvalue]))]),a("span",[e._v("/"+e._s(t[e.selectlabel]))]),e.otherValue?a("span",{staticStyle:{color:"#aaa"}},[e._v("("+e._s(t[e.otherValue])+")")]):e._e()])])})),1):e._e(),"inputTag"===t.editingType?a("span",{staticClass:"inputTag"},[e._t(t.editingType,null,{index:s.$index,clumnValue:t.prop,row:s.row})],2):e._e()]:[t.formatter?[!t.showoverflow&&t.showoverflowAndCopy?a("span",[a("el-popover",{attrs:{trigger:"hover",placement:"top"}},[a("span",{domProps:{innerHTML:e._s(t.formatter(s.row,t))}}),a("div",{staticClass:"name-wrapper",attrs:{slot:"reference"},slot:"reference"},[a("span",{domProps:{innerHTML:e._s(t.formatter(s.row,t))}})])])],1):a("span",{domProps:{innerHTML:e._s(t.formatter(s.row,t))}})]:[!t.showoverflow&&t.showoverflowAndCopy?a("span",[a("el-popover",{attrs:{trigger:"hover",placement:"top"}},[a("span",[e._v(e._s(s.row[t.prop]))]),a("div",{staticClass:"name-wrapper",attrs:{slot:"reference"},slot:"reference"},[a("span",[e._v(e._s(s.row[t.prop]))])])])],1):a("span",[e._v(e._s(s.row[t.prop]))])]]]]}}],null,!0)})]})),e.operates&&e.operates.initButtonList&&e.operates.initButtonList.filter((function(e){return!0===e.show})).length>0&&e.operates.fixed?a("el-table-column",{attrs:{label:"操作",align:"left",width:e.operates.width,fixed:e.operates.fixed?e.operates.fixed:""},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(" "+e._s(!t.row.editing)+" "),t.row.editing?a("div",{staticClass:"operate-group"},[e._l(e.operates.clickButtonList,(function(i,s){return[a("span",{key:i.id,staticClass:"item"},[a("el-button",{attrs:{type:i.type,size:"mini",icon:i.icon,disabled:i.disabled,plain:i.plain},on:{click:function(e){return e.stopPropagation(),i.method(s,t.row,t.$index)}}},[e._v(" "+e._s(i.label)+" ")])],1)]}))],2):a("div",{staticClass:"operate-group"},[e._l(e.operates.initButtonList,(function(i,s){return[a("span",{key:i.id,staticClass:"item"},[a("el-button",{attrs:{type:i.type,size:"mini",icon:i.icon,disabled:i.disabled,plain:i.plain},on:{click:function(e){return e.stopPropagation(),i.method(s,t.row,t.$index)}}},[e._v(" "+e._s(i.label)+" ")])],1)]}))],2)]}}],null,!1,1998008385)}):e._e(),e.operates&&!e.operates.fixed?a("el-table-column",{attrs:{label:"操作",align:"left",width:e.operates.width},scopedSlots:e._u([{key:"default",fn:function(t){return[t.row.editing?a("div",{staticClass:"operate-group"},[e._l(e.operates.clickButtonList,(function(i,s){return[a("span",{key:i.id,staticClass:"item"},[a("el-button",{attrs:{type:i.type,size:"mini",icon:i.icon,disabled:i.disabled,plain:i.plain},on:{click:function(e){return e.stopPropagation(),i.method(s,t.row,t.$index)}}},[e._v(e._s(i.label))])],1)]}))],2):a("div",{staticClass:"operate-group"},[e._l(e.operates.initButtonList,(function(i,s){return[i.show?a("span",{key:i.id,staticClass:"item"},[a("el-button",{directives:[{name:"show",rawName:"v-show",value:"作废"!==i.label||(1===t.row.USESTATUS||1===t.row.usestatus),expression:"btn.label === '作废' ? (scope.row.USESTATUS === 1 || scope.row.usestatus === 1 ? true : false) : true"}],attrs:{type:i.type,size:i.size,icon:i.icon,disabled:i.disabled,plain:i.plain},on:{click:function(e){return e.stopPropagation(),i.method(s,t.row,t.$index)}}},[e._v(" "+e._s(i.label)+" ")])],1):e._e()]}))],2)]}}],null,!1,1329497878)}):e._e()],2)],1)},ss=[],ns=function(e){Object(b["a"])(a,e);var t=Object(y["a"])(a);function a(){return Object(f["a"])(this,a),t.apply(this,arguments)}return Object(v["a"])(a,[{key:"handleClickChange",value:function(e,t,a){var i={row:e,column:t,event:a};this.$emit("handleClickChange",i)}},{key:"handleSelectionChange",value:function(e,t){var a={selection:e,row:t};this.$emit("handleSelectionChange",a)}},{key:"inputClick",value:function(e,t){var a={index:e,prop:t};this.$emit("inputClick",a)}},{key:"inputChange",value:function(e,t){var a={index:e,prop:t};this.$emit("inputChange",a)}},{key:"selectChange",value:function(e,t,a){var i={changeVal:e,index:t,prop:a};this.$emit("selectChange",i)}}]),a}(k["d"]);Object(C["a"])([Object(k["c"])({type:Number,default:1e3})],ns.prototype,"tableHeight",void 0),Object(C["a"])([Object(k["c"])()],ns.prototype,"tableDataList",void 0),Object(C["a"])([Object(k["c"])()],ns.prototype,"columns",void 0),Object(C["a"])([Object(k["c"])({default:"label"})],ns.prototype,"selectlabel",void 0),Object(C["a"])([Object(k["c"])({default:"value"})],ns.prototype,"selectvalue",void 0),Object(C["a"])([Object(k["c"])({default:""})],ns.prototype,"otherValue",void 0),Object(C["a"])([Object(k["c"])()],ns.prototype,"operates",void 0),Object(C["a"])([Object(k["c"])({default:{stripe:!0,highlightCurrentRow:!0}})],ns.prototype,"options",void 0),ns=Object(C["a"])([Object(k["a"])({components:{expandDom:{functional:!0,props:{row:Object,render:Function,index:Number,column:{type:Object,default:null}},render:function(e,t){var a={row:t.props.row,index:t.props.index};return t.props.column&&(a.column=t.props.column),t.props.render(e,a)}}}})],ns);var rs=ns,os=rs,ls=(a("3676d"),Object(c["a"])(os,is,ss,!1,null,null,null)),cs=ls.exports,us=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"btnTab"},[a("ul",{staticClass:"clearfix"},e._l(e.tabList,(function(t,i){return a("li",{key:i,class:e.activeIndex===i?"active":"",on:{click:function(t){return e.btnTabClick(i)}}},[e._v(" "+e._s(t)+" ")])})),0)])},ds=[],ps=function(e){Object(b["a"])(a,e);var t=Object(y["a"])(a);function a(){var e;return Object(f["a"])(this,a),e=t.apply(this,arguments),e.activeIndex=0,e}return Object(v["a"])(a,[{key:"btnTabClick",value:function(e){this.activeIndex=e,this.$emit("btnTabClick",e)}}]),a}(k["d"]);Object(C["a"])([Object(k["c"])()],ps.prototype,"tabList",void 0),ps=Object(C["a"])([Object(k["a"])({})],ps);var hs=ps,ms=hs,gs=(a("473d"),Object(c["a"])(ms,us,ds,!1,null,"08a09e08",null)),fs=gs.exports,vs=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"commonDialog"},[a("el-dialog",{attrs:{top:e.top,title:e.dialogVal.title,visible:e.dialogVal.dialogVisible,width:e.width,"before-close":e.handleClose},on:{"update:visible":function(t){return e.$set(e.dialogVal,"dialogVisible",t)}}},[a("div",[e._t("dialogbody")],2),e.footerShow?a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{size:e.size},on:{click:e.handleClose}},[e._v(e._s(e.cancelText))]),a("el-button",{attrs:{type:e.buttonType,size:e.size},on:{click:e.handleSure}},[e._v(e._s(e.sureText))])],1):e._e()])],1)},bs=[],ys=function(e){Object(b["a"])(a,e);var t=Object(y["a"])(a);function a(){return Object(f["a"])(this,a),t.apply(this,arguments)}return Object(v["a"])(a,[{key:"handleClose",value:function(){this.$emit("handleClose")}},{key:"handleSure",value:function(){this.$emit("handleSure")}}]),a}(k["d"]);Object(C["a"])([Object(k["c"])({default:{dialogVisible:!1,title:"提示"}})],ys.prototype,"dialogVal",void 0),Object(C["a"])([Object(k["c"])({type:String,default:"40%"})],ys.prototype,"width",void 0),Object(C["a"])([Object(k["c"])({type:String,default:"mini"})],ys.prototype,"size",void 0),Object(C["a"])([Object(k["c"])({type:String,default:"warning"})],ys.prototype,"buttonType",void 0),Object(C["a"])([Object(k["c"])({type:String,default:"取 消"})],ys.prototype,"cancelText",void 0),Object(C["a"])([Object(k["c"])({type:String,default:"确 定"})],ys.prototype,"sureText",void 0),Object(C["a"])([Object(k["c"])({type:Boolean,default:!0})],ys.prototype,"footerShow",void 0),Object(C["a"])([Object(k["c"])({type:String,default:"15vh"})],ys.prototype,"top",void 0),ys=Object(C["a"])([Object(k["a"])({})],ys);var Cs=ys,ks=Cs,Ds=(a("2bde"),Object(c["a"])(ks,vs,bs,!1,null,null,null)),ws=Ds.exports,_s=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"detailDialog"},[a("el-dialog",{attrs:{top:e.top,title:e.dialogVal.title,visible:e.dialogVal.dialogVisible,width:e.width,"before-close":e.handleClose},on:{"update:visible":function(t){return e.$set(e.dialogVal,"dialogVisible",t)}}},[a("div",[e._t("dialogbody")],2),e.footerShow?a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{size:e.size},on:{click:e.handleClose}},[e._v(e._s(e.cancelText))]),a("el-button",{attrs:{type:e.buttonType,size:e.size},on:{click:e.handleSure}},[e._v(e._s(e.sureText))])],1):e._e()])],1)},Is=[],Ls=function(e){Object(b["a"])(a,e);var t=Object(y["a"])(a);function a(){return Object(f["a"])(this,a),t.apply(this,arguments)}return Object(v["a"])(a,[{key:"handleClose",value:function(){this.$emit("handleClose")}},{key:"handleSure",value:function(){this.$emit("handleSure")}}]),a}(k["d"]);Object(C["a"])([Object(k["c"])({default:{dialogVisible:!1,title:"提示"}})],Ls.prototype,"dialogVal",void 0),Object(C["a"])([Object(k["c"])({type:String,default:"990px"})],Ls.prototype,"width",void 0),Object(C["a"])([Object(k["c"])({type:String,default:"mini"})],Ls.prototype,"size",void 0),Object(C["a"])([Object(k["c"])({type:String,default:"primary"})],Ls.prototype,"buttonType",void 0),Object(C["a"])([Object(k["c"])({type:String,default:"取 消"})],Ls.prototype,"cancelText",void 0),Object(C["a"])([Object(k["c"])({type:String,default:"确 定"})],Ls.prototype,"sureText",void 0),Object(C["a"])([Object(k["c"])({type:Boolean,default:!0})],Ls.prototype,"footerShow",void 0),Object(C["a"])([Object(k["c"])({type:String,default:"0"})],Ls.prototype,"top",void 0),Ls=Object(C["a"])([Object(k["a"])({})],Ls);var Ts=Ls,Os=Ts,xs=(a("5440"),Object(c["a"])(Os,_s,Is,!1,null,null,null)),Ss=xs.exports,js=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"nodata"},[e._m(0),a("div",{staticClass:"text"},[e._v(e._s(e.message))])])},Es=[function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"img"},[i("img",{attrs:{src:a("9485"),alt:""}})])}],Ns=function(e){Object(b["a"])(a,e);var t=Object(y["a"])(a);function a(){return Object(f["a"])(this,a),t.apply(this,arguments)}return a}(k["d"]);Object(C["a"])([Object(k["c"])({default:"暂无数据"})],Ns.prototype,"message",void 0),Ns=Object(C["a"])([Object(k["a"])({})],Ns);var Rs=Ns,Us=Rs,Ps=(a("d11b"),Object(c["a"])(Us,js,Es,!1,null,"3370f8bc",null)),As=Ps.exports,$s=function(e){Object(b["a"])(a,e);var t=Object(y["a"])(a);function a(){var e;return Object(f["a"])(this,a),e=t.apply(this,arguments),e.page=1,e.pageSize=20,e.total=0,e.tableHeight=-1,e.options={border:!0,size:"mini",stripe:!0,loading:!1,highlightCurrentRow:!0,mutiSelect:!0},e}return Object(v["a"])(a,[{key:"mounted",value:function(){document.getElementsByClassName("mainTable").length>0&&(this.tableHeight=document.getElementsByClassName("mainTable")[0].clientHeight)}}]),a}(k["d"]);$s=Object(C["a"])([Object(k["a"])({components:{containerHeader:Ma,paging:as,menuBar:Ua,baseTable:cs,btnTab:fs,commonDialog:ws,DetailDialog:Ss,noData:As}})],$s);var Vs=$s,Ms=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"getDepMng"},[1===+e.getDepMsgNeed[0].depType&&e.getDepMsgNeed[0].depTypeoperationFlag||2===e.getDepMsgNeed[0].depType?a("div",{staticClass:"menu clearfix"},[a("div",{staticClass:"button left"},[a("el-button",{attrs:{size:"mini",type:"primary",icon:"el-icon-plus"},on:{click:e.insertClick}}),a("el-button",{attrs:{size:"mini",type:"success",icon:"el-icon-check"},on:{click:e.saveAllClick}}),a("el-button",{attrs:{size:"mini",type:"danger",icon:"el-icon-delete"},on:{click:e.deleteAllClick}})],1)]):e._e(),a("base-table",{attrs:{tableHeight:e.tableHeight,tableDataList:e.msgList,columns:e.columns,options:e.options,operates:1===+e.getDepMsgNeed[0].depType&&e.getDepMsgNeed[0].depTypeoperationFlag||2===e.getDepMsgNeed[0].depType?e.operates:""},on:{inputClick:e.tableInputClick,handleSelectionChange:e.handleSelectionChange},scopedSlots:e._u([{key:"inputTag",fn:function(t){var i=t.clumnValue,s=t.row;return e.userByDepIdOptions.length>0?a("div",{},["userId"===i?a("el-select",{attrs:{size:"mini",filterable:"",placeholder:"请选择"},model:{value:s.userId,callback:function(t){e.$set(s,"userId",t)},expression:"row.userId"}},e._l(e.userByDepIdOptions,(function(t){return a("el-option",{key:t.userId,attrs:{label:t.userName,value:t.userId}},[a("span",[e._v(e._s(t.userId))]),a("span",[e._v("/"+e._s(t.userName))]),a("span",{staticStyle:{color:"#aaa"}},[e._v("("+e._s(t.wxCode)+")")])])})),1):e._e(),"positionId"===i?a("el-select",{attrs:{size:"mini",filterable:"",placeholder:"请选择"},model:{value:s.positionId,callback:function(t){e.$set(s,"positionId",t)},expression:"row.positionId"}},e._l(e.positionOptions,(function(t){return a("el-option",{key:t.DIC_SELECT_ID,attrs:{label:t.DIC_SELECT_NAME,value:t.DIC_SELECT_ID,disabled:1!==t.USESTATUS}},[a("span",[e._v(e._s(t.DIC_SELECT_ID))]),a("span",[e._v("/"+e._s(t.DIC_SELECT_NAME))])])})),1):e._e()],1):e._e()}}],null,!0)})],1)},Fs=[];function zs(e,t,a){return Hs.apply(this,arguments)}function Hs(){return Hs=Object(R["a"])(regeneratorRuntime.mark((function e(t,a,i){var s;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,z({url:t+a,method:"post",data:i});case 2:return s=e.sent,e.abrupt("return",s.data);case 4:case"end":return e.stop()}}),e)}))),Hs.apply(this,arguments)}function Ks(e,t,a){return Bs.apply(this,arguments)}function Bs(){return Bs=Object(R["a"])(regeneratorRuntime.mark((function e(t,a,i){var s,n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return s=new FormData,Object.keys(i).forEach((function(e){s.append(e,i[e]||"")})),e.next=4,z({url:t+a,method:"post",data:s});case 4:return n=e.sent,e.abrupt("return",n.data);case 6:case"end":return e.stop()}}),e)}))),Bs.apply(this,arguments)}var qs=function(){var e=Object(R["a"])(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,zs(q,"/api/Dep/insOrUpdDepList",t);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),Ws=function(){var e=Object(R["a"])(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,zs(q,"/api/Dep/dltDepList",t);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),Js=function(){var e=Object(R["a"])(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,Ks(q,"/api/DepMng/getDepMngByDepId",t);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),Ys=function(){var e=Object(R["a"])(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,Ks(q,"/api/WebAppUser/getUserByDepId",t);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),Gs=function(){var e=Object(R["a"])(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,zs(q,"/api/DepMng/insOrUpdDepMng",t);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),Xs=function(){var e=Object(R["a"])(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,zs(q,"/api/DepMng/dltDepMng",t);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),Qs=function(){var e=Object(R["a"])(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,zs(q,"/api/UserTag/insOrUpdUsertag",t);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),Zs=function(){var e=Object(R["a"])(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,zs(q,"/api/UserTag/dltUsertag",t);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),en=function(){var e=Object(R["a"])(regeneratorRuntime.mark((function e(t){var a,i;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return a=q+"/api/UserTag/getUsertag?tagId="+t.tagId,i=null,e.prev=2,e.next=5,z.post(a);case 5:if(i=e.sent,200!==i.status){e.next=8;break}return e.abrupt("return",Promise.resolve(i.data));case 8:e.next=13;break;case 10:e.prev=10,e.t0=e["catch"](2);case 13:return e.abrupt("return",i);case 14:case"end":return e.stop()}}),e,null,[[2,10]])})));return function(t){return e.apply(this,arguments)}}(),tn=function(){var e=Object(R["a"])(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,zs(q,"/api/UserTag/insOrUpdUserUsertag",t);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),an=function(){var e=Object(R["a"])(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,Ks(q,"/api/WebAppUser/getUserByParams",t);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),sn=function(){var e=Object(R["a"])(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,zs(q,"/api/UserDep/getUserDetailList",t);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),nn=function(){var e=Object(R["a"])(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,zs(q,"/api/UserDep/getCrmDepByUserIds",t);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),rn=function(){var e=Object(R["a"])(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,zs(q,"/api/UserDep/insOrDltUserDep",t);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),on=function(){var e=Object(R["a"])(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,zs(q,"/api/UserDep/getCrmRoleByUserIds",t);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),ln=function(){var e=Object(R["a"])(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,zs(q,"/api/UserDep/insOrDltRoleDep",t);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),cn=function(){var e=Object(R["a"])(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,zs(q,"/api/UserDep/insOrDltUserGroup",t);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),un=function(){var e=Object(R["a"])(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,zs(q,"/api/UserDep/getPubEmpList",t);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),dn=function(){var e=Object(R["a"])(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,zs(q,"/api/UserDep/insOrDltUserEmp",t);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),pn=function(){var e=Object(R["a"])(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,zs(q,"/api/WebAppUser/dltUserList",t);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),hn=function(){var e=Object(R["a"])(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,zs(B,"/api/user/createUser",t);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),mn=function(){var e=Object(R["a"])(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,zs(B,"/api/user/editUser",t);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),gn=function(){var e=Object(R["a"])(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,Ks(B,"/api/user/resetPwd",t);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),fn=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"selectOptions"},[a("el-select",{directives:[{name:"loadmore",rawName:"v-loadmore",value:e.getDataList,expression:"getDataList"}],ref:"searchSelect",staticStyle:{width:"100%"},attrs:{"default-first-option":"",size:"mini","value-key":"value",loading:e.firstLoading,"no-data-text":e.empNo,"filter-method":e.filterMethod,clearable:"",filterable:"",multiple:e.multiple,placeholder:e.innerPlaceholder,"reserve-keyword":e.reserveKeyword},on:{focus:e.focus,clear:e.handleclear,change:e.handleChange},nativeOn:{click:function(t){return e.selectClick(t)}},model:{value:e.value,callback:function(t){e.value=t},expression:"value"}},[e._l(e.selectOptions,(function(t){return a("el-option",{key:t[e.selectvalue]+""+e.rowindex+t[e.selectlabel],attrs:{label:t[e.selectlabel],value:t[e.selectvalue]}},[a("div",[a("span",[e._v(e._s(t[e.selectvalue]))]),a("span",[e._v("/"+e._s(t[e.selectlabel]))]),e.otherValue?a("span",{staticStyle:{color:"#aaa"}},[e._v("("+e._s(t[e.otherValue])+")")]):e._e()])])})),a("div",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],staticClass:"loading"})],2)],1)},vn=[];a("45fc");function bn(e,t,a){var i=!1;e.$nextTick((function(){var s=t.$el.children[0].children[0];s.addEventListener("compositionstart",(function(){i=!0}),!1),s.addEventListener("compositionend",(function(){i=!1,e[a](s.value)}),!1),s.addEventListener("input",(function(t){if(!i){var s=t.value;e[a](s)}}),!1)}))}function yn(e,t){var a=arguments.length>2&&void 0!==arguments[2]&&arguments[2],i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"",s=[];if(a)return e.filter((function(e){var a=t.some((function(t){return t[i]===e[i]}));a||s.push(e)})),s;for(var n=0;n<e.length;n++){var r=e[n];-1===t.indexOf(r)&&s.push(r)}return s}var Cn=function(e){Object(b["a"])(a,e);var t=Object(y["a"])(a);function a(){var e;return Object(f["a"])(this,a),e=t.apply(this,arguments),e.firstLoading=!1,e.loading=!1,e.value="",e.searchCondition="",e.page=1,e.pageSize=10,e.hasNextPage=!0,e.innerPlaceholder="",e}return Object(v["a"])(a,[{key:"init",value:function(){this.page=1,this.hasNextPage=!0,this.loading=!1,this.firstLoading=!0}},{key:"handleclear",value:function(){this.value="",this.searchCondition&&(this.searchCondition="",this.init(),this.getDataList()),this.$emit("handleclear")}},{key:"filterMethod",value:function(e){this.$cancelAxios([this.interFaceName]),this.searchCondition=e,this.init(),this.getDataList()}},{key:"handleChange",value:function(e){this.$emit("handleChange",e)}},{key:"hasNextPageChange",value:function(){this.hasNextPage=!1}},{key:"pageChange",value:function(){this.page++}},{key:"loadingChange",value:function(){this.loading?this.loading=!1:this.loading=!0}},{key:"firstloadingChange",value:function(){this.firstLoading=!1}},{key:"getDataList",value:function(){var e={page:this.page,pageSize:this.pageSize,condition:this.searchCondition,hasNextPage:this.hasNextPage,loading:this.loading};this.$emit("getDataList",e)}},{key:"focus",value:function(){this.$emit("focus")}},{key:"selectClick",value:function(){this.$emit("selectClick")}},{key:"onchangeValueChanged",value:function(e){this.value=e}},{key:"mounted",value:function(){var e=this;this.value=this.changeValue,this.getDataList(),this.placeholder?this.innerPlaceholder=this.placeholder:this.innerPlaceholder="请输入",setTimeout((function(){bn(e,e.$refs.searchSelect,"filterMethod")}),100)}}]),a}(k["d"]);Object(C["a"])([Object(k["c"])()],Cn.prototype,"selectOptions",void 0),Object(C["a"])([Object(k["c"])()],Cn.prototype,"interFaceName",void 0),Object(C["a"])([Object(k["c"])({default:"暂无数据"})],Cn.prototype,"empNo",void 0),Object(C["a"])([Object(k["c"])()],Cn.prototype,"changeValue",void 0),Object(C["a"])([Object(k["c"])()],Cn.prototype,"placeholder",void 0),Object(C["a"])([Object(k["c"])({default:0})],Cn.prototype,"rowindex",void 0),Object(C["a"])([Object(k["c"])({default:"label"})],Cn.prototype,"selectlabel",void 0),Object(C["a"])([Object(k["c"])({default:"value"})],Cn.prototype,"selectvalue",void 0),Object(C["a"])([Object(k["c"])()],Cn.prototype,"otherValue",void 0),Object(C["a"])([Object(k["c"])({default:!1})],Cn.prototype,"multiple",void 0),Object(C["a"])([Object(k["c"])({default:!1})],Cn.prototype,"reserveKeyword",void 0),Object(C["a"])([Object(k["e"])("changeValue")],Cn.prototype,"onchangeValueChanged",null),Cn=Object(C["a"])([k["a"]],Cn);var kn=Cn,Dn=kn,wn=(a("438a"),Object(c["a"])(Dn,fn,vn,!1,null,"452427e4",null)),_n=wn.exports,In=function(e){Object(b["a"])(a,e);var t=Object(y["a"])(a);function a(){var e;return Object(f["a"])(this,a),e=t.apply(this,arguments),e.page=1,e.pageSize=20,e.total=0,e.tableHeight=440,e.msgList=[],e.middlemsgList=[],e.userByDepIdOptions=[],e.positionOptions=[],e.dltArr=[],e.options={border:!0,size:"mini",stripe:!0,loading:!1,highlightCurrentRow:!0,mutiSelect:!0},e.columns=[{prop:"userId",label:"姓名",align:"left",width:"120px",editingType:"inputTag",formatter:function(e){return"<span>".concat(e.userId).concat(e.userName,"</span>")}},{prop:"depName",label:"部门",align:"left",minWidth:"120px",formatter:function(e){return"<span>".concat(e.depId,"/").concat(e.depName,"</span>")}},{prop:"positionId",label:"职务",align:"left",minWidth:"100px",editingType:"inputTag",formatter:function(e){return"<span>".concat(e.positionId,"/").concat(e.positionName,"</span>")}},{prop:"usestatus",label:"状态",align:"left",minWidth:"100px",editingType:"select",selectOptions:[{value:1,label:"正式"},{value:2,label:"作废"}],formatter:function(e){return"<span>".concat(1===+e.usestatus?'<span style="color: green">正式</span>':'<span class="fontWeight">作废</span>',"</span>")}}],e.operates={width:200,fixed:"",initButtonList:[{id:"1",label:"编辑",type:"",size:"mini",show:!0,plain:!0,disabled:!1,method:function(t,a){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"";e.handleEdit(t,a,i)}},{id:"2",label:"作废",type:"danger",size:"mini",show:!0,plain:!1,disabled:!1,method:function(t,a){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"";e.handleDel(t,a,i)}}],clickButtonList:[{id:"3",label:"保存",type:"success",size:"mini",show:!1,plain:!1,disabled:!1,method:function(t,a){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"";e.handleSave(t,a,i)}},{id:"4",label:"取消",type:"warning",size:"mini",show:!1,plain:!1,disabled:!1,method:function(t,a){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"";e.handleCancel(t,a,i)}}]},e}return Object(v["a"])(a,[{key:"handleSelectionChange",value:function(e){this.dltArr=[];for(var t=0;t<e.selection.length;t++){var a=e.selection[t];this.dltArr.push(a.cdmId)}}},{key:"_getDictionaries",value:function(){var e=this,t={keyword:"",pageNum:1,pageSize:100,typeId:7};yi(t).then((function(t){"200"===t.code?e.positionOptions=t.data.list:e.$message({message:t.msg,type:"warning"})}))}},{key:"_getDepMngByDepId",value:function(){var e=this,t={depId:this.getDepMsgNeed[0].depId};this.options.loading=!0,Js(t).then((function(t){"200"===t.code?(e.msgList=t.data,e.middlemsgList=JSON.parse(JSON.stringify(e.msgList)),e.options.loading=!1):(e.$message({message:t.msg,type:"warning"}),e.options.loading=!1)}))}},{key:"_getUserByDepId",value:function(){var e=this,t={depId:this.getDepMsgNeed[0].depId};Ys(t).then((function(t){e.userByDepIdOptions=t.data,0===e.userByDepIdOptions.length&&e.$message({message:"当前部门没有人员信息，请先维护人员信息，再添加管理人员",type:"warning"})}))}},{key:"_insOrUpdDepMng",value:function(e){var t=this,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";Gs(e).then((function(e){"200"===e.code?(t.$message({message:e.msg,type:"success"}),a?(t.$set(a,"editing",!1),t.$set(a,"isSaveClick",!1),t.$set(a,"cdmId",e.data.returnCmdIdList[0]),t.positionOptions.filter((function(e){e.DIC_SELECT_ID===a.positionId&&t.$set(a,"positionName",e.DIC_SELECT_NAME)})),t.userByDepIdOptions.filter((function(e){e.userId===a.userId&&t.$set(a,"userName",e.userName)}))):t._getDepMngByDepId()):t.$message({message:e.msg,type:"warning"})}))}},{key:"_dltDepMng",value:function(e){var t=this;Xs(e).then((function(e){"200"===e.code?(t.$message({message:e.msg,type:"success"}),t.dltArr=[],t._getDepMngByDepId()):t.$message({message:e.msg,type:"warning"})}))}},{key:"insertClick",value:function(){var e={depId:this.getDepMsgNeed[0].depId,depName:this.getDepMsgNeed[0].depName,positionId:"",positionName:"",userId:"",userName:"",usestatus:1,editing:!0};this.msgList.unshift(e),this.middlemsgList=JSON.parse(JSON.stringify(this.msgList))}},{key:"saveAllClick",value:function(){for(var e=[],t=0;t<this.msgList.length;t++){var a=this.msgList[t];if(a.editing){if(this.$set(a,"isSaveClick",!0),!a.userId)return void this.$message({message:"人员选择不能为空",type:"warning"});if(!a.positionId)return void this.$message({message:"职务不能为空",type:"warning"});e.push({cdmId:a.cdmId,depId:a.depId,positionId:a.positionId,userId:a.userId,usestatus:a.usestatus})}}0!==e.length?this._insOrUpdDepMng(e):this.$message({message:"没有任何新增或修改的操作",type:"warning"})}},{key:"deleteAllClick",value:function(){0!==this.dltArr.length?this._dltDepMng(this.dltArr):this.$message({message:"请选择要删除的数据",type:"warning"})}},{key:"handleEdit",value:function(e,t,a){this.$set(t,"editing",!0)}},{key:"handleDel",value:function(e,t,a){var i=[t.cdmId];this._dltDepMng(i)}},{key:"handleSave",value:function(e,t,a){if(this.$set(t,"isSaveClick",!0),t.userId)if(t.positionId){var i=[{cdmId:t.cdmId,depId:t.depId,positionId:t.positionId,userId:t.userId,usestatus:t.usestatus}];this._insOrUpdDepMng(i,t)}else this.$message({message:"职务不能为空",type:"warning"});else this.$message({message:"人员选择不能为空",type:"warning"})}},{key:"handleCancel",value:function(e,t,a){if(t.cdmId){var i=JSON.parse(JSON.stringify(this.middlemsgList));this.$set(i[a],"editing",!1),this.$set(this.msgList,a,i[a])}else this.msgList.splice(a,1),this.middlemsgList.splice(a,1)}},{key:"tableInputClick",value:function(e){this.$set(this.msgList[e.index],"isSaveClick",!1)}},{key:"mounted",value:function(){this._getDepMngByDepId(),this._getUserByDepId(),this._getDictionaries()}}]),a}(k["d"]);Object(C["a"])([Object(k["c"])()],In.prototype,"getDepMsgNeed",void 0),In=Object(C["a"])([Object(k["a"])({components:{paging:as,baseTable:cs,selectOptions:_n}})],In);var Ln=In,Tn=Ln,On=(a("a47e"),Object(c["a"])(Tn,Ms,Fs,!1,null,"53c27dec",null)),xn=On.exports,Sn=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{directives:[{name:"loading",rawName:"v-loading",value:e.tagLoading,expression:"tagLoading"}],staticClass:"setTager"},[e.tagDataList.length>0?a("div",{staticClass:"content"},[a("ul",{staticClass:"clearfix personHeader"},[a("li",{staticClass:"left"},[e._v(" "+e._s(e.nowClickTagList&&e.nowClickTagList.tagName?e.nowClickTagList.tagName:e.tagDataList.length>0?e.tagDataList[e.tagIndex].tagName:"")+" ")]),a("li",{staticClass:"right"},[a("span",{staticClass:"button-text",on:{click:e.tagDetailClick}},[e._v("标签详情")]),a("span",{staticClass:"button-text",on:{click:e.changeTagName}},[e._v("修改名称")]),a("span",{staticClass:"button-text",on:{click:e.tagDelete}},[e._v("删除")])])]),a("ul",{staticClass:"personHandle"},[a("li",{staticClass:"peoButton"},[a("el-button",{attrs:{type:"warning",plain:"",size:"small"},on:{click:e.addTagUser}},[e._v("添加成员")]),a("el-button",{attrs:{type:"warning",plain:"",size:"small"},on:{click:e.shiftOutClick}},[e._v("移出")])],1)])]):e._e(),0!==e.tagDataList.length||e.tagLoading?e._e():a("div",{staticClass:"noTag"},[a("i",{staticClass:"iconfont ytcrm-shengqian"}),a("el-button",{attrs:{size:"small"},on:{click:e.addTag}},[e._v("添加标签")])],1),a("common-dialog",{attrs:{dialogVal:e.dialogVal},on:{handleClose:e.handleTagClose,handleSure:function(t){return e.handleDepSure("tagForm")}}},[e.dialogVal.dialogVisible?a("div",{attrs:{slot:"dialogbody"},slot:"dialogbody"},[a("el-form",{ref:"tagForm",staticClass:"demo-ruleForm",attrs:{model:e.tagForm,rules:e.tagRole,"label-width":"80px"}},[a("el-form-item",{attrs:{label:"标签名称",prop:"tagName"}},[a("el-input",{attrs:{size:"small"},model:{value:e.tagForm.tagName,callback:function(t){e.$set(e.tagForm,"tagName",t)},expression:"tagForm.tagName"}})],1),a("el-form-item",{attrs:{label:"英文名称",prop:"tagEgn"}},[a("el-input",{attrs:{size:"small"},model:{value:e.tagForm.tagEgn,callback:function(t){e.$set(e.tagForm,"tagEgn",t)},expression:"tagForm.tagEgn"}})],1),a("el-form-item",{attrs:{label:"标签描述"}},[a("el-input",{attrs:{size:"small",type:"textarea"},model:{value:e.tagForm.tagDic,callback:function(t){e.$set(e.tagForm,"tagDic",t)},expression:"tagForm.tagDic"}})],1),a("el-form-item",{attrs:{label:"标签类型",prop:"tagType"}},[a("el-select",{attrs:{size:"small",placeholder:"请选择"},model:{value:e.tagForm.tagType,callback:function(t){e.$set(e.tagForm,"tagType",t)},expression:"tagForm.tagType"}},e._l(e.tagTypeOptions,(function(e){return a("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})})),1)],1)],1)],1):e._e()]),a("common-dialog",{attrs:{dialogVal:e.tagDetaildialogVal,footerShow:!1},on:{handleClose:e.handleDetailClose}},[a("div",{directives:[{name:"loading",rawName:"v-loading",value:e.tagDetailLoading,expression:"tagDetailLoading"}],attrs:{slot:"dialogbody"},slot:"dialogbody"},[a("div",{staticClass:"detailHeader clearfix"},[a("i",{staticClass:"left iconfont ytcrm-shengqian"}),a("span",{staticClass:"left"},[e._v(e._s(e.tagDetailInfor.tagId)+" / "+e._s(e.tagDetailInfor.tagName))])]),a("ul",{staticClass:"detailContent"},[a("li",[a("span",{staticClass:"title"},[e._v("英文名称：")]),a("span",{staticClass:"name"},[e._v(e._s(e.tagDetailInfor.tagKeyword))])]),a("li",[a("span",{staticClass:"title"},[e._v("标签描述：")]),a("span",{staticClass:"name"},[e._v(e._s(e.tagDetailInfor.tagDescription))])]),a("li",[a("span",{staticClass:"title"},[e._v("创建时间：")]),a("span",{staticClass:"name"},[e._v(e._s(new Date(e.tagDetailInfor.credate).toLocaleString()))])]),a("li",[a("span",{staticClass:"title"},[e._v("修改人员：")]),a("span",{staticClass:"name"},[e._v(e._s(e.tagDetailInfor.updateId)+"/"+e._s(e.tagDetailInfor.updateName))])])])])]),e.addTagUserdialogVal.dialogVisible?a("taggroup-user",{attrs:{addTagUserdialogVal:e.addTagUserdialogVal,nowClickTagList:e.nowClickTagList&&e.nowClickTagList.tagId?e.nowClickTagList:e.tagDataList[0]},on:{handleTagUserClose:e.handleTagUserClose,handletagUserSure:e.handletagUserSure}}):e._e()],1)},jn=[],En=function(){var e=Object(R["a"])(regeneratorRuntime.mark((function e(t){var a,i;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return a=q+"/api/Dep/getDepTree?treeType="+t.treeType,i=null,e.prev=2,e.next=5,z.get(a);case 5:if(i=e.sent,200!==i.status){e.next=8;break}return e.abrupt("return",Promise.resolve(i.data));case 8:e.next=13;break;case 10:e.prev=10,e.t0=e["catch"](2);case 13:return e.abrupt("return",i);case 14:case"end":return e.stop()}}),e,null,[[2,10]])})));return function(t){return e.apply(this,arguments)}}(),Nn=function(){var e=Object(R["a"])(regeneratorRuntime.mark((function e(t){var a,i;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return a=q+"/api/UserDep/getUserAndDep?keyword="+t.keyword+"&searchType="+t.searchType,i=null,e.prev=2,e.next=5,z.post(a);case 5:if(i=e.sent,200!==i.status){e.next=8;break}return e.abrupt("return",Promise.resolve(i.data));case 8:e.next=13;break;case 10:e.prev=10,e.t0=e["catch"](2);case 13:return e.abrupt("return",i);case 14:case"end":return e.stop()}}),e,null,[[2,10]])})));return function(t){return e.apply(this,arguments)}}(),Rn=function(){var e=Object(R["a"])(regeneratorRuntime.mark((function e(t){var a,i;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return a=q+"/api/dictionary/getDictionaries",i=null,e.prev=2,e.next=5,z.post(a,t);case 5:if(i=e.sent,200!==i.status){e.next=8;break}return e.abrupt("return",Promise.resolve(i.data));case 8:e.next=13;break;case 10:e.prev=10,e.t0=e["catch"](2);case 13:return e.abrupt("return",i);case 14:case"end":return e.stop()}}),e,null,[[2,10]])})));return function(t){return e.apply(this,arguments)}}(),Un=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"addTagGroupUser"},[a("common-dialog",{attrs:{dialogVal:e.addTagUserdialogVal,width:"70%"},on:{handleClose:e.handleTagUserClose,handleSure:e.handletagUserSure}},[e.addTagUserdialogVal.dialogVisible?a("div",{staticClass:"addTagUserDialog clearfix",attrs:{slot:"dialogbody"},slot:"dialogbody"},[a("div",{staticClass:"depTree left"},[a("div",{staticClass:"depTreeSearch"},[a("el-input",{attrs:{placeholder:"输入关键字进行过滤",size:"small",clearable:""},model:{value:e.filterDeptText,callback:function(t){e.filterDeptText=t},expression:"filterDeptText"}})],1),a("div",{directives:[{name:"loading",rawName:"v-loading",value:e.depTreeLoading,expression:"depTreeLoading"}],staticClass:"depTreeContent"},[a("el-tree",{ref:"tree",staticClass:"filter-tree",attrs:{data:e.depTreeList,props:e.treeProps,"node-key":"depId","default-expand-all":"","filter-node-method":e.filterNode,"expand-on-click-node":!1,"highlight-current":!0},on:{"node-click":e.depListClick},scopedSlots:e._u([{key:"default",fn:function(t){var i=t.node;return a("span",{staticClass:"custom-tree-node"},[a("span",[e._v(e._s(i.label))]),i.checked?a("i",{staticClass:"el-icon-check",staticStyle:{color:"#ccc","margin-left":"5px"}}):e._e()])}}],null,!1,1892221339)})],1)]),a("div",{staticClass:"userList left"},[a("div",{staticClass:"userSearch"},[a("el-input",{attrs:{placeholder:"输入关键字进行过滤",size:"small",clearable:""},on:{input:e.filterUserInput,clear:e.filterUserclear},model:{value:e.filterUserText,callback:function(t){e.filterUserText=t},expression:"filterUserText"}})],1),a("div",{directives:[{name:"loading",rawName:"v-loading",value:e.getUserListLoading,expression:"getUserListLoading"}],staticClass:"userContent"},[a("el-checkbox",{directives:[{name:"show",rawName:"v-show",value:e.userDataList.length>0,expression:"userDataList.length > 0"}],attrs:{indeterminate:e.isIndeterminate},on:{change:e.handleCheckAllChange},model:{value:e.checkAll,callback:function(t){e.checkAll=t},expression:"checkAll"}},[e._v("全选")]),a("el-checkbox-group",{on:{change:e.handleCheckedPeopleChange},model:{value:e.checkedpeople,callback:function(t){e.checkedpeople=t},expression:"checkedpeople"}},e._l(e.userDataList,(function(t){return a("el-checkbox",{key:t.userId,attrs:{label:t.userId}},[e._v(e._s(t.userId)+"/"+e._s(t.userName))])})),1)],1)]),a("div",{staticClass:"chooseUser left"},[a("ul",e._l(e.checkedpeopleDetail,(function(t,i){return a("li",{key:t.userId+i},[e._v(" "+e._s(t.userId)+" / "+e._s(t.userName)+" "),a("i",{staticClass:"el-icon-close",on:{click:function(a){return e.deleteCheckedPeo(t)}}})])})),0)])]):e._e()])],1)},Pn=[],An=function(e){Object(b["a"])(a,e);var t=Object(y["a"])(a);function a(){var e;return Object(f["a"])(this,a),e=t.apply(this,arguments),e.depTreeList=[],e.depTreeLoading=!1,e.filterDeptText="",e.filterUserText="",e.getUserListLoading=!1,e.isIndeterminate=!0,e.checkAll=!1,e.userDataList=[],e.checkedpeople=[],e.checkedpeopleDetail=[],e.oldCheckedpeople=[],e.treeProps={value:"depId",label:"depName",children:"childList"},e}return Object(v["a"])(a,[{key:"_getUserByParams",value:function(e){var t=this;this.getUserListLoading=!0,an(e).then((function(e){"200"===e.code?(t.getUserListLoading=!1,t.userDataList=e.data,t.userDataList.filter((function(e){if(e.tagId&&t.nowClickTagList.tagId||e.groupId&&2===t.nowClickTagList.depType){var a=t.oldCheckedpeople.some((function(t){return+e.userId===+t}));a||t.oldCheckedpeople.push(e.userId),t.isIndeterminate=!0;var i=t.checkedpeople.some((function(t){return+e.userId===+t}));i||t.checkedpeople.push(e.userId);var s=t.checkedpeopleDetail.some((function(t){return+e.userId===+t.userId}));s||t.checkedpeopleDetail.push({userId:e.userId,userName:e.userName})}}))):(t.$message({message:e.msg,type:"warning"}),t.getUserListLoading=!1)}))}},{key:"filterUserInput",value:function(e){var t={depId:"",tagId:this.nowClickTagList.tagId,groupId:"",keyword:e};this._getUserByParams(t),this.$refs.tree.setCurrentKey(null)}},{key:"filterUserclear",value:function(){var e=this.$refs.tree;this.depTreeList.length>0&&(e.setCurrentKey(this.depTreeList[0].depId),this.depListClick({depId:this.depTreeList[0].depId}))}},{key:"handleTagUserClose",value:function(){this.$emit("handleTagUserClose")}},{key:"handletagUserSure",value:function(){var e=yn(this.oldCheckedpeople,this.checkedpeople),t={deleteList:e,checkedpeople:this.checkedpeople,checkedpeopleDetail:this.checkedpeopleDetail};this.$emit("handletagUserSure",t)}},{key:"depListClick",value:function(e){var t={};this.nowClickTagList.tagId?t={depId:e.depId,tagId:this.nowClickTagList.tagId,groupId:"",keyword:""}:2===this.nowClickTagList.depType&&(t={depId:e.depId,tagId:"",groupId:this.nowClickTagList.depId,keyword:""}),this._getUserByParams(t)}},{key:"_getDepTree",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{treeType:1};this.depTreeLoading=!0,En(t).then((function(t){"200"===t.code?(e.depTreeLoading=!1,e.depTreeList=t.data,e.$nextTick((function(){var a=e.$refs.tree;t.data.length>0&&(a.setCurrentKey(t.data[0].depId),e.depListClick({depId:t.data[0].depId}))}))):(e.$message({message:t.msg,type:"warning"}),e.depTreeLoading=!1)}))}},{key:"filterNode",value:function(e,t){return!e||-1!==t.depName.indexOf(e)}},{key:"handleCheckAllChange",value:function(e){this.checkedpeopleDetail=[];for(var t=[],a=0;a<this.userDataList.length;a++){var i=this.userDataList[a];t.push(i.userId)}this.checkedpeople=e?t:[];for(var s=0;s<this.checkedpeople.length;s++)for(var n=this.checkedpeople[s],r=0;r<this.userDataList.length;r++){var o=this.userDataList[r];n===o.userId&&this.checkedpeopleDetail.push({userId:o.userId,userName:o.userName})}this.isIndeterminate=!1}},{key:"handleCheckedPeopleChange",value:function(e){this.checkedpeopleDetail=[];var t=e.length;this.checkAll=t===this.userDataList.length,this.isIndeterminate=t>0&&t<this.userDataList.length,this.checkedpeople=e;for(var a=0;a<this.checkedpeople.length;a++)for(var i=this.checkedpeople[a],s=0;s<this.userDataList.length;s++){var n=this.userDataList[s];i===n.userId&&this.checkedpeopleDetail.push({userId:n.userId,userName:n.userName})}}},{key:"deleteCheckedPeo",value:function(e){this.isIndeterminate=this.checkedpeople.length>0&&this.checkedpeople.length<this.userDataList.length;for(var t=0;t<this.checkedpeople.length;t++){var a=this.checkedpeople[t];+a===+e.userId&&this.checkedpeople.splice(t,1)}for(var i=0;i<this.checkedpeopleDetail.length;i++){var s=this.checkedpeopleDetail[i];+s.userId===+e.userId&&this.checkedpeopleDetail.splice(i,1)}0===this.checkedpeople.length&&(this.isIndeterminate=!1,this.checkAll=!1)}},{key:"mounted",value:function(){this._getDepTree()}},{key:"onFilterTextChanged",value:function(e){var t=this.$refs.tree;t.filter(e)}}]),a}(k["d"]);Object(C["a"])([Object(k["c"])()],An.prototype,"nowClickTagList",void 0),Object(C["a"])([Object(k["c"])()],An.prototype,"addTagUserdialogVal",void 0),Object(C["a"])([Object(k["e"])("filterDeptText")],An.prototype,"onFilterTextChanged",null),An=Object(C["a"])([Object(k["a"])({components:{commonDialog:ws}})],An);var $n=An,Vn=$n,Mn=(a("861e"),Object(c["a"])(Vn,Un,Pn,!1,null,"45603092",null)),Fn=Mn.exports,zn=function(e){Object(b["a"])(a,e);var t=Object(y["a"])(a);function a(){var e;return Object(f["a"])(this,a),e=t.apply(this,arguments),e.tagDataList=[],e.tagLoading=!1,e.tagId="",e.addTagUserdialogVal={dialogVisible:!1,title:"添加标签人员信息"},e.tagDetailInfor={},e.tagDetailLoading={},e.tagDetaildialogVal={dialogVisible:!1,title:"标签详情"},e.dialogVal={dialogVisible:!1,title:"新建标签"},e.tagForm={tagName:"",tagEgn:"",tagDic:"",tagType:"2"},e.tagRole={tagName:[{required:!0,message:"请输入标签名称",trigger:"blur"}],tagEgn:[{required:!0,message:"请输入标签英文名称",trigger:"blur"}],tagDic:[{required:!0,message:"请输入标签描述",trigger:"blur"}],tagType:[{required:!0,message:"请选择标签类型",trigger:"change"}]},e.tagTypeOptions=[{value:1,label:"流转标签"},{value:2,label:"用户身份标签"}],e.treeProps={value:"depId",label:"depName",children:"childList"},e}return Object(v["a"])(a,[{key:"filterNode",value:function(e,t){return!e||-1!==t.depName.indexOf(e)}},{key:"_getUserAndDep",value:function(e){var t=this;this.tagLoading=!0,Nn(e).then((function(e){"200"===e.code?(t.tagLoading=!1,t.tagDataList=e.data.crmUsertagDOList||[],t.$emit("getTagList",t.tagDataList)):(t.$message({message:e.msg,type:"warning"}),t.tagLoading=!1)}))}},{key:"_dltUsertag",value:function(e){var t=this;Zs(e).then((function(e){"200"===e.code?(t.$message({message:e.msg,type:"success"}),t.getUserAndDepList("")):t.$message({message:e.msg,type:"warning"})}))}},{key:"_insOrUpdUsertag",value:function(e){var t=this;Qs(e).then((function(e){"200"===e.code?(t.$message({message:e.msg,type:"success"}),t.getUserAndDepList("")):t.$message({message:e.msg,type:"warning"})}))}},{key:"addTag",value:function(){this.tagId="",this.tagForm={tagName:"",tagEgn:"",tagDic:"",tagType:"2"},this.dialogVal.title="添加标签",this.dialogVal.dialogVisible=!0}},{key:"getUserAndDepList",value:function(e){var t={keyword:e,searchType:1};this._getUserAndDep(t)}},{key:"dltUsertagInfor",value:function(){var e=[this.nowClickTagList&&this.nowClickTagList.tagId?this.nowClickTagList.tagId:this.tagDataList[0].tagId];this._dltUsertag(e)}},{key:"tagDetailClick",value:function(){var e=this;this.tagDetaildialogVal.dialogVisible=!0,this.tagDetailLoading=!0;var t={tagId:this.nowClickTagList&&this.nowClickTagList.tagId?this.nowClickTagList.tagId:this.tagDataList[0].tagId};en(t).then((function(t){"200"===t.code?(e.tagDetailLoading=!1,e.tagDetailInfor=t.data):e.$message({message:t.msg,type:"warning"})}))}},{key:"changeTagName",value:function(){this.tagId=this.nowClickTagList&&this.nowClickTagList.tagId?this.nowClickTagList.tagId:this.tagDataList[0].tagId,this.tagForm={tagName:this.nowClickTagList&&this.nowClickTagList.tagName?this.nowClickTagList.tagName:this.tagDataList[0].tagName,tagEgn:this.nowClickTagList&&this.nowClickTagList.tagKeyword?this.nowClickTagList.tagKeyword:this.tagDataList[0].tagKeyword,tagDic:this.nowClickTagList&&this.nowClickTagList.tagDescription?this.nowClickTagList.tagDescription:this.tagDataList[0].tagDescription,tagType:this.nowClickTagList&&this.nowClickTagList.tagType?this.nowClickTagList.tagType:this.tagDataList[0].tagType},this.dialogVal.title="修改标签",this.dialogVal.dialogVisible=!0}},{key:"tagDelete",value:function(){var e=this;this.$confirm("确定删除当前标签?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){e.dltUsertagInfor()}))}},{key:"handletagUserSure",value:function(e){var t=this,a={addUserIdList:e.checkedpeople,dltUserIdList:e.deleteList,tagId:this.nowClickTagList.tagId?this.nowClickTagList.tagId:this.tagDataList.length>0?this.tagDataList[0].tagId:""};tn(a).then((function(e){"200"===e.code?(t.$message({message:e.msg,type:"success"}),t.addTagUserdialogVal.dialogVisible=!1,t.$emit("getUserDetail",t.nowClickTagList.tagId?t.nowClickTagList.tagId:t.tagDataList.length>0?t.tagDataList[0].tagId:"")):t.$message({message:e.msg,type:"warning"})}))}},{key:"shiftOutClick",value:function(){if(0!==this.tableSelectList.length){var e={checkedpeople:[],deleteList:this.tableSelectList};this.handletagUserSure(e)}else this.$message({message:"请选择要移出的人员信息",type:"warning"})}},{key:"handleTagUserClose",value:function(){this.addTagUserdialogVal.dialogVisible=!1}},{key:"handleDetailClose",value:function(){this.tagDetaildialogVal.dialogVisible=!1}},{key:"handleTagClose",value:function(){this.dialogVal.dialogVisible=!1}},{key:"handleDepSure",value:function(e){var t=this;this.$refs[e].validate((function(e){if(!e)return!1;var a=[{tagId:t.tagId,tagName:t.tagForm.tagName,tagKeyword:t.tagForm.tagEgn,tagDescription:t.tagForm.tagDic,tagType:t.tagForm.tagType}];t._insOrUpdUsertag(a),t.dialogVal.dialogVisible=!1}))}},{key:"addTagUser",value:function(){this.addTagUserdialogVal.dialogVisible=!0}},{key:"mounted",value:function(){this.getUserAndDepList("")}}]),a}(Object(k["b"])(Vs));Object(C["a"])([Object(k["c"])()],zn.prototype,"tagIndex",void 0),Object(C["a"])([Object(k["c"])()],zn.prototype,"nowClickTagList",void 0),Object(C["a"])([Object(k["c"])()],zn.prototype,"tableSelectList",void 0),zn=Object(C["a"])([Object(k["a"])({components:{taggroupUser:Fn}})],zn);var Hn=zn,Kn=Hn,Bn=(a("7a5b"),Object(c["a"])(Kn,Sn,jn,!1,null,"b54efa08",null)),qn=Bn.exports,Wn=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"empChange"},[a("el-dialog",{staticClass:"dialogStyleChange empChange",attrs:{"append-to-body":"",title:"选择成员关联信息",visible:e.empChangeVisible,"before-close":e.empChangeHandleClose},on:{"update:visible":function(t){e.empChangeVisible=t}}},[a("div",{staticClass:"warp clearfix"},[a("div",{staticClass:"mainLeft left"},[a("div",{staticClass:"empSeach left"},[a("el-input",{attrs:{size:"small",placeholder:"请输入内容","prefix-icon":"el-icon-search"},on:{input:e.seachEmpInput},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.seachEmpInput(t)}},model:{value:e.seachEmpContent,callback:function(t){e.seachEmpContent=t},expression:"seachEmpContent"}})],1),a("div",{staticClass:"infinite-list-wrapper scrollbar",staticStyle:{overflow:"auto"}},[a("ul",{directives:[{name:"infinite-scroll",rawName:"v-infinite-scroll",value:e._getUserList,expression:"_getUserList"}],staticClass:"list",attrs:{"infinite-scroll-disabled":"disabled"}},e._l(this.empDataList,(function(t,i){return a("li",{key:i,staticClass:"infinite-list-item",class:t.active?"active":"",on:{click:function(a){return e.selectEmpInfor(t)}}},[a("p",[e._v(" "+e._s(t.employeename)+"（"+e._s(t.employeeid)+"） "),a("span",{staticClass:"right"},[e._v("-- "+e._s(t.opcode))])]),a("p",{staticClass:"entryInfor"},[t.zxwxcode?a("span",{staticStyle:{"margin-right":"20px"}},[e._v("微信号："+e._s(t.zxwxcode))]):e._e(),t.entryid?a("span",[e._v("核算单元ID："+e._s(t.entryid))]):e._e()])])})),0),e.loading?a("p",{staticClass:"infinite-p"},[a("i",{staticClass:"el-icon-loading"})]):e._e(),e.noMore?a("p",[e._v("没有更多了")]):e._e()])]),a("div",{staticClass:"mainRight right"},[a("ul",[a("li",{staticClass:"header"},[e._v("已选择的人员信息")]),e._l(e.chooseEmpList,(function(t,i){return a("li",{key:i,staticClass:"empName"},[e._v(" "+e._s(t.employeename)+"（"+e._s(t.employeeid)+"） "),a("i",{staticClass:"el-icon-close",on:{click:function(a){return e.deleteChooseEmp(t)}}})])}))],2)])]),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{size:"small"},on:{click:e.empChangeHandleClose}},[e._v("取 消")]),a("el-button",{attrs:{size:"small",type:"warning"},on:{click:e.empChooseClick}},[e._v("确 定")])],1)])],1)},Jn=[],Yn=function(e){Object(b["a"])(a,e);var t=Object(y["a"])(a);function a(){var e;return Object(f["a"])(this,a),e=t.apply(this,arguments),e.seachEmpContent="",e.empDataList=[],e.chooseEmpList=[],e.pageSize=20,e.page=1,e.loading=!1,e.noMore=!1,e.iTime=null,e}return Object(v["a"])(a,[{key:"deleteChooseEmp",value:function(e){var t=this;this.empDataList.forEach((function(a){a.employeeid===e.employeeid&&t.$set(a,"active",!1)})),this.chooseEmpList.forEach((function(a,i){a.employeeid===e.employeeid&&t.chooseEmpList.splice(i,1)}))}},{key:"empChangeHandleClose",value:function(){this.$emit("empChangeHandleClose")}},{key:"empChooseClick",value:function(){var e=yn(this.personDetailInfor.pubEmpList?this.personDetailInfor.pubEmpList:[],this.chooseEmpList),t={dltEmpIdList:e,addEmpIdList:this.chooseEmpList,userIdList:[this.personDetailInfor.userId]};this.$emit("empChooseClick",t)}},{key:"_getUserList",value:function(){var e=Object(R["a"])(regeneratorRuntime.mark((function e(){var t,a,i,s=this,n=arguments;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t=n.length>0&&void 0!==n[0]?n[0]:[],1===this.page&&(this.empDataList=[]),this.loading=!0,a={empIdList:t,keyword:this.seachEmpContent,condition:"",inOutFlag:"0",pageNum:t.length>0?1:this.page,pageSize:this.pageSize},e.next=6,un(a);case 6:if(i=e.sent,!i.success){e.next=20;break}if("200"!==i.code){e.next=17;break}if(!(t.length>0)){e.next=11;break}return e.abrupt("return",i.data.pubEmpList);case 11:this.loading=!1,this.empDataList=this.empDataList.concat(i.data.pubEmpList),this.chooseEmpList.length>0&&this.empDataList.forEach((function(e){s.chooseEmpList.forEach((function(t){e.employeeid===t.employeeid&&s.$set(e,"active",!0)}))})),this.page++,e.next=18;break;case 17:this.$message({message:i.msg,type:"warning"});case 18:e.next=21;break;case 20:this.$message.error(i.msg);case 21:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},{key:"seachEmpInput",value:function(){var e=this;this.$cancelAxios(["list"]),clearTimeout(this.iTime),this.iTime=setTimeout(Object(R["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:e.page=1,e._getUserList();case 2:case"end":return t.stop()}}),t)}))),350)}},{key:"selectEmpInfor",value:function(e){var t=this;e.active?(this.$set(e,"active",!1),this.chooseEmpList.forEach((function(a,i){a.employeeid===e.employeeid&&t.chooseEmpList.splice(i,1)}))):(this.$set(e,"active",!0),this.chooseEmpList.push({employeeid:e.employeeid,employeename:e.employeename,opcode:e.opcode}))}},{key:"onChooseEmpListChanged",value:function(e){this.chooseEmpList=e||[]}},{key:"mounted",value:function(){this.personDetailInfor.pubEmpList&&(this.chooseEmpList=JSON.parse(JSON.stringify(this.personDetailInfor.pubEmpList)))}},{key:"disabled",get:function(){return this.loading||this.noMore}}]),a}(k["d"]);Object(C["a"])([Object(k["c"])()],Yn.prototype,"empChangeVisible",void 0),Object(C["a"])([Object(k["c"])()],Yn.prototype,"personDetailInfor",void 0),Object(C["a"])([Object(k["c"])()],Yn.prototype,"empChooseList",void 0),Object(C["a"])([Object(k["c"])()],Yn.prototype,"addPersonVisible",void 0),Object(C["a"])([Object(k["e"])("chooseEmpList",{deep:!0,immediate:!0})],Yn.prototype,"onChooseEmpListChanged",null),Yn=Object(C["a"])([k["a"]],Yn);var Gn=Yn,Xn=Gn,Qn=(a("6c6a"),Object(c["a"])(Xn,Wn,Jn,!1,null,null,null)),Zn=Qn.exports,er=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"personDetail"},[a("common-dialog",{attrs:{dialogVal:e.personDetailDialog,width:"50%"},on:{handleClose:e.personDetailHandleClose,handleSure:e.personDetailHandleSure}},[a("div",{attrs:{slot:"dialogbody"},slot:"dialogbody"},[a("div",{staticClass:"editOrSeePerson"},[a("ul",{staticClass:"addPersonHeader"},[a("li",{staticClass:"infor"},[a("span",{staticClass:"empName"},[e._v(e._s(e.personDetailObj.userCode))]),a("i",{staticClass:"el-icon-s-custom",class:1===e.personDetailObj.gender?"man":"woman"})]),a("li",{staticClass:"wxInfor"},[a("span",{staticClass:"title"},[e._v("微信号：")]),a("span",{staticClass:"value"},[e._v(e._s(e.personDetailObj.wxCode))])]),a("li",{directives:[{name:"show",rawName:"v-show",value:0===e.btnTabStatus,expression:"btnTabStatus === 0"}],staticClass:"operate"},[a("span",{on:{click:e.editingClick}},[e._v("编辑")])])]),a("ul",{staticClass:"otherInfor"},[a("li",[a("span",{staticClass:"title"},[e._v("真实姓名：")]),a("span",{staticClass:"value"},[e._v(" "+e._s(e.personDetailObj.userName)+" ")])]),a("li",[a("span",{staticClass:"title"},[e._v("手机号：")]),a("span",{staticClass:"value"},[e._v(" "+e._s(e.personDetailObj.phoneNum)+" ")])]),a("li",[a("span",{staticClass:"title"},[e._v("邮箱：")]),a("span",{staticClass:"value"},[e._v(" "+e._s(e.personDetailObj.emailAddress)+" ")])]),a("li",{staticClass:"clearfix"},[a("span",{staticClass:"title",staticStyle:{"line-height":"25px"}},[e._v("部门：")]),e._l(e.personDetailObj.crmDepList,(function(t,i){return a("span",{key:i,staticClass:"value departInforShow left"},[e._v(" "+e._s(t.depId)+" / "+e._s(t.depName)+" "),t.depId===e.personDetailObj.userMainDepNum?a("i",[e._v("主")]):e._e()])})),a("span",{directives:[{name:"show",rawName:"v-show",value:!e.personDetailObj.crmDepList||0===e.personDetailObj.crmDepList.length,expression:"!personDetailObj.crmDepList || personDetailObj.crmDepList.length === 0"}],staticStyle:{color:"#AAA","line-height":"25px"}},[e._v(" 暂无部门信息 ")])],2),a("li",{staticClass:"clearfix"},[a("span",{staticClass:"title",staticStyle:{"line-height":"25px"}},[e._v("标签：")]),e._l(e.personDetailObj.crmTagList,(function(t,i){return a("span",{directives:[{name:"show",rawName:"v-show",value:e.personDetailObj.crmTagList&&e.personDetailObj.crmTagList.length>0,expression:"personDetailObj.crmTagList && personDetailObj.crmTagList.length > 0"}],key:i,staticClass:"value departInforShow left"},[e._v(" "+e._s(t.tagId)+"/"+e._s(t.tagName)+" ")])})),a("span",{directives:[{name:"show",rawName:"v-show",value:!e.personDetailObj.crmTagList||0===e.personDetailObj.crmTagList.length,expression:"!personDetailObj.crmTagList || personDetailObj.crmTagList.length === 0"}],staticStyle:{color:"#AAA","line-height":"25px"}},[e._v(" 暂无标签信息 ")])],2),a("li",{staticClass:"clearfix"},[a("span",{staticClass:"title",staticStyle:{"line-height":"25px"}},[e._v("关联人员：")]),e._l(e.personDetailObj.pubEmpList,(function(t,i){return a("span",{directives:[{name:"show",rawName:"v-show",value:e.personDetailObj.pubEmpList&&e.personDetailObj.pubEmpList.length>0,expression:"personDetailObj.pubEmpList && personDetailObj.pubEmpList.length > 0"}],key:i,staticClass:"value departInforShow left"},[e._v(" "+e._s(t.employeeid)+"/"+e._s(t.employeename)+" ")])})),a("span",{directives:[{name:"show",rawName:"v-show",value:!e.personDetailObj.pubEmpList||0===e.personDetailObj.pubEmpList.length,expression:"!personDetailObj.pubEmpList || personDetailObj.pubEmpList.length === 0"}],staticStyle:{color:"#AAA","line-height":"25px"}},[e._v(" 暂无人员关联信息 ")])],2),a("li",{staticClass:"clearfix"},[a("span",{staticClass:"title",staticStyle:{"line-height":"25px"}},[e._v("角色信息：")]),e._l(e.personDetailObj.crmRoleList,(function(t,i){return a("span",{directives:[{name:"show",rawName:"v-show",value:e.personDetailObj.crmRoleList&&e.personDetailObj.crmRoleList.length>0,expression:"personDetailObj.crmRoleList && personDetailObj.crmRoleList.length > 0"}],key:i,staticClass:"value departInforShow left"},[e._v(" "+e._s(t.roleId)+"/"+e._s(t.roleName)+" ")])})),a("span",{directives:[{name:"show",rawName:"v-show",value:!e.personDetailObj.crmRoleList||0===e.personDetailObj.crmRoleList.length,expression:"!personDetailObj.crmRoleList || personDetailObj.crmRoleList.length === 0"}],staticStyle:{color:"#AAA","line-height":"25px"}},[e._v(" 暂无角色信息 ")])],2)])])])]),e.editingPersondialogVal.dialogVisible?a("add-person",{attrs:{departChooseList:e.departChooseList,addPersondialogVal:e.editingPersondialogVal,editingUserDetail:e.personDetailObj},on:{addPersonClose:e.editingPersonClose,addPersonSure:e.editingPersonSure}}):e._e()],1)},tr=[],ar=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"addPerson"},[a("common-dialog",{attrs:{dialogVal:e.addPersondialogVal,width:"50%"},on:{handleClose:e.addPersonClose,handleSure:function(t){return e.addPersonSure("addPerRef")}}},[e.addPersondialogVal.dialogVisible?a("div",{attrs:{slot:"dialogbody"},slot:"dialogbody"},[a("el-form",{ref:"addPerRef",staticClass:"demo-ruleForm clearfix",attrs:{model:e.personForm,rules:e.personRules,"label-width":"80px"}},[a("div",{staticClass:"content left"},[a("el-form-item",{attrs:{label:"登录名",prop:"userCode"}},[a("el-input",{attrs:{size:"small"},model:{value:e.personForm.userCode,callback:function(t){e.$set(e.personForm,"userCode",t)},expression:"personForm.userCode"}})],1),a("el-form-item",{attrs:{label:"真实姓名",prop:"userName"}},[a("el-input",{attrs:{size:"small"},model:{value:e.personForm.userName,callback:function(t){e.$set(e.personForm,"userName",t)},expression:"personForm.userName"}})],1),a("el-form-item",{attrs:{label:"手机号",prop:"phoneNum"}},[a("el-input",{attrs:{size:"small"},model:{value:e.personForm.phoneNum,callback:function(t){e.$set(e.personForm,"phoneNum",t)},expression:"personForm.phoneNum"}})],1),a("el-form-item",{attrs:{label:"座机"}},[a("el-input",{attrs:{size:"small"},model:{value:e.personForm.telNum,callback:function(t){e.$set(e.personForm,"telNum",t)},expression:"personForm.telNum"}})],1)],1),a("div",{staticClass:"content right"},[a("el-form-item",{attrs:{label:"性别"}},[a("el-radio-group",{model:{value:e.personForm.gender,callback:function(t){e.$set(e.personForm,"gender",t)},expression:"personForm.gender"}},[a("el-radio",{attrs:{label:1}},[e._v("男")]),a("el-radio",{attrs:{label:2}},[e._v("女")])],1)],1),a("el-form-item",{attrs:{label:"微信号",prop:"wxCode"}},[a("el-input",{attrs:{size:"small"},model:{value:e.personForm.wxCode,callback:function(t){e.$set(e.personForm,"wxCode",t)},expression:"personForm.wxCode"}})],1),a("el-form-item",{attrs:{label:"邮箱"}},[a("el-input",{attrs:{size:"small",type:"email"},model:{value:e.personForm.emailAddress,callback:function(t){e.$set(e.personForm,"emailAddress",t)},expression:"personForm.emailAddress"}})],1),a("el-form-item",{attrs:{label:"上级领导"}},[a("el-select",{ref:"userLeaderSelect",attrs:{size:"small",filterable:"",placeholder:"请选择上级领导",clearable:""},on:{change:e.userLeaderChange},model:{value:e.personForm.userLeaderId,callback:function(t){e.$set(e.personForm,"userLeaderId",t)},expression:"personForm.userLeaderId"}},e._l(e.userList,(function(t){return a("el-option",{key:t.userId,attrs:{label:t.userName,value:t.userId}},[a("span",{staticStyle:{float:"left"}},[e._v(e._s(t.userId)+" / "+e._s(t.userName))]),a("span",{staticStyle:{float:"right",color:"#8492a6","font-size":"13px"}},[e._v(e._s(t.userCode))])])})),1)],1)],1),a("div",{staticClass:"oneLine left"},[a("el-form-item",{staticClass:"left",attrs:{label:"部门信息"}},[e._l(e.depchooseList,(function(t,i){return a("span",{directives:[{name:"show",rawName:"v-show",value:e.depchooseList,expression:"depchooseList"}],key:i,staticClass:"departInforShow left"},[e._v(" "+e._s(t.depName)+" "),t.isMain?a("i",[e._v("主")]):e._e()])})),a("li",{staticClass:"departInforOperate left"},[a("span",{on:{click:e.departClick}},[e._v(e._s(e.depchooseList&&e.depchooseList.length>0?"修改":"点击添加部门信息"))])])],2)],1),a("el-form-item",{staticClass:"left",staticStyle:{width:"100%"},attrs:{label:"角色信息",prop:"roleId"}},[a("el-select",{attrs:{size:"small",filterable:"",multiple:"",placeholder:"试试搜索"},model:{value:e.personForm.roleId,callback:function(t){e.$set(e.personForm,"roleId",t)},expression:"personForm.roleId"}},e._l(e.sysRole.concat(e.leaderRole).concat(e.baseRole),(function(t){return a("el-option",{key:t.roleId,attrs:{label:t.roleName,value:t.roleId}},[a("span",{staticStyle:{float:"left"}},[e._v(e._s(t.roleId)+" / "+e._s(t.roleName))])])})),1)],1),a("el-form-item",{staticClass:"left",staticStyle:{width:"100%"},attrs:{label:"人员关联"}},[a("select-options",{ref:"userselectOption",attrs:{changeValue:e.personForm.pm4PersonConcat,multiple:!0,interFaceName:"getPubEmpList",selectOptions:e.userOptions,reserveKeyword:!0},on:{getDataList:e._getPubEmpList,handleChange:e.userhandleChange}})],1)],1)],1):e._e()]),e.departChangedialogVal.dialogVisible?a("depart-change",{attrs:{departChooseList:e.depchooseList,departChangedialogVal:e.departChangedialogVal},on:{departChangeHandleClose:e.departChangeHandleClose,departChangeHandleSure:e.departChangeHandleSure}}):e._e()],1)},ir=[],sr=(a("7db0"),function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"departChangeWarp"},[a("common-dialog",{attrs:{dialogVal:e.departChangedialogVal,width:"50%"},on:{handleClose:e.departChangeHandleClose,handleSure:e.departChangeHandleSure}},[a("div",{staticClass:"departChange dialogStyleChange",attrs:{slot:"dialogbody"},slot:"dialogbody"},[a("div",{staticClass:"warp clearfix"},[a("div",{staticClass:"mainLeft left"},[a("div",{staticClass:"input"},[a("el-input",{attrs:{placeholder:"输入关键字进行过滤",size:"small"},model:{value:e.filterText,callback:function(t){e.filterText=t},expression:"filterText"}})],1),a("div",{directives:[{name:"loading",rawName:"v-loading",value:e.treeloading,expression:"treeloading"}],staticClass:"tree scrollbar"},[a("el-tree",{ref:"tree",staticClass:"filter-tree",attrs:{data:e.depTreeList,props:e.treeProps,"node-key":"depId","default-expand-all":"","filter-node-method":e.filterNode,"expand-on-click-node":!1,"check-on-click-node":!0,"highlight-current":!0,"check-strictly":!0},on:{"node-click":e.depListClick},scopedSlots:e._u([{key:"default",fn:function(t){var i=t.node;return a("span",{staticClass:"custom-tree-node"},[a("span",[e._v(e._s(i.label))]),i.checked?a("i",{staticClass:"el-icon-check",staticStyle:{color:"#ccc","margin-left":"5px"}}):e._e()])}}])})],1)]),a("div",{staticClass:"mainRight right"},[a("ul",[a("li",{staticClass:"header"},[e._v("已选择的部门")]),e._l(e.depList,(function(t,i){return a("li",{key:i,staticClass:"departName"},[e._v(" "+e._s(t.depName)+" "),t.isMain?e._e():a("span",{staticClass:"chooseMain",on:{click:function(a){return e.chooseMainClick(t,i)}}},[e._v("设置为主部门")]),t.isMain?a("span",{staticClass:"right"},[e._v("主")]):e._e(),a("i",{staticClass:"el-icon-close",on:{click:function(a){return e.deleteChooseDepart(t,i)}}})])}))],2)])])])])],1)}),nr=[],rr=function(e){Object(b["a"])(a,e);var t=Object(y["a"])(a);function a(){var e;return Object(f["a"])(this,a),e=t.apply(this,arguments),e.depList=[],e.hasMain=!1,e.treeProps={value:"depId",label:"depName",children:"childList"},e.depTreeList=[],e.treeloading=!1,e.filterText="",e}return Object(v["a"])(a,[{key:"_getDepTree",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{treeType:1};this.treeloading=!0,En(t).then((function(t){"200"===t.code?(e.treeloading=!1,e.depTreeList=t.data):e.$message({message:t.msg,type:"warning"})}))}},{key:"filterNode",value:function(e,t){return!e||-1!==t.depName.indexOf(e)}},{key:"depListClick",value:function(e){for(var t=0;t<this.depList.length;t++){var a=this.depList[t];if(a.depId===e.depId)return a.isMain&&this.depList[t+1]&&this.$set(this.depList[t+1],"isMain",!0),void this.depList.splice(t,1)}0===this.depList.length?this.addPersonVisible?this.depList.push({depName:e.depName,depId:e.depId,isMain:!1}):this.depList.push({depName:e.depName,depId:e.depId,isMain:!0}):this.depList.push({depName:e.depName,depId:e.depId,isMain:!1})}},{key:"departChangeHandleSure",value:function(){var e;e=this.departChooseList&&this.departChooseList.length>0?yn(this.departChooseList,this.depList,!0,"depId"):[];var t={depList:this.depList,deleteList:e};this.$emit("departChangeHandleSure",t)}},{key:"departChangeHandleClose",value:function(){this.$emit("departChangeHandleClose")}},{key:"chooseMainClick",value:function(e,t){for(var a=0;a<this.depList.length;a++)this.depList[a].isMain&&this.$set(this.depList[a],"isMain",!1);this.$set(e,"isMain",!0),this.$set(this.depList,t,e)}},{key:"deleteChooseDepart",value:function(e,t){var a=this,i=[];e.isMain?this.depList.forEach((function(t,i){t.depId===e.depId&&a.depList.splice(i,1),a.depList[0]&&a.$set(a.depList[0],"isMain",!0)})):this.depList.splice(t,1),this.depList.forEach((function(e){i.push(e.depId)})),this.changeTreeStatus(i,!0)}},{key:"changeTreeStatus",value:function(e,t){var a=this.$refs.tree;a.setCheckedKeys(e,t)}},{key:"init",value:function(){var e=this;this.depList=[],this.departChooseList.length>0&&(this.depList=JSON.parse(JSON.stringify(this.departChooseList))),this.hasMain=this.depList.some((function(e){return e.isMain}));var t=[];this.depList.forEach((function(e){t.push(e.depId)})),this.$nextTick((function(){e.changeTreeStatus(t,!0)}))}},{key:"mounted",value:function(){this._getDepTree(),this.init()}},{key:"onFilterTextChanged",value:function(e){var t=this.$refs.tree;t.filter(e)}}]),a}(k["d"]);Object(C["a"])([Object(k["c"])()],rr.prototype,"departChangedialogVal",void 0),Object(C["a"])([Object(k["c"])()],rr.prototype,"departChooseList",void 0),Object(C["a"])([Object(k["c"])({default:!1})],rr.prototype,"addPersonVisible",void 0),Object(C["a"])([Object(k["e"])("filterText")],rr.prototype,"onFilterTextChanged",null),rr=Object(C["a"])([Object(k["a"])({components:{commonDialog:ws}})],rr);var or=rr,lr=or,cr=(a("26ff"),Object(c["a"])(lr,sr,nr,!1,null,"222cff7e",null)),ur=cr.exports,dr=function(e){Object(b["a"])(a,e);var t=Object(y["a"])(a);function a(){var e;return Object(f["a"])(this,a),e=t.apply(this,arguments),e.depchooseList=[],e.departChangedialogVal={dialogVisible:!1,title:"选择成员所属部门"},e.userList=[],e.personForm={userId:"",userCode:"",userName:"",userType:1,wxCode:"",emailAddress:"",gender:1,phoneNum:"",telNum:"",roleId:"",userLeaderId:"",userLeaderName:"",userMainDepName:"",userMainDepNum:"",pm4PersonConcat:""},e.personRules={userCode:[{required:!0,message:"请输入用户名称",trigger:"blur"}],userName:[{required:!0,message:"请输入真实姓名",trigger:"blur"}],wxCode:[{required:!0,message:"请输入微信号",trigger:"blur"}],emailAddress:[{required:!0,message:"请输入邮箱地址",trigger:"blur"}],phoneNum:[{required:!0,message:"请输入电话号码",trigger:"blur"}],telNum:[{required:!0,message:"请输入座机",trigger:"blur"}],roleId:[{required:!0,message:"请选择用户角色",trigger:"blur"}],userLeaderId:[{required:!0,message:"请选择上级领导",trigger:"change"}],userMainDepNum:[{required:!0,message:"请选择主部门",trigger:"blur"}]},e.depTreeList=[],e.sysRole=[],e.leaderRole=[],e.baseRole=[],e.pm4PersonList=[],e.userOptions=[],e}return Object(v["a"])(a,[{key:"addPersonClose",value:function(){this.$emit("addPersonClose")}},{key:"addPersonSure",value:function(e){var t=this;this.$refs[e].validate((function(e){if(!e)return!1;var a={personForm:t.personForm,departChooseList:t.depchooseList};t.$emit("addPersonSure",a)}))}},{key:"_getUserAndDep",value:function(){var e=this,t={keyword:"",searchType:0};Nn(t).then((function(t){"200"===t.code?e.userList=t.data.crmUserList:e.$message({message:t.msg,type:"warning"})}))}},{key:"userLeaderChange",value:function(e){var t=null;t=this.userList.find((function(t){return t.userId===e})),this.personForm.userLeaderName=t.userName,this.personForm.userLeaderId=e}},{key:"departClick",value:function(){this.departChangedialogVal.dialogVisible=!0}},{key:"departChangeHandleClose",value:function(){this.departChangedialogVal.dialogVisible=!1}},{key:"departChangeHandleSure",value:function(e){this.depchooseList=Object(p["a"])(e.depList),this.departChangedialogVal.dialogVisible=!1}},{key:"userhandleChange",value:function(e){this.personForm.pm4PersonConcat=e}},{key:"_getRoles",value:function(e){var t=this,a={roleType:e};ti(a).then((function(a){if("200"===a.code)switch(e){case 1:t.sysRole=a.data;break;case 2:t.leaderRole=a.data;break;case 3:t.baseRole=a.data;break;default:break}}))}},{key:"_getPubEmpList",value:function(){var e=Object(R["a"])(regeneratorRuntime.mark((function e(t){var a,i,s,n,r;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(a=this.$refs.userselectOption,1===t.page&&(this.userOptions=[]),!t.hasNextPage||t.loading){e.next=12;break}return a.loadingChange(),i={pageNum:t.page,pageSize:t.pageSize,keyword:t.condition,empIdList:[]},e.next=9,un(i);case 9:if(s=e.sent,s.success){for(a.loadingChange(),a.firstloadingChange(),n=0;n<s.data.pubEmpList.length;n++)r=s.data.pubEmpList[n],this.userOptions.push({label:r.employeename,value:r.employeeid,opcode:r.opcode,success:s.success});s.data.hasNextPage||a.hasNextPageChange(),a.pageChange()}case 12:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}()},{key:"mounted",value:function(){if(this._getUserAndDep(),this._getRoles(1),this._getRoles(2),this._getRoles(3),this.editingUserDetail){for(var e=[],t=0;t<this.editingUserDetail.crmRoleList.length;t++){var a=this.editingUserDetail.crmRoleList[t];e.push(a.roleId)}this.personForm={userId:this.editingUserDetail.userId,userCode:this.editingUserDetail.userCode,userName:this.editingUserDetail.userName,userType:1,wxCode:this.editingUserDetail.wxCode,emailAddress:this.editingUserDetail.emailAddress,gender:this.editingUserDetail.gender,phoneNum:this.editingUserDetail.phoneNum,telNum:this.editingUserDetail.telNum,roleId:e,userLeaderId:this.editingUserDetail.userLeaderId,userLeaderName:this.editingUserDetail.userLeaderName,userMainDepName:this.editingUserDetail.userMainDepName,userMainDepNum:this.editingUserDetail.userMainDepNum,pm4PersonConcat:this.editingUserDetail.pubEmpList};for(var i=0;i<this.editingUserDetail.crmDepList.length;i++){var s=this.editingUserDetail.crmDepList[i];this.editingUserDetail.userMainDepNum===s.depId?this.depchooseList.push({depId:s.depId,depName:s.depName,isMain:!0}):this.depchooseList.push({depId:s.depId,depName:s.depName,isMain:!1})}}else this.depchooseList=JSON.parse(JSON.stringify(this.departChooseList))}}]),a}(k["d"]);Object(C["a"])([Object(k["c"])()],dr.prototype,"addPersondialogVal",void 0),Object(C["a"])([Object(k["c"])()],dr.prototype,"departChooseList",void 0),Object(C["a"])([Object(k["c"])()],dr.prototype,"editingUserDetail",void 0),dr=Object(C["a"])([Object(k["a"])({components:{commonDialog:ws,departChange:ur,selectOptions:_n}})],dr);var pr=dr,hr=pr,mr=(a("53b2"),Object(c["a"])(hr,ar,ir,!1,null,"735bdba5",null)),gr=mr.exports,fr=function(e){Object(b["a"])(a,e);var t=Object(y["a"])(a);function a(){var e;return Object(f["a"])(this,a),e=t.apply(this,arguments),e.departChooseList=[],e.editingPersondialogVal={dialogVisible:!1,title:"编辑成员"},e}return Object(v["a"])(a,[{key:"personDetailHandleClose",value:function(){this.$emit("personDetailHandleClose")}},{key:"personDetailHandleSure",value:function(){this.$emit("personDetailHandleSure")}},{key:"editingClick",value:function(){this.editingPersondialogVal.dialogVisible=!0}},{key:"editingPersonClose",value:function(){this.editingPersondialogVal.dialogVisible=!1}},{key:"editingPersonSure",value:function(e){for(var t="",a="",i=[],s=0;s<e.departChooseList.length;s++){var n=e.departChooseList[s];n.isMain&&(t=n.depId,a=n.depName),i.push(n.depId)}var r={userId:e.personForm.userId,userCode:e.personForm.userCode,userName:e.personForm.userName,gender:e.personForm.gender,addRoleIdList:e.personForm.roleId,phoneNum:e.personForm.phoneNum,telNum:e.personForm.telNum,userLeaderId:e.personForm.userLeaderId,userLeaderName:e.personForm.userLeaderName,wxCode:e.personForm.wxCode,addDepIdList:i,userMainDepNum:t,userMainDepName:a,addEmpIdList:e.personForm.pm4PersonConcat};this._editUser(r)}},{key:"_editUser",value:function(e){var t=this;mn(e).then((function(e){"200"===e.code?(t.$message({message:e.msg,type:"success"}),t.editingPersondialogVal.dialogVisible=!1,t.personDetailHandleClose()):t.$message({message:e.msg,type:"warning"})}))}},{key:"mounted",value:function(){}}]),a}(k["d"]);Object(C["a"])([Object(k["c"])()],fr.prototype,"personDetailDialog",void 0),Object(C["a"])([Object(k["c"])()],fr.prototype,"personDetailObj",void 0),Object(C["a"])([Object(k["c"])({type:Number,default:0})],fr.prototype,"btnTabStatus",void 0),fr=Object(C["a"])([Object(k["a"])({components:{commonDialog:ws,addPerson:gr}})],fr);var vr=fr,br=vr,yr=(a("2d8a"),Object(c["a"])(br,er,tr,!1,null,"f7af6566",null)),Cr=yr.exports,kr=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"setPersonRole"},[a("common-dialog",{attrs:{dialogVal:e.setPersonRolesdialogVal,width:"50%"},on:{handleClose:e.setPersonRolesClose,handleSure:e.setPersonRolesSure}},[a("div",{staticClass:"setRole",attrs:{slot:"dialogbody"},slot:"dialogbody"},[a("div",{staticClass:"warp left"},[a("div",{staticClass:"select"},[a("el-select",{attrs:{size:"small",filterable:"",placeholder:"请选择"},on:{change:e.selectChange},model:{value:e.dictionaries,callback:function(t){e.dictionaries=t},expression:"dictionaries"}},e._l(e.getDictionariesList,(function(t){return a("el-option",{key:t.DIC_SELECT_ID,attrs:{label:t.DIC_SELECT_NAME,value:t.DIC_SELECT_ID}},[a("span",{staticStyle:{float:"left"}},[e._v(e._s(t.DIC_SELECT_ID)+"/"+e._s(t.DIC_SELECT_NAME))])])})),1)],1),a("div",{staticClass:"content"},[a("ul",e._l(e.roleList,(function(t,i){return a("li",{key:i,class:t.checked?"active":"",on:{click:function(a){return e.changeRole(t)}}},[e._v(" "+e._s(t.roleId)+"/"+e._s(t.roleName)+" "),t.checked?a("i",{staticClass:"el-icon-check",staticStyle:{color:"#ccc","margin-left":"5px"}}):e._e()])})),0)])]),a("div",{staticClass:"warp right",staticStyle:{"border-left":"1px solid #eee",height:"520px"}},[a("ul",{staticClass:"content"},e._l(e.checkList,(function(t,i){return a("li",{key:i},[e._v(" "+e._s(t.roleId)+"/"+e._s(t.roleName)+" "),a("i",{staticClass:"el-icon-close",on:{click:function(a){return e.deleteRole(t)}}})])})),0)])])])],1)},Dr=[],wr=function(e){Object(b["a"])(a,e);var t=Object(y["a"])(a);function a(){var e;return Object(f["a"])(this,a),e=t.apply(this,arguments),e.getDictionariesList=[],e.dictionaries=1,e.roleList=[],e.checkList=[],e.pageSize=200,e.page=1,e}return Object(v["a"])(a,[{key:"setPersonRolesClose",value:function(){this.$emit("setPersonRolesClose")}},{key:"setPersonRolesSure",value:function(){this.$emit("setPersonRolesSure",this.checkList)}},{key:"_getDictionaries",value:function(){var e=this,t={typeId:6,keyword:"",pageSize:this.pageSize,pageNum:this.page};yi(t).then((function(t){"200"===t.code?e.getDictionariesList=t.data.list:e.$message({message:t.msg,type:"warning"})}))}},{key:"_getRoles",value:function(e){var t=this,a={roleType:e};ti(a).then((function(e){"200"===e.code&&(t.roleList=e.data)}))}},{key:"changeRole",value:function(e){this.checkList=[],e.checked?this.$set(e,"checked",!1):this.$set(e,"checked",!0);for(var t=0;t<this.roleList.length;t++){var a=this.roleList[t];a.checked&&this.checkList.push(a)}}},{key:"selectChange",value:function(e){this._getRoles(e)}},{key:"deleteRole",value:function(e){for(var t=0;t<this.checkList.length;t++){var a=this.checkList[t];a.roleId===e.roleId&&this.checkList.splice(t,1)}for(var i=0;i<this.roleList.length;i++){var s=this.roleList[i];s.roleId===e.roleId&&this.$set(this.roleList[i],"checked",!1)}}},{key:"mounted",value:function(){this.checkList=JSON.parse(JSON.stringify(this.getCheckList)),this._getDictionaries(),this._getRoles(1)}},{key:"onchangeroleListChanged",value:function(e){if(e.length>0)for(var t=0;t<e.length;t++)for(var a=e[t],i=0;i<this.checkList.length;i++){var s=this.checkList[i];s.roleId===a.roleId&&this.$set(a,"checked",!0)}}}]),a}(k["d"]);Object(C["a"])([Object(k["c"])()],wr.prototype,"setPersonRolesdialogVal",void 0),Object(C["a"])([Object(k["c"])({default:[]})],wr.prototype,"getCheckList",void 0),Object(C["a"])([Object(k["e"])("roleList")],wr.prototype,"onchangeroleListChanged",null),wr=Object(C["a"])([Object(k["a"])({components:{commonDialog:ws}})],wr);var _r=wr,Ir=_r,Lr=(a("d2f9"),Object(c["a"])(Ir,kr,Dr,!1,null,"7cc9d88e",null)),Tr=Lr.exports,Or=function(e){Object(b["a"])(a,e);var t=Object(y["a"])(a);function a(){var e;return Object(f["a"])(this,a),e=t.apply(this,arguments),e.title={iconfont:"iconfont ytcrm-bumenrenyuan",content:"部门人员关系管理"},e.placeholder="人员名称|ID",e.activeTextColor="#fc923f",e.seachPlace="center",e.seachPlaceHolder="搜索成员、部门",e.tabList=["组织架构","标签","小组"],e.tableDataList=[],e.tableDataLoading=!1,e.columns=[{prop:"userId",label:"用户信息",align:"left",width:"120px",formatter:function(e){return"<span>".concat(e.userId,"/").concat(e.userName,"</span>")}},{prop:"phoneNum",label:"手机号",align:"left",minWidth:"120px",formatter:function(e){return"<span>".concat(e.phoneNum,"</span>")}},{prop:"fullDepName",label:"主部门信息",align:"left",minWidth:"220px",showoverflowAndCopy:!0,formatter:function(e){return'<span style="display: block;" class="slh">'.concat(e.fullDepName,"</span>")}},{prop:"pubEmpList",label:"PM4账号关联",align:"left",minWidth:"180px",showoverflow:!0,selectOptions:[{value:1,label:"正式"},{value:2,label:"作废"}],formatter:function(e){var t="";if(e.pubEmpList)for(var a=0;a<e.pubEmpList.length;a++){var i=e.pubEmpList[a];t+="".concat(i.employeeid,"/").concat(i.employeename,"（").concat(i.opcode,"）"),a===e.pubEmpList.length-1||(t+="，")}else t='<span style="display: block;text-align:center">--</span>';return"<span>".concat(t,"</span>")}},{prop:"crmTagList",label:"标签信息",align:"left",minWidth:"220px",showoverflow:!0,formatter:function(e){for(var t="",a=0;a<e.crmTagList.length;a++){var i=e.crmTagList[a];t+=i.tagId+"/"+i.tagName,a===e.crmTagList.length-1||(t+="，")}return t+="","<span>".concat(t,"</span>")}},{prop:"crmGroupList",label:"小组信息",align:"left",minWidth:"220px",showoverflow:!0,formatter:function(e){if(0===e.crmGroupList.length)return'<span style="text-align: center;display: block;"> -- </span>';for(var t="",a=0;a<e.crmGroupList.length;a++){var i=e.crmGroupList[a];t+=i.depId+"/"+i.depName,a===e.crmGroupList.length-1||(t+="，")}return t+="",'<span class="slh">'.concat(t,"</span>")}},{prop:"crmRoleList",label:"角色信息",align:"left",minWidth:"220px",showoverflow:!0,formatter:function(e){if(0===e.crmRoleList.length)return'<span style="text-align: center;display: block;"> -- </span>';for(var t="",a=0;a<e.crmRoleList.length;a++){var i=e.crmRoleList[a];t+=i.roleId+"/"+i.roleName,a===e.crmRoleList.length-1||(t+="，")}return t+="",'<span class="slh">'.concat(t,"</span>")}}],e.operates={width:120,fixed:"",initButtonList:[{id:"1",label:"重置密码",type:"",size:"mini",show:!0,plain:!0,disabled:!1,method:function(t,a){e.resetPass(a)}}]},e.seachDeptContent="",e.btnTabStatus=0,e.dialogVal={dialogVisible:!1,title:"新建部门"},e.depTreeLoading=!1,e.depTreeList=[],e.nowClickTreeRow=[],e.sureParams={},e.pointChangeType=1,e.iTime=null,e.crmUserList=[],e.crmDepList=[],e.crmGroupList=[],e.crmtagList=[],e.tagDataList=[],e.tagLoading=!0,e.tagActiveIndex=0,e.nowClickTagList={},e.treeProps={value:"depId",label:"depName",children:"childList"},e.depruleForm={depName:"",depDesc:"",belongDep:""},e.deprules={depName:[{required:!0,message:"请输入部门名称",trigger:"blur"}],depDesc:[{required:!0,message:"请输入部门描述",trigger:"blur"}],belongDep:[{required:!0,message:"请选择所属部门",trigger:"change"}]},e.chooseBloogDep={},e.getDepMngDialogVal={dialogVisible:!1,title:"查看部门管理人员"},e.getDepMsgNeed=[],e.addTagUserdialogVal={dialogVisible:!1,title:"添加组成员信息"},e.addPersondialogVal={dialogVisible:!1,title:"新增成员"},e.tableSelectList=[],e.departChangedialogVal={dialogVisible:!1,title:"选择成员所属部门"},e.departChooseList=[],e.setPersonRolesdialogVal={dialogVisible:!1,title:"设置人员角色"},e.checkList=[],e.empChangeVisible=!1,e.empChooseList=[],e.personDetailObj={},e.personDetailDialog={dialogVisible:!1,title:"查看人员详情信息"},e.selectRowObj={},e}return Object(v["a"])(a,[{key:"personDetailHandleClose",value:function(){this.personDetailDialog.dialogVisible=!1}},{key:"personDetailHandleSure",value:function(){this.personDetailDialog.dialogVisible=!1}},{key:"empChangeHandleClose",value:function(){this.empChangeVisible=!1}},{key:"empChooseClick",value:function(e){var t=this,a=[],i=[];if(e.addEmpIdList.length>0)for(var s=0;s<e.addEmpIdList.length;s++){var n=e.addEmpIdList[s];a.push(n.employeeid)}if(e.dltEmpIdList.length>0)for(var r=0;r<e.dltEmpIdList.length;r++){var o=e.dltEmpIdList[r];i.push(o.employeeid)}var l={addEmpIdList:a,dltEmpIdList:i,userIdList:e.userIdList};dn(l).then((function(e){"200"===e.code?(t.$message({message:e.msg,type:"success"}),t.page=1,t._getUserDetailList({depId:t.nowClickTreeRow[0].depId,pageSize:t.pageSize,pageNum:t.page}),t.empChangeVisible=!1):t.$message({message:e.msg,type:"warning"})}))}},{key:"setPersonRolesClose",value:function(){this.setPersonRolesdialogVal.dialogVisible=!1}},{key:"setPersonRolesSure",value:function(e){for(var t=this,a=[],i=0;i<e.length;i++){var s=e[i];a.push(s.roleId)}for(var n=yn(this.checkList,e,!0,"roleId"),r=[],o=0;o<n.length;o++){var l=n[o];r.push(l.roleId)}var c={addRoleIdList:a,dltRoleIdList:r,userIdList:this.tableSelectList};ln(c).then((function(e){"200"===e.code?(t.$message({message:e.msg,type:"success"}),t.setPersonRolesdialogVal.dialogVisible=!1,t.page=1,t._getUserDetailList({depId:t.nowClickTreeRow[0].depId,pageSize:t.pageSize,pageNum:t.page})):t.$message({message:e.msg,type:"warning"})}))}},{key:"_getCrmRoleByUserIds",value:function(){var e=this,t=this.tableSelectList;on(t).then((function(t){"200"===t.code&&(e.checkList=t.data,e.setPersonRolesdialogVal.dialogVisible=!0)}))}},{key:"addPersonSure",value:function(e){for(var t="",a="",i=[],s=0;s<e.departChooseList.length;s++){var n=e.departChooseList[s];n.isMain&&(t=n.depId,a=n.depName),i.push(n.depId)}var r={userId:e.personForm.userId,userCode:e.personForm.userCode,userName:e.personForm.userName,gender:e.personForm.gender,addRoleIdList:e.personForm.roleId,phoneNum:e.personForm.phoneNum,telNum:e.personForm.telNum,userLeaderId:e.personForm.userLeaderId,userLeaderName:e.personForm.userLeaderName,wxCode:e.personForm.wxCode,addDepIdList:i,userMainDepNum:t,userMainDepName:a,addEmpIdList:e.personForm.pm4PersonConcat};this._createUser(r)}},{key:"addPersonClose",value:function(){this.addPersondialogVal.dialogVisible=!1}},{key:"departChangeHandleClose",value:function(){this.departChangedialogVal.dialogVisible=!1}},{key:"departChangeHandleSure",value:function(e){for(var t="",a=[],i=[],s=0;s<e.depList.length;s++){var n=e.depList[s];n.isMain&&(t=n.depId),a.push(n.depId)}for(var r=0;r<e.deleteList.length;r++){var o=e.deleteList[r];i.push(o.depId)}var l={addDepIdList:a,dltDepIdList:i,userIdList:this.tableSelectList,mainDepId:t};this._insOrDltUserDep(l)}},{key:"_insOrDltUserDep",value:function(e){var t=this;rn(e).then((function(e){"200"===e.code?(t.$message({message:e.msg,type:"success"}),t.departChangedialogVal.dialogVisible=!1,t.addTagUserdialogVal.dialogVisible=!1,t.page=1,t._getUserDetailList({depId:t.nowClickTreeRow[0].depId,pageSize:t.pageSize,pageNum:t.page})):t.$message({message:e.msg,type:"warning"})}))}},{key:"handletagUserSure",value:function(e){for(var t=[],a=0;a<e.deleteList.length;a++){var i=e.deleteList[a];t.push(i.depId)}var s={addDepIdList:[this.nowClickTreeRow[0].depId],dltDepIdList:t,userIdList:e.checkedpeople,mainDepId:""};this._insOrDltUserDep(s)}},{key:"handleTagUserClose",value:function(){this.addTagUserdialogVal.dialogVisible=!1}},{key:"handleDepClose",value:function(){this.depruleForm={depName:"",depDesc:"",belongDep:""},this.dialogVal.dialogVisible=!1}},{key:"dataFilter",value:function(e,t){var a=this;e.filter((function(e){if(e.depId===t)return a.chooseBloogDep=e,e.depId===t;e.childList&&e.childList.length>0&&a.dataFilter(e.childList,t)}))}},{key:"belongDepChange",value:function(e){this.dataFilter(this.depTreeList,e),this.sureParams=[{parentId:this.chooseBloogDep.depId,parentCode:this.chooseBloogDep.depCode,isDel:0}]}},{key:"isEmptyObject",value:function(e){for(var t in e)return!1;return!0}},{key:"handleDepSure",value:function(e){var t=this;this.$refs[e].validate((function(e){if(!e)return!1;var a={};a=0===t.btnTabStatus?Object.assign.apply(Object,[{depName:t.depruleForm.depName,depDescription:t.depruleForm.depDesc,depType:1}].concat(Object(p["a"])(t.sureParams))):t.isEmptyObject(t.sureParams)?Object.assign({depName:t.depruleForm.depName,depDescription:t.depruleForm.depDesc,depType:2}):Object.assign.apply(Object,[{depName:t.depruleForm.depName,depDescription:t.depruleForm.depDesc,depType:2}].concat(Object(p["a"])(t.sureParams))),t._insOrUpdDepList([a]),t.dialogVal.dialogVisible=!1}))}},{key:"seachValueBtn",value:function(e){}},{key:"seachPersonDept",value:function(e){var t=this;this.$cancelAxios(["getUserAndDep"]),this.seachDeptContent&&(clearTimeout(this.iTime),this.depTreeLoading=!0,this.iTime=setTimeout(Object(R["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:t._getUserAndDep({keyword:t.seachDeptContent,searchType:t.btnTabStatus});case 1:case"end":return e.stop()}}),e)}))),350))}},{key:"clearPersonDept",value:function(){if(this.crmUserList=[],this.crmDepList=[],this.crmGroupList=[],this.crmtagList=[],1===this.btnTabStatus)this.page=1,this._getUserDetailList({tagId:this.nowClickTagList[0].tagId,pageSize:this.pageSize,pageNum:this.page});else{this.page=1;var e=this.$refs.depTree;e.setCurrentKey(this.nowClickTreeRow[0].depId),this._getUserDetailList({depId:this.nowClickTreeRow[0].depId,pageSize:this.pageSize,pageNum:this.page})}}},{key:"personDeptClick",value:function(e,t,a){var i=this;e.active||this.$set(e,"active",!0),"emp"===a?(this.crmUserList.forEach((function(t){t.userId!==e.userId&&t.active&&i.$set(t,"active",!1)})),this.page=1,this._getUserDetailList({depId:"",pageSize:this.pageSize,pageNum:this.page,userId:e.userId})):"dept"===a?(this.crmDepList.forEach((function(t){t.depId!==e.depId&&t.active&&i.$set(t,"active",!1)})),this.departListClick(e,{},{})):"group"===a?(this.crmGroupList.forEach((function(t){t.depId!==e.depId&&t.active&&i.$set(t,"active",!1)})),this.departListClick(e,{},{})):"tag"===a&&(this.crmtagList.forEach((function(t){t.tagId!==e.tagId&&t.active&&i.$set(t,"active",!1)})),this.nowClickTagList=[e],this.page=1,this._getUserDetailList({tagId:e.tagId,pageSize:this.pageSize,pageNum:this.page}))}},{key:"visibleChange",value:function(e,t){var a=this.$refs[t];e?(a.$el.style.display="block",a.$el.parentNode.parentNode.style.background="#f5f7fa"):(a.$el.style.display="none",a.$el.parentNode.parentNode.style.background="#fff")}},{key:"depChangeClick",value:function(e,t){t.target.parentNode.parentNode.style.display="block",t.target.parentNode.parentNode.parentNode.parentNode.style.background="#f5f7fa"}},{key:"_getUserAndDep",value:function(e){var t=this;Nn(e).then((function(e){"200"===e.code?(t.depTreeLoading=!1,0===t.btnTabStatus&&(t.crmDepList=e.data.crmDepList,t.crmUserList=e.data.crmUserList,0===t.crmUserList.length&&t.crmDepList.length>0?t.personDeptClick(t.crmDepList[0],0,"dept"):t.crmUserList.length>0&&t.personDeptClick(t.crmUserList[0],0,"emp")),1===t.btnTabStatus&&(t.crmtagList=e.data.crmUsertagDOList,t.crmGroupList.length&&t.personDeptClick(t.crmtagList[0],0,"tag")),2===t.btnTabStatus&&(t.crmGroupList=e.data.crmDepGroupList,t.crmGroupList.length&&t.personDeptClick(t.crmGroupList[0],0,"group"))):(t.depTreeLoading=!1,t.$message({message:e.msg,type:"warning"}))}))}},{key:"_getDepTree",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{treeType:1};this.depTreeLoading=!0,En(t).then((function(a){"200"===a.code?(e.depTreeLoading=!1,e.depTreeList=a.data,e.nowClickTreeRow=a.data,2===t.treeType&&a.data.length>0&&(e.nowClickTreeRow=[a.data[0]]),e.$nextTick((function(){var t=e.$refs.depTree;a.data.length>0&&t.setCurrentKey(a.data[0].depId),e.page=1,e._getUserDetailList({depId:a.data[0].depId,pageSize:e.pageSize,pageNum:e.page})}))):(e.depTreeLoading=!1,e.$message({message:a.msg,type:"warning"}))}))}},{key:"_insOrUpdDepList",value:function(e){var t=this;qs(e).then((function(a){"200"===a.code?(t.$message({message:a.msg,type:"success"}),t.chooseBloogDep={},t.depruleForm={depName:"",depDesc:"",belongDep:""},t._getDepTree({treeType:e[0].depType})):t.$message({message:a.msg,type:"warning"})}))}},{key:"_dltDepList",value:function(e){var t=this,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;Ws(e).then((function(e){"200"===e.code?(t.$message({message:e.msg,type:"success"}),t._getDepTree({treeType:a})):t.$message({message:e.msg,type:"warning"})}))}},{key:"departListClick",value:function(e,t,a){this.nowClickTreeRow=[e],this.page=1,this._getUserDetailList({depId:e.depId,pageSize:this.pageSize,pageNum:this.page})}},{key:"deptAddClick",value:function(){1!==this.btnTabStatus?(2===this.btnTabStatus?this.dialogVal={dialogVisible:!0,title:"新建组"}:this.dialogVal.dialogVisible=!0,this.deprules={depName:[{required:!0,message:"请输入部门名称",trigger:"blur"}],depDesc:[{required:!0,message:"请输入部门描述",trigger:"blur"}],belongDep:[{required:!0,message:"请选择所属部门",trigger:"change"}]},this.pointChangeType=1):this.$refs.setTag.addTag()}},{key:"handleCommand",value:function(e,t){var a=[];switch(e){case"delete":a=[t.depId],this._dltDepList(a);break;case"add":this.deprules={depName:[{required:!0,message:"请输入部门名称",trigger:"blur"}],depDesc:[{required:!0,message:"请输入部门描述",trigger:"blur"}]},this.sureParams=[{depType:1,parentId:t.depId,parentCode:t.depCode,isDel:0}],this.pointChangeType=2,this.dialogVal.dialogVisible=!0;break;case"update":this.deprules={depName:[{required:!0,message:"请输入部门名称",trigger:"blur"}],depDesc:[{required:!0,message:"请输入部门描述",trigger:"blur"}]},this.depruleForm={depName:t.depName,depDesc:t.depDescription},this.sureParams=[{depId:t.depId,depType:1,isDel:0}],this.pointChangeType=3,this.dialogVal.dialogVisible=!0;break;case"detailAdd":this.deprules={depName:[{required:!0,message:"请输入部门名称",trigger:"blur"}],depDesc:[{required:!0,message:"请输入部门描述",trigger:"blur"}]},this.sureParams=[{depType:1,parentId:this.nowClickTreeRow[0].depId,parentCode:this.nowClickTreeRow[0].depCode,isDel:0}],this.pointChangeType=2,this.dialogVal.dialogVisible=!0;break;case"detailUpdate":this.deprules={depName:[{required:!0,message:"请输入部门名称",trigger:"blur"}],depDesc:[{required:!0,message:"请输入部门描述",trigger:"blur"}]},this.sureParams=[{depId:this.nowClickTreeRow[0].depId,depType:1,isDel:0}],this.depruleForm.depDesc=this.nowClickTreeRow.length>0?this.nowClickTreeRow[0].depDescription:this.nowClickTreeRow.depDescription,this.depruleForm.depName=this.nowClickTreeRow.length>0?this.nowClickTreeRow[0].depName:this.nowClickTreeRow.depName,this.pointChangeType=3,this.dialogVal.dialogVisible=!0;break;case"getDeptMng":this.getDepMsgNeed=[t],this.getDepMngDialogVal.dialogVisible=!0;break;case"detailGetDeptMng":this.getDepMsgNeed=this.nowClickTreeRow,this.getDepMngDialogVal.dialogVisible=!0;break;default:break}}},{key:"grouphandleCommand",value:function(e,t){var a=[];switch(e){case"delete":a=[t.depId],this._dltDepList(a,2);break;case"add":this.deprules={depName:[{required:!0,message:"请输入组名称",trigger:"blur"}],depDesc:[{required:!0,message:"请输入组描述",trigger:"blur"}]},this.sureParams=[{depType:1,parentId:t.depId,parentCode:t.depCode,isDel:0}],this.pointChangeType=2,this.dialogVal.dialogVisible=!0;break;case"update":this.deprules={depName:[{required:!0,message:"请输入组名称",trigger:"blur"}],depDesc:[{required:!0,message:"请输入组描述",trigger:"blur"}]},this.depruleForm={depName:t.depName,depDesc:t.depDescription},this.sureParams=[{depId:t.depId,depType:1,isDel:0}],this.pointChangeType=3,this.dialogVal.dialogVisible=!0;break;case"detailAdd":this.deprules={depName:[{required:!0,message:"请输入部门名称",trigger:"blur"}],depDesc:[{required:!0,message:"请输入部门描述",trigger:"blur"}]},this.sureParams=[{depType:1,parentId:this.nowClickTreeRow[0].depId,parentCode:this.nowClickTreeRow[0].depCode,isDel:0}],this.pointChangeType=2,this.dialogVal.dialogVisible=!0;break;case"detailUpdate":this.deprules={depName:[{required:!0,message:"请输入部门名称",trigger:"blur"}],depDesc:[{required:!0,message:"请输入部门描述",trigger:"blur"}]},this.sureParams=[{depId:this.nowClickTreeRow[0].depId,depType:1,isDel:0}],this.depruleForm.depDesc=this.nowClickTreeRow.length>0?this.nowClickTreeRow[0].depDescription:this.nowClickTreeRow.depDescription,this.depruleForm.depName=this.nowClickTreeRow.length>0?this.nowClickTreeRow[0].depName:this.nowClickTreeRow.depName,this.pointChangeType=3,this.dialogVal.dialogVisible=!0;break;case"getDeptMng":this.getDepMsgNeed=[t],this.getDepMngDialogVal.dialogVisible=!0;break;case"detailGetDeptMng":this.getDepMsgNeed=this.nowClickTreeRow,this.getDepMngDialogVal.dialogVisible=!0;break;default:break}}},{key:"addGroupUser",value:function(){this.addTagUserdialogVal.dialogVisible=!0}},{key:"getDepMngClose",value:function(){this.getDepMngDialogVal.dialogVisible=!1}},{key:"labelDetail",value:function(){}},{key:"btnTabClick",value:function(e){switch(this.btnTabStatus=e,e){case 0:this.tableSelectList=[],this.seachDeptContent="",this.seachPlaceHolder="搜索成员、部门",this.$cancelAxios(["getDepTree","getUserAndDep"]),this._getDepTree();break;case 1:this.tableSelectList=[],this.seachDeptContent="",this.$cancelAxios(["getDepTree","getUserAndDep"]),this.tagDataList=[],this.tagLoading=!0,this.tagActiveIndex=0,this.seachPlaceHolder="搜索标签";break;case 2:this.tableSelectList=[],this.seachDeptContent="",this.seachPlaceHolder="搜索小组",this.$cancelAxios(["getDepTree"]),this._getDepTree({treeType:2});break;default:break}}},{key:"getTagList",value:function(e){this.tagDataList=e,this.nowClickTagList=e[0],e.length>0&&(this._getUserDetailList({tagId:e[0].tagId,pageSize:this.pageSize,pageNum:this.page}),this.tagLoading=!1)}},{key:"getUserDetail",value:function(e){this.page=1,this._getUserDetailList({tagId:e,pageSize:this.pageSize,pageNum:this.page}),this.tagLoading=!1}},{key:"tagClick",value:function(e,t){this.tagActiveIndex=t,this.page=1,this._getUserDetailList({tagId:e.tagId,pageSize:this.pageSize,pageNum:this.page}),this.nowClickTagList=e}},{key:"addPeoClick",value:function(){this.departChooseList=[{depId:this.nowClickTreeRow[0].depId,depName:this.nowClickTreeRow[0].depName,isMain:!0}],this.addPersondialogVal.dialogVisible=!0}},{key:"setUpDepartmentClick",value:function(){this.departChooseList=[],0!==this.tableSelectList.length?this._getCrmDepByUserIds(this.tableSelectList):this.$message({message:"请选择人员信息",type:"warning"})}},{key:"setUpEmpClick",value:function(){1===this.tableSelectList.length?(this.empChooseList=this.tableSelectList[0].empList,this.empChangeVisible=!0):this.$message({message:"设置PM4人员关联有且只能选择一条人员信息",type:"warning"})}},{key:"setUpRoleClick",value:function(){0!==this.tableSelectList.length?this._getCrmRoleByUserIds():this.$message({message:"请选择人员信息",type:"warning"})}},{key:"setUpLabelClick",value:function(){}},{key:"setUpGroupClick",value:function(){}},{key:"deletePeoClick",value:function(){var e=this;0===this.tableSelectList.length&&this.$message({message:"请选择人员信息",type:"warning"});var t={userId:this.tableSelectList};pn(t).then((function(t){"200"===t.code?(e.$message({message:t.msg,type:"success"}),e.page=1,e._getUserDetailList({depId:e.nowClickTreeRow[0].depId,pageSize:e.pageSize,pageNum:e.page})):e.$message({message:t.msg,type:"warning"})}))}},{key:"shiftOutClick",value:function(){var e=this,t={depId:this.nowClickTreeRow[0].depId,dltUserIdList:this.tableSelectList,addUserIdList:[]};cn(t).then((function(t){"200"===t.code?(e.$message({message:t.msg,type:"success"}),e.page=1,e._getUserDetailList({depId:e.nowClickTreeRow[0].depId,pageSize:e.pageSize,pageNum:e.page})):e.$message({message:t.msg,type:"warning"})}))}},{key:"_getUserDetailList",value:function(e){var t=this,a=arguments.length>1&&void 0!==arguments[1]&&arguments[1];a||(this.tableDataLoading=!0),sn(e).then((function(e){if("200"===e.code){if(a)return void(t.personDetailObj=e.data.list[0]);t.tableDataLoading=!1,t.tableDataList=e.data.list}else t.$message({message:e.msg,type:"warning"}),t.tableDataLoading=!1}))}},{key:"_getCrmDepByUserIds",value:function(e){var t=this;nn(e).then((function(e){if("200"===e.code){for(var a=0;a<e.data.length;a++){var i=e.data[a];t.departChooseList.push({depId:i.depId,depName:i.depName,isMain:i.mainDepFlag})}t.departChangedialogVal.dialogVisible=!0}else t.$message({message:e.msg,type:"warning"})}))}},{key:"_createUser",value:function(e){var t=this;hn(e).then((function(e){"200"===e.code?(t.$message({message:e.msg,type:"success"}),t.addPersondialogVal.dialogVisible=!1,t.page=1,t._getUserDetailList({depId:t.nowClickTreeRow[0].depId,pageSize:t.pageSize,pageNum:t.page})):t.$message({message:e.msg,type:"warning"})}))}},{key:"handleSelectionChange",value:function(e){this.selectRowObj=e.row,this.tableSelectList=[];for(var t=0;t<e.selection.length;t++){var a=e.selection[t];this.tableSelectList.push(a.userId)}}},{key:"handleClickChange",value:function(e){this.personDetailDialog.dialogVisible=!0,this.page=1,this._getUserDetailList({userId:e.row.userId,pageSize:this.pageSize,pageNum:this.page},!0)}},{key:"resetPass",value:function(e){var t=this,a={userId:+e.userId};gn(a).then((function(e){"200"===e.code?t.$message({message:e.msg,type:"success"}):t.$message({message:e.msg,type:"warning"})}))}},{key:"mounted",value:function(){this.tagActiveIndex=0,this._getDepTree()}}]),a}(Object(k["b"])(Vs));Or=Object(C["a"])([Object(k["a"])({components:{getdepMsg:xn,setTager:qn,taggroupUser:Fn,addPerson:gr,departChange:ur,setRole:Tr,empChange:Zn,personDetail:Cr}})],Or);var xr=Or,Sr=xr,jr=(a("04e4"),Object(c["a"])(Sr,Ji,Yi,!1,null,"50e18f2f",null)),Er=jr.exports,Nr=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"customdataDic"},[a("header",[a("container-header",{attrs:{title:e.title,placeholder:e.placeholder,seachPlace:e.seachPlace},on:{seachValueBtn:e.seachValueBtn}})],1),a("div",{staticClass:"commmonMain"},[a("div",{staticClass:"menu clearfix"},[a("menu-bar",{staticClass:"left",attrs:{menubarList:e.menubarList,activeTextColor:e.activeTextColor},on:{menuSelect:e.menuSelect}}),a("div",{staticClass:"button right"},[3===e.menuIndex||4===e.menuIndex?a("el-select",{staticClass:"deptPostSelect",attrs:{borderColor:e.insertHasClick&&!e.deptPost?"danger":"",size:"mini",filterable:"",placeholder:"请选择"},on:{change:e.deptPostSelectChange},model:{value:e.deptPost,callback:function(t){e.deptPost=t},expression:"deptPost"}},e._l(e.deptPostOptions,(function(t){return a("el-option",{key:t.CD_ID,attrs:{label:t.DIC_SELECT_NAME,value:t.DIC_SELECT_ID}},[a("span",{staticStyle:{float:"left"}},[e._v(e._s(t.DIC_SELECT_NAME))]),a("span",{staticStyle:{float:"right",color:"#8492a6","font-size":"13px"}},[e._v(e._s(t.DIC_SELECT_ID))])])})),1):e._e(),5===e.menuIndex?a("el-select",{staticClass:"deptPostSelect",attrs:{size:"mini",filterable:"",clearable:"",placeholder:"请选择"},on:{change:e.labelSelectChange},model:{value:e.labelValue,callback:function(t){e.labelValue=t},expression:"labelValue"}},e._l(e.labelOptions,(function(e){return a("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})})),1):e._e(),a("el-button",{attrs:{size:"mini",type:"warning",icon:"el-icon-plus"},on:{click:e.insertClick}}),a("el-button",{attrs:{size:"mini",type:"success",icon:"el-icon-check"},on:{click:e.saveAllClick}})],1)],1),a("div",{staticClass:"mainTable"},[a("base-table",{attrs:{tableHeight:e.tableHeight,tableDataList:e.tableDataList,columns:e.columns,options:e.options,operates:e.operates},on:{inputClick:e.inputClick}})],1)]),a("paging",{attrs:{page:e.page,pageSize:e.pageSize,total:e.total}})],1)},Rr=[],Ur=function(e){Object(b["a"])(a,e);var t=Object(y["a"])(a);function a(){var e;return Object(f["a"])(this,a),e=t.apply(this,arguments),e.title={iconfont:"iconfont ytcrm-keqingguanli",content:"客情数据字典维护"},e.placeholder="名称|ID",e.activeTextColor="#fc923f",e.seachPlace="center",e.menubarList=["客户学术专线","客户科室角色信息","客户科室信息","客户职务信息","标签信息"],e.menuIndex=1,e.tableDataList=[],e.middleTableDataList=[],e.deptPost="",e.deptPostOptions=[],e.insertHasClick=!1,e.labelValue="",e.labelOptions=[{value:1,label:"周报选项"},{value:2,label:"客情备注选项"}],e.columns=[{prop:"DIC_SELECT_ID",label:"字典类型ID",align:"left",width:"120px",editingType:"input",formatter:function(e){return"<span>".concat(e.DIC_SELECT_ID,"</span>")}},{prop:"DIC_SELECT_NAME",label:"字典类型名称",align:"left",minWidth:"100px",editingType:"input",formatter:function(e){return"<span>".concat(e.DIC_SELECT_NAME,"</span>")}},{prop:"USESTATUS",label:"状态",align:"left",minWidth:"100px",editingType:"select",selectOptions:[{value:1,label:"正式"},{value:2,label:"作废"}],formatter:function(e){return"<span>".concat(1===+e.USESTATUS?'<span style="color: green">正式</span>':'<span class="fontWeight">作废</span>',"</span>")}},{prop:"UPDATE_ID",label:"操作人员信息",align:"left",minWidth:"200px",formatter:function(e){if(e.UPDATE_ID)return"<span>".concat(e.UPDATE_ID,"/").concat(e.UPDATE_NAME,"</span>")}},{prop:"UPDATE_TIME",label:"操作时间",align:"left",minWidth:"160px"}],e.operates={width:200,fixed:"",initButtonList:[{id:"1",label:"编辑",type:"",size:"mini",show:!0,plain:!0,disabled:!1,method:function(t,a){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"";e.handleEdit(t,a,i)}},{id:"2",label:"作废",type:"danger",size:"mini",show:!0,plain:!1,disabled:!1,method:function(t,a){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"";e.handleDel(t,a,i)}}],clickButtonList:[{id:"3",label:"保存",type:"success",size:"mini",show:!1,plain:!1,disabled:!1,method:function(t,a){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"";e.handleSave(t,a,i)}},{id:"4",label:"取消",type:"warning",size:"mini",show:!1,plain:!1,disabled:!1,method:function(t,a){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"";e.handleCancel(t,a,i)}}]},e}return Object(v["a"])(a,[{key:"seachValueBtn",value:function(e){}},{key:"menuSelect",value:function(e){this.insertHasClick=!1,this.menuIndex=+e+1,this.$cancelAxios(["getDictionaries"]);var t=+e+1;switch(t){case 1:this.columns=[{prop:"DIC_SELECT_ID",label:"字典类型ID",align:"left",width:"120px",editingType:"input",formatter:function(e){return"<span>".concat(e.DIC_SELECT_ID,"</span>")}},{prop:"DIC_SELECT_NAME",label:"字典类型名称",align:"left",minWidth:"100px",editingType:"input",formatter:function(e){return"<span>".concat(e.DIC_SELECT_NAME,"</span>")}},{prop:"USESTATUS",label:"状态",align:"left",minWidth:"100px",editingType:"select",selectOptions:[{value:1,label:"正式"},{value:2,label:"作废"}],formatter:function(e){return"<span>".concat(1===+e.USESTATUS?'<span style="color: green">正式</span>':'<span class="fontWeight">作废</span>',"</span>")}},{prop:"UPDATE_ID",label:"操作人员信息",align:"left",minWidth:"200px",formatter:function(e){if(e.UPDATE_ID)return"<span>".concat(e.UPDATE_ID,"/").concat(e.UPDATE_NAME,"</span>")}},{prop:"UPDATE_TIME",label:"操作时间",align:"left",minWidth:"160px"}],this.getDictionariesFun(t);break;case 2:this.columns=[{prop:"DIC_SELECT_ID",label:"角色ID",align:"left",width:"120px",editingType:"input"},{prop:"DIC_SELECT_NAME",label:"角色名称",align:"left",minWidth:"100px",editingType:"input"},{prop:"USESTATUS",label:"状态",align:"left",minWidth:"100px",editingType:"select",selectOptions:[{value:1,label:"正式"},{value:2,label:"作废"}],formatter:function(e){return"<span>".concat(1===+e.USESTATUS?'<span style="color: green">正式</span>':'<span class="fontWeight">作废</span>',"</span>")}},{prop:"UPDATE_ID",label:"操作人员信息",align:"left",minWidth:"150px",formatter:function(e){if(e.UPDATE_ID)return"<span>".concat(e.UPDATE_ID,"/").concat(e.UPDATE_NAME,"</span>")}},{prop:"UPDATE_TIME",label:"操作时间",align:"left",minWidth:"150px"}],this.getDictionariesFun(t);break;case 3:this.columns=[{prop:"DIC_UPPER_SELECT_ID",label:"角色ID",align:"left",width:"100px"},{prop:"DIC_UPPER_SELECT_NAME",label:"角色名称",align:"left",minWidth:"100px"},{prop:"DIC_SELECT_ID",label:"科室ID",align:"left",width:"120px",editingType:"input"},{prop:"DIC_SELECT_NAME",label:"科室名称",align:"left",width:"120px",editingType:"input"},{prop:"USESTATUS",label:"状态",align:"left",minWidth:"100px",editingType:"select",selectOptions:[{value:1,label:"正式"},{value:2,label:"作废"}],formatter:function(e){return"<span>".concat(1===+e.USESTATUS?'<span style="color: green">正式</span>':'<span class="fontWeight">作废</span>',"</span>")}},{prop:"UPDATE_ID",label:"操作人员信息",align:"left",minWidth:"150px",formatter:function(e){if(e.UPDATE_ID)return"<span>".concat(e.UPDATE_ID,"/").concat(e.UPDATE_NAME,"</span>")}},{prop:"UPDATE_TIME",label:"操作时间",align:"left",minWidth:"150px"}],this.deptPost="",this.getDictionariesFun(2,!0),this.getDictionariesFun(t);break;case 4:this.columns=[{prop:"DIC_UPPER_SELECT_ID",label:"科室ID",align:"left",width:"100px"},{prop:"DIC_UPPER_SELECT_NAME",label:"科室名称",align:"left",minWidth:"100px"},{prop:"DIC_SELECT_ID",label:"职务ID",align:"left",width:"120px",editingType:"input"},{prop:"DIC_SELECT_NAME",label:"职务名称",align:"left",width:"120px",editingType:"input"},{prop:"USESTATUS",label:"状态",align:"left",minWidth:"100px",editingType:"select",selectOptions:[{value:1,label:"正式"},{value:2,label:"作废"}],formatter:function(e){return"<span>".concat(1===+e.USESTATUS?'<span style="color: green">正式</span>':'<span class="fontWeight">作废</span>',"</span>")}},{prop:"UPDATE_ID",label:"操作人员信息",align:"left",minWidth:"150px",formatter:function(e){if(e.UPDATE_ID)return"<span>".concat(e.UPDATE_ID,"/").concat(e.UPDATE_NAME,"</span>")}},{prop:"UPDATE_TIME",label:"操作时间",align:"left",minWidth:"150px"}],this.deptPost="",this.getDictionariesFun(3,!0),this.getDictionariesFun(t);break;case 5:this.columns=[{prop:"DIC_SELECT_ID",label:"备注标签ID",align:"left",width:"120px",editingType:"input",formatter:function(e){return"<span>".concat(e.DIC_SELECT_ID,"</span>")}},{prop:"DIC_SELECT_NAME",label:"备注标签名称",align:"left",minWidth:"100px",editingType:"input",formatter:function(e){return"<span>".concat(e.DIC_SELECT_NAME,"</span>")}},{prop:"TYPE_SECOND_ID",label:"类型",align:"left",minWidth:"100px",editingType:"select",selectOptions:[{value:1,label:"周报选项"},{value:2,label:"客情备注选项"}],formatter:function(e){return"<span>".concat(1===+e.USESTATUS?'<span class="fontWeight">周报选项</span>':'<span class="fontWeight">客情备注选项</span>',"</span>")}},{prop:"USESTATUS",label:"状态",align:"left",minWidth:"100px",editingType:"select",selectOptions:[{value:1,label:"正式"},{value:2,label:"作废"}],formatter:function(e){return"<span>".concat(1===+e.USESTATUS?'<span style="color: green">正式</span>':'<span class="fontWeight">作废</span>',"</span>")}},{prop:"UPDATE_ID",label:"操作人员信息",align:"left",minWidth:"200px",formatter:function(e){if(e.UPDATE_ID)return"<span>".concat(e.UPDATE_ID,"/").concat(e.UPDATE_NAME,"</span>")}},{prop:"UPDATE_TIME",label:"操作时间",align:"left",minWidth:"160px"}],this.deptPost="",this.getDictionariesFun(t);break;default:break}}},{key:"deptPostSelectChange",value:function(e){this.getDictionariesFun(this.menuIndex,!1,e)}},{key:"labelSelectChange",value:function(e){var t={typeId:5,keyword:"",pageSize:this.pageSize,pageNum:this.page,typeSecondId:e};this._getDictionaries(t)}},{key:"getDictionariesFun",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"",i={typeId:e,keyword:"",pageSize:t?100:this.pageSize,pageNum:this.page,dicUpperSelectId:a};this._getDictionaries(i,t)}},{key:"_getDictionaries",value:function(e){var t=this,a=arguments.length>1&&void 0!==arguments[1]&&arguments[1];a||(this.options.loading=!0),Rn(e).then((function(e){"200"===e.code?a?t.deptPostOptions=e.data.list:(t.total=e.data.total,t.tableDataList=e.data.list,t.middleTableDataList=JSON.parse(JSON.stringify(t.tableDataList)),t.options.loading=!1):(t.$message({message:e.msg,type:"warning"}),t.options.loading=!1)}))}},{key:"_insDictionaries",value:function(e){var t=this,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";bi(e).then((function(e){"200"===e.code?(t.$message({message:e.msg,type:"success"}),a?(t.$set(a,"editing",!1),t.$set(a,"isSaveClick",!1),t.$set(a,"CD_ID",e.data[0])):t.getDictionariesFun(t.menuIndex)):t.$message({message:e.msg,type:"warning"})}))}},{key:"_dltDictionaries",value:function(e){var t=this;Ci(e).then((function(e){"200"===e.code?(t.$message({message:e.msg,type:"success"}),t.getDictionariesFun(t.menuIndex)):t.$message({message:e.msg,type:"warning"})}))}},{key:"inputClick",value:function(e){this.$set(this.tableDataList[e.index],"isSaveClick",!1)}},{key:"handleEdit",value:function(e,t,a){this.$set(t,"editing",!0)}},{key:"handleDel",value:function(e,t,a){var i=[{cdId:t.CD_ID}];this._dltDictionaries(i)}},{key:"handleSave",value:function(e,t,a){this.$set(t,"isSaveClick",!0);var i=[];if(1===t.TYPE_ID||2===t.TYPE_ID){if(!t.DIC_SELECT_ID)return void this.$message({message:"字典类型ID不能为空",type:"warning"});if(!t.DIC_SELECT_NAME)return void this.$message({message:"字典类型名称不能为空",type:"warning"});i=[{typeId:this.menuIndex,cdId:t.CD_ID,dicSelectId:t.DIC_SELECT_ID,dicSelectName:t.DIC_SELECT_NAME,dicSelectDescription:t.DIC_SELECT_DESCRIPTION,usestatus:t.USESTATUS}]}else if(3===t.TYPE_ID||4===t.TYPE_ID){var s=3===t.TYPE_ID?"角色信息不能为空":4===t.TYPE_ID?"科室信息不能为空":"",n=3===t.TYPE_ID?"科室信息不能为空":4===t.TYPE_ID?"职务信息不能为空":"";if(!t.DIC_UPPER_SELECT_ID)return void this.$message({message:s,type:"warning"});if(!t.DIC_SELECT_ID||!t.DIC_SELECT_NAME)return void this.$message({message:n,type:"warning"});i=[{typeId:this.menuIndex,cdId:t.CD_ID,upperTypeId:3===this.menuIndex?2:4===this.menuIndex?3:"",dicUpperSelectId:t.DIC_UPPER_SELECT_ID,dicSelectId:t.DIC_SELECT_ID,dicSelectName:t.DIC_SELECT_NAME,dicSelectDescription:t.DIC_SELECT_DESCRIPTION,usestatus:t.USESTATUS}]}else if(5===t.TYPE_ID){if(!t.DIC_SELECT_ID||!t.DIC_SELECT_NAME)return void this.$message({message:"标签信息不能为空",type:"warning"});i=[{typeId:this.menuIndex,cdId:t.CD_ID,typeSecondId:t.TYPE_SECOND_ID,dicSelectId:t.DIC_SELECT_ID,dicSelectName:t.DIC_SELECT_NAME,dicSelectDescription:t.DIC_SELECT_DESCRIPTION,usestatus:t.USESTATUS}]}this._insDictionaries(i,t)}},{key:"handleCancel",value:function(e,t,a){if(t.CD_ID){var i=JSON.parse(JSON.stringify(this.middleTableDataList));this.$set(i[a],"editing",!1),this.$set(this.tableDataList,a,i[a])}else this.tableDataList.splice(a,1),this.middleTableDataList.splice(a,1)}},{key:"insertClick",value:function(){var e={};if(3===this.menuIndex||4===this.menuIndex){var t=3===this.menuIndex?"角色信息不能为空":4===this.menuIndex?"科室信息不能为空":"";if(!this.deptPost)return this.$message({message:t,type:"warning"}),void(this.insertHasClick=!0);e={TYPE_ID:this.menuIndex,DIC_UPPER_SELECT_ID:this.deptPost,DIC_UPPER_SELECT_NAME:"",DIC_SELECT_ID:"",DIC_SELECT_NAME:"",UPDATE_NAME:"",USESTATUS:1,editing:!0}}else e=5===this.menuIndex?{TYPE_ID:this.menuIndex,TYPE_SECOND_ID:1,DIC_SELECT_ID:"",DIC_SELECT_NAME:"",UPDATE_NAME:"",USESTATUS:1,editing:!0}:{TYPE_ID:this.menuIndex,DIC_SELECT_ID:"",DIC_SELECT_NAME:"",UPDATE_NAME:"",USESTATUS:1,editing:!0};this.tableDataList.unshift(e),this.middleTableDataList=JSON.parse(JSON.stringify(this.tableDataList))}},{key:"saveAllClick",value:function(){for(var e=[],t=0;t<this.tableDataList.length;t++){var a=this.tableDataList[t];if(a.editing)if(this.$set(a,"isSaveClick",!0),1===a.TYPE_ID||2===a.TYPE_ID){if(!a.DIC_SELECT_ID)return void this.$message({message:"字典类型ID不能为空",type:"warning"});if(!a.DIC_SELECT_NAME)return void this.$message({message:"字典类型名称不能为空",type:"warning"});e.push({typeId:this.menuIndex,cdId:a.CD_ID,dicSelectId:a.DIC_SELECT_ID,dicSelectName:a.DIC_SELECT_NAME,dicSelectDescription:a.DIC_SELECT_DESCRIPTION,usestatus:a.USESTATUS})}else if(3===a.TYPE_ID||4===a.TYPE_ID){var i=3===a.TYPE_ID?"角色信息不能为空":4===a.TYPE_ID?"科室信息不能为空":"",s=3===a.TYPE_ID?"科室信息不能为空":4===a.TYPE_ID?"职务信息不能为空":"";if(!a.DIC_UPPER_SELECT_ID)return void this.$message({message:i,type:"warning"});if(!a.DIC_SELECT_ID||!a.DIC_SELECT_NAME)return void this.$message({message:s,type:"warning"});e.push({typeId:this.menuIndex,cdId:a.CD_ID,upperTypeId:3===this.menuIndex?2:4===this.menuIndex?3:"",dicUpperSelectId:a.DIC_UPPER_SELECT_ID,dicSelectId:a.DIC_SELECT_ID,dicSelectName:a.DIC_SELECT_NAME,dicSelectDescription:a.DIC_SELECT_DESCRIPTION,usestatus:a.USESTATUS})}else if(5===a.TYPE_ID){if(!a.DIC_SELECT_ID||!a.DIC_SELECT_NAME)return void this.$message({message:"标签信息不能为空",type:"warning"});e.push({typeId:this.menuIndex,cdId:a.CD_ID,typeSecondId:a.TYPE_SECOND_ID,dicSelectId:a.DIC_SELECT_ID,dicSelectName:a.DIC_SELECT_NAME,dicSelectDescription:a.DIC_SELECT_DESCRIPTION,usestatus:a.USESTATUS})}}0!==e.length?this._insDictionaries(e):this.$message({message:"没有任何新增或修改的操作",type:"warning"})}},{key:"mounted",value:function(){this.getDictionariesFun(this.menuIndex)}}]),a}(Object(k["b"])(Vs));Ur=Object(C["a"])([k["a"]],Ur);var Pr=Ur,Ar=Pr,$r=(a("530f"),Object(c["a"])(Ar,Nr,Rr,!1,null,"742e5178",null)),Vr=$r.exports,Mr=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"roledataDic"},[a("common-dic",{attrs:{typeDic:e.typeDic,title:e.title,columns:e.columns}})],1)},Fr=[],zr=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"commonDic"},[a("header",[a("container-header",{attrs:{title:e.title,placeholder:e.placeholder,seachPlace:e.seachPlace},on:{seachValueBtn:e.seachValueBtn}})],1),a("div",{staticClass:"commmonMain"},[a("div",{staticClass:"menu clearfix"},[a("div",{staticClass:"button",class:"right"===e.btnPlace?"right":"left"},[a("el-button",{attrs:{size:"mini",type:"warning",icon:"el-icon-plus"},on:{click:e.insertClick}}),a("el-button",{attrs:{size:"mini",type:"success",icon:"el-icon-check"},on:{click:e.saveAllClick}})],1)]),a("div",{staticClass:"mainTable"},[a("base-table",{attrs:{tableHeight:e.tableHeight,tableDataList:e.tableDataList,columns:e.columns,options:e.options,operates:e.operates},on:{inputClick:e.inputClick}})],1)])])},Hr=[],Kr=function(e){Object(b["a"])(a,e);var t=Object(y["a"])(a);function a(){var e;return Object(f["a"])(this,a),e=t.apply(this,arguments),e.placeholder="名称|ID",e.seachPlace="center",e.tableDataList=[],e.middleTableDataList=[],e.operates={width:200,fixed:"",initButtonList:[{id:"1",label:"编辑",type:"",size:"mini",show:!0,plain:!0,disabled:!1,method:function(t,a){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"";e.handleEdit(t,a,i)}},{id:"2",label:"作废",type:"danger",size:"mini",show:!0,plain:!1,disabled:!1,method:function(t,a){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"";e.handleDel(t,a,i)}}],clickButtonList:[{id:"3",label:"保存",type:"success",size:"mini",show:!1,plain:!1,disabled:!1,method:function(t,a){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"";e.handleSave(t,a,i)}},{id:"4",label:"取消",type:"warning",size:"mini",show:!1,plain:!1,disabled:!1,method:function(t,a){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"";e.handleCancel(t,a,i)}}]},e}return Object(v["a"])(a,[{key:"getDictionariesFun",value:function(){var e={typeId:this.typeDic,keyword:"",pageSize:this.pageSize,pageNum:this.page};this._getDictionaries(e)}},{key:"insertClick",value:function(){var e={TYPE_ID:this.typeDic,DIC_SELECT_ID:"",DIC_SELECT_NAME:"",UPDATE_NAME:"",USESTATUS:1,editing:!0};this.tableDataList.unshift(e),this.middleTableDataList=JSON.parse(JSON.stringify(this.tableDataList))}},{key:"_getDictionaries",value:function(e){var t=this;this.options.loading=!0,Rn(e).then((function(e){"200"===e.code?(t.total=e.data.total,t.tableDataList=e.data.list,t.middleTableDataList=JSON.parse(JSON.stringify(t.tableDataList)),t.options.loading=!1):(t.$message({message:e.msg,type:"warning"}),t.options.loading=!1)}))}},{key:"_insDictionaries",value:function(e){var t=this,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";bi(e).then((function(e){"200"===e.code?(t.$message({message:e.msg,type:"success"}),a?(t.$set(a,"editing",!1),t.$set(a,"isSaveClick",!1),t.$set(a,"CD_ID",e.data[0])):t.getDictionariesFun()):t.$message({message:e.msg,type:"warning"})}))}},{key:"_dltDictionaries",value:function(e){var t=this;Ci(e).then((function(e){"200"===e.code?(t.$message({message:e.msg,type:"success"}),t.getDictionariesFun()):t.$message({message:e.msg,type:"warning"})}))}},{key:"handleEdit",value:function(e,t,a){this.$set(t,"editing",!0)}},{key:"handleDel",value:function(e,t,a){var i=[{cdId:t.CD_ID}];this._dltDictionaries(i)}},{key:"handleSave",value:function(e,t,a){if(this.$set(t,"isSaveClick",!0),t.DIC_SELECT_ID)if(t.DIC_SELECT_NAME){var i=[{typeId:this.typeDic,cdId:t.CD_ID,dicSelectId:t.DIC_SELECT_ID,dicSelectName:t.DIC_SELECT_NAME,dicSelectDescription:t.DIC_SELECT_DESCRIPTION,usestatus:t.USESTATUS}];this._insDictionaries(i,t)}else this.$message({message:"职务名称不能为空",type:"warning"});else this.$message({message:"职务ID不能为空",type:"warning"})}},{key:"handleCancel",value:function(e,t,a){if(t.CD_ID){var i=JSON.parse(JSON.stringify(this.middleTableDataList));this.$set(i[a],"editing",!1),this.$set(this.tableDataList,a,i[a])}else this.tableDataList.splice(a,1),this.middleTableDataList.splice(a,1)}},{key:"seachValueBtn",value:function(e){}},{key:"inputClick",value:function(e){this.$set(this.tableDataList[e.index],"isSaveClick",!1)}},{key:"saveAllClick",value:function(){for(var e=[],t=0;t<this.tableDataList.length;t++){var a=this.tableDataList[t];if(a.editing){if(this.$set(a,"isSaveClick",!0),!a.DIC_SELECT_ID)return void this.$message({message:"职务ID不能为空",type:"warning"});if(!a.DIC_SELECT_NAME)return void this.$message({message:"职务名称不能为空",type:"warning"});e.push({typeId:this.typeDic,cdId:a.CD_ID,dicSelectId:a.DIC_SELECT_ID,dicSelectName:a.DIC_SELECT_NAME,dicSelectDescription:a.DIC_SELECT_DESCRIPTION,usestatus:a.USESTATUS})}}0!==e.length?this._insDictionaries(e):this.$message({message:"没有任何新增或修改的操作",type:"warning"})}},{key:"mounted",value:function(){this.getDictionariesFun()}}]),a}(Object(k["b"])(Vs));Object(C["a"])([Object(k["c"])()],Kr.prototype,"typeDic",void 0),Object(C["a"])([Object(k["c"])()],Kr.prototype,"columns",void 0),Object(C["a"])([Object(k["c"])({default:"left"})],Kr.prototype,"btnPlace",void 0),Object(C["a"])([Object(k["c"])()],Kr.prototype,"menubarList",void 0),Object(C["a"])([Object(k["c"])()],Kr.prototype,"title",void 0),Kr=Object(C["a"])([Object(k["a"])({})],Kr);var Br=Kr,qr=Br,Wr=(a("2aee"),Object(c["a"])(qr,zr,Hr,!1,null,"1c607066",null)),Jr=Wr.exports,Yr=function(e){Object(b["a"])(a,e);var t=Object(y["a"])(a);function a(){var e;return Object(f["a"])(this,a),e=t.apply(this,arguments),e.typeDic=6,e.title={iconfont:"iconfont ytcrm-jiaoseguanli",content:"角色分类字典维护"},e.columns=[{prop:"DIC_SELECT_ID",label:"角色ID",align:"left",width:"120px",editingType:"input",formatter:function(e){return"<span>".concat(e.DIC_SELECT_ID,"</span>")}},{prop:"DIC_SELECT_NAME",label:"角色名称",align:"left",minWidth:"100px",editingType:"input",formatter:function(e){return"<span>".concat(e.DIC_SELECT_NAME,"</span>")}},{prop:"USESTATUS",label:"状态",align:"left",minWidth:"100px",editingType:"select",selectOptions:[{value:1,label:"正式"},{value:2,label:"作废"}],formatter:function(e){return"<span>".concat(1===+e.USESTATUS?'<span style="color: green">正式</span>':'<span class="fontWeight">作废</span>',"</span>")}},{prop:"UPDATE_ID",label:"操作人员信息",align:"left",minWidth:"200px",formatter:function(e){if(e.UPDATE_ID)return"<span>".concat(e.UPDATE_ID,"/").concat(e.UPDATE_NAME,"</span>")}},{prop:"UPDATE_TIME",label:"操作时间",align:"left",minWidth:"160px"}],e}return a}(k["d"]);Yr=Object(C["a"])([Object(k["a"])({components:{commonDic:Jr}})],Yr);var Gr=Yr,Xr=Gr,Qr=(a("529c"),Object(c["a"])(Xr,Mr,Fr,!1,null,"325485fc",null)),Zr=Qr.exports,eo=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"roledataDic"},[a("common-dic",{attrs:{typeDic:e.typeDic,title:e.title,columns:e.columns}})],1)},to=[],ao=function(e){Object(b["a"])(a,e);var t=Object(y["a"])(a);function a(){var e;return Object(f["a"])(this,a),e=t.apply(this,arguments),e.typeDic=7,e.title={iconfont:"iconfont ytcrm-zhiye",content:"人员职务字典维护"},e.columns=[{prop:"DIC_SELECT_ID",label:"职务ID",align:"left",width:"120px",editingType:"input",formatter:function(e){return"<span>".concat(e.DIC_SELECT_ID,"</span>")}},{prop:"DIC_SELECT_NAME",label:"职务名称",align:"left",minWidth:"250px",editingType:"input",formatter:function(e){return"<span>".concat(e.DIC_SELECT_NAME,"</span>")}},{prop:"USESTATUS",label:"状态",align:"left",minWidth:"100px",editingType:"select",selectOptions:[{value:1,label:"正式"},{value:2,label:"作废"}],formatter:function(e){return"<span>".concat(1===+e.USESTATUS?'<span style="color: green">正式</span>':'<span class="fontWeight">作废</span>',"</span>")}},{prop:"UPDATE_ID",label:"操作人员信息",align:"left",minWidth:"200px",formatter:function(e){if(e.UPDATE_ID)return"<span>".concat(e.UPDATE_ID,"/").concat(e.UPDATE_NAME,"</span>")}},{prop:"UPDATE_TIME",label:"操作时间",align:"left",minWidth:"160px"}],e}return a}(k["d"]);ao=Object(C["a"])([Object(k["a"])({components:{commonDic:Jr}})],ao);var io=ao,so=io,no=(a("3178"),Object(c["a"])(so,eo,to,!1,null,"23c1504e",null)),ro=no.exports,oo=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"platTypeDic"},[a("common-dic",{attrs:{typeDic:e.typeDic,title:e.title,columns:e.columns}})],1)},lo=[],co=function(e){Object(b["a"])(a,e);var t=Object(y["a"])(a);function a(){var e;return Object(f["a"])(this,a),e=t.apply(this,arguments),e.typeDic=8,e.title={iconfont:"iconfont ytcrm-keyipingtaihezuofangan",content:"平台类型字典维护"},e.columns=[{prop:"DIC_SELECT_ID",label:"平台ID",align:"left",width:"120px",editingType:"input",formatter:function(e){return"<span>".concat(e.DIC_SELECT_ID,"</span>")}},{prop:"DIC_SELECT_NAME",label:"平台名称",align:"left",minWidth:"100px",editingType:"input",formatter:function(e){return"<span>".concat(e.DIC_SELECT_NAME,"</span>")}},{prop:"USESTATUS",label:"状态",align:"left",minWidth:"100px",editingType:"select",selectOptions:[{value:1,label:"正式"},{value:2,label:"作废"}],formatter:function(e){return"<span>".concat(1===+e.USESTATUS?'<span style="color: green">正式</span>':'<span class="fontWeight">作废</span>',"</span>")}},{prop:"UPDATE_ID",label:"操作人员信息",align:"left",minWidth:"200px",formatter:function(e){if(e.UPDATE_ID)return"<span>".concat(e.UPDATE_ID,"/").concat(e.UPDATE_NAME,"</span>")}},{prop:"UPDATE_TIME",label:"操作时间",align:"left",minWidth:"160px"}],e}return a}(k["d"]);co=Object(C["a"])([Object(k["a"])({components:{commonDic:Jr}})],co);var uo=co,po=uo,ho=(a("cc77"),Object(c["a"])(po,oo,lo,!1,null,"77767175",null)),mo=ho.exports,go=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return{path:"/admin",name:"admin",component:va,redirect:{name:"adminHome"},meta:Object(x["a"])({requireAuth:!0},e)}},fo=[Object(x["a"])(Object(x["a"])({},go({})),{},{children:[{path:"adminHome",name:"adminHome",component:_a,meta:{requireAuth:!0}},{path:"menuManagement",name:"menuManagement",component:Li,meta:{requireAuth:!0}},{path:"roleManagement",name:"roleManagement",component:Wi,meta:{requireAuth:!0}},{path:"departmentPerson",name:"departmentPerson",component:Er,meta:{requireAuth:!0}},{path:"customdataDic",name:"customdataDic",component:Vr,meta:{requireAuth:!0}},{path:"roledataDic",name:"roledataDic",component:Zr,meta:{requireAuth:!0}},{path:"personPositionDic",name:"personPositionDic",component:ro,meta:{requireAuth:!0}},{path:"platTypeDic",name:"platTypeDic",component:mo,meta:{requireAuth:!0}}]})];s["default"].use(h["a"]);var vo=[{path:"/",redirect:"/crm"},{path:"/login",name:"login",component:O}].concat(Object(p["a"])(Ve),Object(p["a"])(ua),Object(p["a"])(fo)),bo=new h["a"]({routes:vo});bo.beforeEach((function(e,t,a){e.meta.requireAuth?localStorage.getItem("loginTime")&&Number((new Date).getTime())>Number(localStorage.getItem("loginTime"))?(localStorage.clear(),a({path:"/login"})):"200"===localStorage.getItem("loginCode")?a():(localStorage.removeItem("weatherValue"),a({path:"/login",query:{redirect:e.fullPath}})):a()}));var yo,Co=bo,ko=a("2f62"),Do={userUserInfor:function(e){return e.user.userInfor},userHeaderActiveIndex:function(e){return e.user.headerActiveIndex}},wo=Do,_o=a("b054"),Io=a.n(_o),Lo=a("ade3"),To="SET_INFORMATION",Oo="SET_HEADERACTIVEINDEX",xo=a("9816"),So={namespaced:!0,state:{userInfor:123,headerActiveIndex:""},mutations:(yo={},Object(Lo["a"])(yo,To,(function(e,t){e.userInfor=t})),Object(Lo["a"])(yo,Oo,(function(e,t){e.headerActiveIndex=t})),yo),actions:{actionChangeInfor:function(e,t){var a=e.commit;a("SET_INFORMATION",t)},actionLogin:function(e,t){return Object(R["a"])(regeneratorRuntime.mark((function a(){var i,s,n,r,o,l,c,u,d,p,h;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return e.commit,i=$["Loading"].service({text:"登陆中...",spinner:"el-icon-loading",background:"rgba(0, 0, 0, .7)"}),a.next=5,J();case 5:return s=a.sent,n=new xo["a"]({}),n.setPublicKey(s.data.publicKey),r=n.encrypt(t.password),o=new FormData,o.append("type","1"),o.append("userCode",t.userCode),o.append("password",r),o.append("uuid",s.data.uuid),a.next=16,W(o);case 16:l=a.sent,i.close(),c=(new Date).getTime(),u=216e5,l.success||"2000"===l.errorcode?(Object($["Message"])({showClose:!0,message:"登陆成功",type:"success"}),localStorage.setItem("tokenValue",l.data.token),localStorage.setItem("loginTime",JSON.stringify(c+u)),localStorage.setItem("loginCode",l.code),localStorage.setItem("userName",l.data.userName),localStorage.setItem("userId",l.data.userId),localStorage.setItem("userCode",l.data.userCode),localStorage.setItem("headImgUrl",l.data.headImgUrl),l.data.resListTree&&(d=[],p=[],l.data.resListTree.forEach((function(e){"后台管理系统"===e.pmsName?p.push(e):d.push(e)})),localStorage.setItem("menu",JSON.stringify(d)),localStorage.setItem("adminMenu",JSON.stringify(p[0]))),h=Co.currentRoute.query.redirect||"",h?Co.replace({path:h||"/"}):Co.replace({path:"/"})):Object($["Message"])({showClose:!0,message:l.msg,type:"error"});case 21:case"end":return a.stop()}}),a)})))()}}},jo=So;s["default"].use(ko["a"]);var Eo=!1,No=new ko["a"].Store({modules:{user:jo},getters:wo,strict:Eo,plugins:Eo?[Io()()]:[]}),Ro=No,Uo=(a("34c4"),s["default"].directive("loadmore",{inserted:function(e,t){var a=e.querySelector(".el-select-dropdown .el-select-dropdown__wrap"),i=a;a.addEventListener("scroll",(function(){var e=i.scrollHeight-i.scrollTop<=i.clientHeight;e&&t.value()}))}})),Po={loadmore:Uo},Ao=(a("06f4"),a("fc25")),$o=(a("eb14"),a("39ab")),Vo=(a("cd17"),a("ed3b")),Mo=(a("6d2a"),a("9571")),Fo=(a("fbd8"),a("55f1")),zo=(a("d13f"),a("ccb9")),Ho=(a("5783"),a("59a5")),Ko=(a("2ef0"),a("9839")),Bo=(a("f2ef"),a("3af3")),qo=(a("98a7"),a("7bec")),Wo=(a("c119"),a("d865")),Jo=(a("c68a"),a("0020")),Yo=(a("288f"),a("cdeb")),Go=(a("55ec"),a("a79d")),Xo=(a("2a26"),a("768f")),Qo=(a("9d5c"),a("a600")),Zo=(a("7f6b"),a("8592")),el=(a("ee00"),a("bb76")),tl=(a("8fb1"),a("0c63")),al=(a("0032"),a("e32c")),il=(a("de6a"),a("9a63")),sl=(a("922d"),a("09d9")),nl=(a("5704"),a("b558")),rl=(a("6ba6"),a("5efb")),ol={install:function(e){e.use(rl["a"]),e.use(nl["a"]),e.use(sl["a"]),e.use(il["a"]),e.use(al["a"]),e.use(tl["a"]),e.use(el["a"]),e.use(Zo["a"]),e.use(Qo["a"]),e.use(Xo["a"]),e.use(Go["a"]),e.use(Yo["a"]),e.use(Jo["a"]),e.use(Wo["a"]),e.use(qo["a"]),e.use(Bo["a"]),e.use(Ko["c"]),e.use(Ho["a"]),e.use(zo["a"]),e.use(Fo["a"]),e.use(Mo["a"]),e.use(Vo["a"]),e.use($o["a"]),e.use(Ao["a"])}},ll=ol;a("40f5");s["default"].component("loadmore",i),s["default"].prototype.$cancelAxios=F,s["default"].config.productionTip=!1,s["default"].use(V.a),s["default"].use(ll),new s["default"]({router:Co,store:Ro,data:function(){return{domainUrl:"https://intmedic-wx.oss-cn-hangzhou.aliyuncs.com/"}},render:function(e){return e(d)}}).$mount("#app")},d11b:function(e,t,a){"use strict";a("ccd5")},d2f9:function(e,t,a){"use strict";a("8931")},d839:function(e,t,a){"use strict";a("ff7d")},d948:function(e,t,a){"use strict";a("a312")},da3a:function(e,t,a){},dd6a:function(e,t,a){"use strict";a("80a2")},ebb1:function(e,t,a){},ed84:function(e,t,a){},ef64:function(e,t,a){"use strict";a("9c3e")},f0f7:function(e,t,a){"use strict";a("fd1f")},f944:function(e,t,a){"use strict";a("4368")},fa21:function(e,t,a){"use strict";a("54e4")},fb30:function(e,t,a){},fd1f:function(e,t,a){},ff7d:function(e,t,a){}},[[0,"runtime","npm.ant-design-vue","npm.core-js","npm.babel-runtime","npm.element-ui","npm.axios","npm.jsencrypt","npm.ant-design","npm.vuex","npm.async-validator","npm.dom-align","npm.regenerator-runtime","npm.resize-observer-polyfill","npm.tinycolor2","npm.vue-router","npm.vue","vendors~app"]]]);